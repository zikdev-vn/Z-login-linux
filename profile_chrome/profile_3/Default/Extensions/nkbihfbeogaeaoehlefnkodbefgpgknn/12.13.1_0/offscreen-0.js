LavaPack.loadBundle([[2970,{"./proxy/index.cjs":2972},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./proxy/index.cjs"),s)}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/index.cjs"}],[2971,{"@metamask/post-message-stream":2525,"@metamask/snaps-execution-environments/package.json":2995,"@metamask/snaps-utils":3270,"@metamask/utils":2983},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,i,a,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s},l=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.ProxySnapExecutor=void 0;const p=e("@metamask/post-message-stream"),d=m(e("@metamask/snaps-execution-environments/package.json")),f=e("@metamask/snaps-utils"),h=e("@metamask/utils"),g=`https://execution.metamask.io/iframe/${d.default.version}/index.html`;class b{static initialize(e,t=g){return new b(e,t)}constructor(e,t){n.add(this),r.set(this,void 0),i.set(this,void 0),this.jobs={},u(this,r,e,"f"),l(this,r,"f").on("data",l(this,n,"m",a).bind(this)),u(this,i,t,"f")}}s.ProxySnapExecutor=b,r=new WeakMap,i=new WeakMap,n=new WeakSet,a=function e(t){const{jobId:s,data:r}=t;this.jobs[s]?"terminateJob"!==r.method?this.jobs[s].stream.write(r):l(this,n,"m",c).call(this,s):l(this,n,"m",o).call(this,s).then((()=>{l(this,n,"m",e).call(this,t)})).catch((e=>{(0,f.logError)("[Worker] Error initializing job:",e)}))},o=async function(e){const t=await(0,f.createWindow)({uri:l(this,i,"f"),id:e}),s=new p.WindowPostMessageStream({name:"parent",target:"child",targetWindow:t,targetOrigin:"*"});return s.on("data",(t=>{l(this,r,"f").write({data:t,jobId:e})})),this.jobs[e]={id:e,window:t,stream:s},this.jobs[e]},c=function(e){(0,h.assert)(this.jobs[e],`Job "${e}" not found.`);const t=document.getElementById(e);(0,h.assert)(t,`Iframe with ID "${e}" not found.`),t.remove(),this.jobs[e].stream.destroy(),delete this.jobs[e]}}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/proxy/ProxySnapExecutor.cjs"}],[2972,{"./ProxySnapExecutor.cjs":2971},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./ProxySnapExecutor.cjs"),s)}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/dist/proxy/index.cjs"}],[2973,{"./errors.cjs":2981,"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.assertExhaustive=s.assertStruct=s.assert=s.AssertionError=void 0;const n=e("@metamask/superstruct"),r=e("./errors.cjs");function i(e,t){return s=e,Boolean("string"==typeof s?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var s}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}s.AssertionError=a,s.assert=function(e,t="Assertion failed.",s=a){if(!e){if(t instanceof Error)throw t;throw i(s,t)}},s.assertStruct=function(e,t,s="Assertion failed",o=a){try{(0,n.assert)(e,t)}catch(e){throw i(o,`${s}: ${function(e){return(0,r.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},s.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/assert.cjs"}],[2974,{"./assert.cjs":2973,"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.base64=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs");s.base64=(e,t={})=>{const s=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,r.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=s?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,n.pattern)(e,o)}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/base64.cjs"}],[2975,{"./assert.cjs":2973,"./hex.cjs":2982,"@scure/base":3512,buffer:4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){(function(t){(function(){Object.defineProperty(s,"__esModule",{value:!0}),s.createDataView=s.concatBytes=s.valueToBytes=s.base64ToBytes=s.stringToBytes=s.numberToBytes=s.signedBigIntToBytes=s.bigIntToBytes=s.hexToBytes=s.bytesToBase64=s.bytesToString=s.bytesToNumber=s.bytesToSignedBigInt=s.bytesToBigInt=s.bytesToHex=s.assertIsBytes=s.isBytes=void 0;const n=e("@scure/base"),r=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function m(e){(0,r.assert)(l(e),"Value must be a Uint8Array.")}function p(e){if(m(e),0===e.length)return"0x";const t=u(),s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=t[e[n]];return(0,i.add0x)(s.join(""))}function d(e){m(e);const t=p(e);return BigInt(t)}function f(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),s=t.length%2==0?t:`0${t}`,n=new Uint8Array(s.length/2);for(let e=0;e<n.length;e++){const t=s.charCodeAt(2*e),r=s.charCodeAt(2*e+1),i=t-(t<o?a:c),u=r-(r<o?a:c);n[e]=16*i+u}return n}function h(e){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function g(e){(0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function b(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function E(e){if("bigint"==typeof e)return h(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?f(e):b(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}s.isBytes=l,s.assertIsBytes=m,s.bytesToHex=p,s.bytesToBigInt=d,s.bytesToSignedBigInt=function(e){m(e);let t=BigInt(0);for(const s of e)t=(t<<BigInt(8))+BigInt(s);return BigInt.asIntN(8*e.length,t)},s.bytesToNumber=function(e){m(e);const t=d(e);return(0,r.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},s.bytesToString=function(e){return m(e),(new TextDecoder).decode(e)},s.bytesToBase64=function(e){return m(e),n.base64.encode(e)},s.hexToBytes=f,s.bigIntToBytes=h,s.signedBigIntToBytes=function(e,t){(0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)("number"==typeof t,"Byte length must be a number."),(0,r.assert)(t>0,"Byte length must be greater than 0."),(0,r.assert)(function(e,t){(0,r.assert)(t>0);const s=e>>BigInt(31);return!((~e&s)+(e&~s)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let s=e;const n=new Uint8Array(t);for(let e=0;e<n.length;e++)n[e]=Number(BigInt.asUintN(8,s)),s>>=BigInt(8);return n.reverse()},s.numberToBytes=g,s.stringToBytes=b,s.base64ToBytes=function(e){return(0,r.assert)("string"==typeof e,"Value must be a string."),n.base64.decode(e)},s.valueToBytes=E,s.concatBytes=function(e){const t=new Array(e.length);let s=0;for(let n=0;n<e.length;n++){const r=E(e[n]);t[n]=r,s+=r.length}const n=new Uint8Array(s);for(let e=0,s=0;e<t.length;e++)n.set(t[e],s),s+=t[e].length;return n},s.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/bytes.cjs"}],[2976,{"./superstruct.cjs":2991,"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.toCaipAssetId=s.toCaipAssetType=s.toCaipAccountId=s.toCaipChainId=s.parseCaipAssetId=s.parseCaipAssetType=s.parseCaipAccountId=s.parseCaipChainId=s.isCaipAssetId=s.isCaipAssetType=s.isCaipTokenId=s.isCaipAssetReference=s.isCaipAssetNamespace=s.isCaipAccountAddress=s.isCaipAccountId=s.isCaipReference=s.isCaipNamespace=s.isCaipChainId=s.KnownCaipNamespace=s.CaipAssetTypeOrIdStruct=s.CaipAssetIdStruct=s.CaipAssetTypeStruct=s.CaipTokenIdStruct=s.CaipAssetReferenceStruct=s.CaipAssetNamespaceStruct=s.CaipAccountAddressStruct=s.CaipAccountIdStruct=s.CaipReferenceStruct=s.CaipNamespaceStruct=s.CaipChainIdStruct=s.CAIP_ASSET_ID_REGEX=s.CAIP_ASSET_TYPE_REGEX=s.CAIP_TOKEN_ID_REGEX=s.CAIP_ASSET_REFERENCE_REGEX=s.CAIP_ASSET_NAMESPACE_REGEX=s.CAIP_ACCOUNT_ADDRESS_REGEX=s.CAIP_ACCOUNT_ID_REGEX=s.CAIP_REFERENCE_REGEX=s.CAIP_NAMESPACE_REGEX=s.CAIP_CHAIN_ID_REGEX=void 0;const n=e("@metamask/superstruct"),r=e("./superstruct.cjs");s.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,s.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,s.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CAIP_ASSET_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,s.CAIP_ASSET_REFERENCE_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,s.CAIP_TOKEN_ID_REGEX=/^[-.%a-zA-Z0-9]{1,78}$/u,s.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,s.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u;function i(e){return(0,n.is)(e,s.CaipNamespaceStruct)}function a(e){return(0,n.is)(e,s.CaipReferenceStruct)}function o(e){return(0,n.is)(e,s.CaipAccountAddressStruct)}function c(e){return(0,n.is)(e,s.CaipAssetNamespaceStruct)}function u(e){return(0,n.is)(e,s.CaipAssetReferenceStruct)}function l(e){return(0,n.is)(e,s.CaipTokenIdStruct)}s.CaipChainIdStruct=(0,r.definePattern)("CaipChainId",s.CAIP_CHAIN_ID_REGEX),s.CaipNamespaceStruct=(0,r.definePattern)("CaipNamespace",s.CAIP_NAMESPACE_REGEX),s.CaipReferenceStruct=(0,r.definePattern)("CaipReference",s.CAIP_REFERENCE_REGEX),s.CaipAccountIdStruct=(0,r.definePattern)("CaipAccountId",s.CAIP_ACCOUNT_ID_REGEX),s.CaipAccountAddressStruct=(0,r.definePattern)("CaipAccountAddress",s.CAIP_ACCOUNT_ADDRESS_REGEX),s.CaipAssetNamespaceStruct=(0,r.definePattern)("CaipAssetNamespace",s.CAIP_ASSET_NAMESPACE_REGEX),s.CaipAssetReferenceStruct=(0,r.definePattern)("CaipAssetReference",s.CAIP_ASSET_REFERENCE_REGEX),s.CaipTokenIdStruct=(0,r.definePattern)("CaipTokenId",s.CAIP_TOKEN_ID_REGEX),s.CaipAssetTypeStruct=(0,r.definePattern)("CaipAssetType",s.CAIP_ASSET_TYPE_REGEX),s.CaipAssetIdStruct=(0,r.definePattern)("CaipAssetId",s.CAIP_ASSET_ID_REGEX),s.CaipAssetTypeOrIdStruct=(0,r.definePattern)("CaipAssetTypeOrId",/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})(\/(?<tokenId>[-.%a-zA-Z0-9]{1,78}))?$/u),function(e){e.Bip122="bip122",e.Solana="solana",e.Eip155="eip155",e.Wallet="wallet"}(s.KnownCaipNamespace||(s.KnownCaipNamespace={})),s.isCaipChainId=function(e){return(0,n.is)(e,s.CaipChainIdStruct)},s.isCaipNamespace=i,s.isCaipReference=a,s.isCaipAccountId=function(e){return(0,n.is)(e,s.CaipAccountIdStruct)},s.isCaipAccountAddress=o,s.isCaipAssetNamespace=c,s.isCaipAssetReference=u,s.isCaipTokenId=l,s.isCaipAssetType=function(e){return(0,n.is)(e,s.CaipAssetTypeStruct)},s.isCaipAssetId=function(e){return(0,n.is)(e,s.CaipAssetIdStruct)},s.parseCaipChainId=function(e){const t=s.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},s.parseCaipAccountId=function(e){const t=s.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.parseCaipAssetType=function(e){const t=s.CAIP_ASSET_TYPE_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset type.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.parseCaipAssetId=function(e){const t=s.CAIP_ASSET_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset ID.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,tokenId:t.groups.tokenId,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},s.toCaipChainId=function(e,t){if(!i(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`},s.toCaipAccountId=function(e,t,n){if(!i(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);if(!o(n))throw new Error(`Invalid "accountAddress", must match: ${s.CAIP_ACCOUNT_ADDRESS_REGEX.toString()}`);return`${e}:${t}:${n}`},s.toCaipAssetType=function(e,t,n,r){if(!i(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);if(!c(n))throw new Error(`Invalid "assetNamespace", must match: ${s.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!u(r))throw new Error(`Invalid "assetReference", must match: ${s.CAIP_ASSET_REFERENCE_REGEX.toString()}`);return`${e}:${t}/${n}:${r}`},s.toCaipAssetId=function(e,t,n,r,o){if(!i(e))throw new Error(`Invalid "namespace", must match: ${s.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${s.CAIP_REFERENCE_REGEX.toString()}`);if(!c(n))throw new Error(`Invalid "assetNamespace", must match: ${s.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!u(r))throw new Error(`Invalid "assetReference", must match: ${s.CAIP_ASSET_REFERENCE_REGEX.toString()}`);if(!l(o))throw new Error(`Invalid "tokenId", must match: ${s.CAIP_TOKEN_ID_REGEX.toString()}`);return`${e}:${t}/${n}:${r}/${o}`}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/caip-types.cjs"}],[2977,{"./base64.cjs":2974,"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.ChecksumStruct=void 0;const n=e("@metamask/superstruct"),r=e("./base64.cjs");s.ChecksumStruct=(0,n.size)((0,r.base64)((0,n.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/checksum.cjs"}],[2978,{"./assert.cjs":2973,"./bytes.cjs":2975,"./hex.cjs":2982,"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createHex=s.createBytes=s.createBigInt=s.createNumber=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,n.union)([(0,n.number)(),(0,n.bigint)(),(0,n.string)(),a.StrictHexStruct]),c=(0,n.coerce)((0,n.number)(),o,Number),u=(0,n.coerce)((0,n.bigint)(),o,BigInt),l=((0,n.union)([a.StrictHexStruct,(0,n.instance)(Uint8Array)]),(0,n.coerce)((0,n.instance)(Uint8Array),(0,n.union)([a.StrictHexStruct]),i.hexToBytes)),m=(0,n.coerce)(a.StrictHexStruct,(0,n.instance)(Uint8Array),i.bytesToHex);s.createNumber=function(e){try{const t=(0,n.create)(e,c);return(0,r.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof n.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},s.createBigInt=function(e){try{return(0,n.create)(e,u)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},s.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,n.create)(e,l)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},s.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,n.create)(e,m)}catch(e){if(e instanceof n.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/coercers.cjs"}],[2979,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n,r,i=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,s,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,s):r?r.value=s:t.set(e,s),s};Object.defineProperty(s,"__esModule",{value:!0}),s.FrozenSet=s.FrozenMap=void 0;class o{get size(){return i(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return i(this,n,"f")[Symbol.iterator]()}constructor(e){n.set(this,void 0),a(this,n,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,n,"f").entries()}forEach(e,t){return i(this,n,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}get(e){return i(this,n,"f").get(e)}has(e){return i(this,n,"f").has(e)}keys(){return i(this,n,"f").keys()}values(){return i(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}s.FrozenMap=o;class c{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((s,n,r)=>e.call(t,s,n,this)))}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}s.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/collections.cjs"}],[2980,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2981,{"./misc.cjs":2987,"pony-cause":5246},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.wrapError=s.getErrorMessage=s.isErrorWithStack=s.isErrorWithMessage=s.isErrorWithCode=void 0;const n=e("pony-cause"),r=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}s.isErrorWithCode=i,s.isErrorWithMessage=a,s.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},s.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,r.isNullOrUndefined)(e)?"":String(e)},s.wrapError=function(e,t){if((s=e)instanceof Error||(0,r.isObject)(s)&&"Error"===s.constructor.name){let s;return s=2===Error.length?new Error(t,{cause:e}):new n.ErrorWithCause(t,{cause:e}),i(e)&&(s.code=e.code),s}var s;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/errors.cjs"}],[2982,{"./assert.cjs":2973,"./bytes.cjs":2975,"@metamask/superstruct":3315,"@noble/hashes/sha3":3492},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.remove0x=s.add0x=s.isValidChecksumAddress=s.getChecksumAddress=s.isValidHexAddress=s.assertIsStrictHexString=s.assertIsHexString=s.isStrictHexString=s.isHexString=s.HexChecksumAddressStruct=s.HexAddressStruct=s.StrictHexStruct=s.HexStruct=void 0;const n=e("@metamask/superstruct"),r=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,n.is)(e,s.HexStruct)}function c(e){return(0,n.is)(e,s.StrictHexStruct)}function u(e){(0,i.assert)((0,n.is)(e,s.HexChecksumAddressStruct),"Invalid hex address.");const t=m(e.toLowerCase()),o=m((0,a.bytesToHex)((0,r.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const s=o[t];return(0,i.assert)((0,n.is)(s,(0,n.string)()),"Hash shorter than address."),parseInt(s,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,n.is)(e,s.HexChecksumAddressStruct)&&u(e)===e}function m(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}s.HexStruct=(0,n.pattern)((0,n.string)(),/^(?:0x)?[0-9a-f]+$/iu),s.StrictHexStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]+$/iu),s.HexAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-f]{40}$/u),s.HexChecksumAddressStruct=(0,n.pattern)((0,n.string)(),/^0x[0-9a-fA-F]{40}$/u),s.isHexString=o,s.isStrictHexString=c,s.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},s.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},s.isValidHexAddress=function(e){return(0,n.is)(e,s.HexAddressStruct)||l(e)},s.getChecksumAddress=u,s.isValidChecksumAddress=l,s.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},s.remove0x=m}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/hex.cjs"}],[2983,{"./assert.cjs":2973,"./base64.cjs":2974,"./bytes.cjs":2975,"./caip-types.cjs":2976,"./checksum.cjs":2977,"./coercers.cjs":2978,"./collections.cjs":2979,"./encryption-types.cjs":2980,"./errors.cjs":2981,"./hex.cjs":2982,"./json.cjs":2984,"./keyring.cjs":2985,"./logging.cjs":2986,"./misc.cjs":2987,"./number.cjs":2988,"./opaque.cjs":2989,"./promise.cjs":2990,"./superstruct.cjs":2991,"./time.cjs":2992,"./transaction-types.cjs":2993,"./versions.cjs":2994},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){n===undefined&&(n=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,r)}:function(e,t,s,n){n===undefined&&(n=s),e[n]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(s,"__esModule",{value:!0}),r(e("./assert.cjs"),s),r(e("./base64.cjs"),s),r(e("./bytes.cjs"),s),r(e("./caip-types.cjs"),s),r(e("./checksum.cjs"),s),r(e("./coercers.cjs"),s),r(e("./collections.cjs"),s),r(e("./encryption-types.cjs"),s),r(e("./errors.cjs"),s),r(e("./hex.cjs"),s),r(e("./json.cjs"),s),r(e("./keyring.cjs"),s),r(e("./logging.cjs"),s),r(e("./misc.cjs"),s),r(e("./number.cjs"),s),r(e("./opaque.cjs"),s),r(e("./promise.cjs"),s),r(e("./superstruct.cjs"),s),r(e("./time.cjs"),s),r(e("./transaction-types.cjs"),s),r(e("./versions.cjs"),s)}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/index.cjs"}],[2984,{"./assert.cjs":2973,"./misc.cjs":2987,"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.getJsonRpcIdValidator=s.assertIsJsonRpcError=s.isJsonRpcError=s.assertIsJsonRpcFailure=s.isJsonRpcFailure=s.assertIsJsonRpcSuccess=s.isJsonRpcSuccess=s.assertIsJsonRpcResponse=s.isJsonRpcResponse=s.assertIsPendingJsonRpcResponse=s.isPendingJsonRpcResponse=s.JsonRpcResponseStruct=s.JsonRpcFailureStruct=s.JsonRpcSuccessStruct=s.PendingJsonRpcResponseStruct=s.assertIsJsonRpcRequest=s.isJsonRpcRequest=s.assertIsJsonRpcNotification=s.isJsonRpcNotification=s.JsonRpcNotificationStruct=s.JsonRpcRequestStruct=s.JsonRpcParamsStruct=s.JsonRpcErrorStruct=s.JsonRpcIdStruct=s.JsonRpcVersionStruct=s.jsonrpc2=s.getJsonSize=s.getSafeJson=s.isValidJson=s.JsonStruct=s.UnsafeJsonStruct=s.exactOptional=s.object=void 0;const n=e("@metamask/superstruct"),r=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const s=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],s)}function o(e){return new n.Struct({...e,type:`optional ${e.type}`,validator:(t,s)=>!a(s)||e.validator(t,s),refiner:(t,s)=>!a(s)||e.refiner(t,s)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(!c(e[s])){t=!1;break}return t}const s=Object.entries(e);for(let e=0;e<s.length;e++)if("string"!=typeof s[e][0]||!c(s[e][1])){t=!1;break}return t}return!1}function u(e){return(0,n.create)(e,s.JsonStruct)}s.object=e=>(0,n.object)(e),s.exactOptional=o,s.UnsafeJsonStruct=(0,n.define)("JSON",(e=>c(e))),s.JsonStruct=(0,n.coerce)(s.UnsafeJsonStruct,(0,n.refine)((0,n.any)(),"JSON",(e=>(0,n.is)(e,s.UnsafeJsonStruct))),(e=>JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t))))),s.isValidJson=function(e){try{return u(e),!0}catch{return!1}},s.getSafeJson=u,s.getJsonSize=function(e){(0,r.assertStruct)(e,s.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},s.jsonrpc2="2.0",s.JsonRpcVersionStruct=(0,n.literal)(s.jsonrpc2),s.JsonRpcIdStruct=(0,n.nullable)((0,n.union)([(0,n.number)(),(0,n.string)()])),s.JsonRpcErrorStruct=(0,s.object)({code:(0,n.integer)(),message:(0,n.string)(),data:o(s.JsonStruct),stack:o((0,n.string)())}),s.JsonRpcParamsStruct=(0,n.union)([(0,n.record)((0,n.string)(),s.JsonStruct),(0,n.array)(s.JsonStruct)]),s.JsonRpcRequestStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.JsonRpcNotificationStruct=(0,s.object)({jsonrpc:s.JsonRpcVersionStruct,method:(0,n.string)(),params:o(s.JsonRpcParamsStruct)}),s.isJsonRpcNotification=function(e){return(0,n.is)(e,s.JsonRpcNotificationStruct)},s.assertIsJsonRpcNotification=function(e,t){(0,r.assertStruct)(e,s.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},s.isJsonRpcRequest=function(e){return(0,n.is)(e,s.JsonRpcRequestStruct)},s.assertIsJsonRpcRequest=function(e,t){(0,r.assertStruct)(e,s.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},s.PendingJsonRpcResponseStruct=(0,n.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:(0,n.optional)((0,n.unknown)()),error:(0,n.optional)(s.JsonRpcErrorStruct)}),s.JsonRpcSuccessStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,result:s.JsonStruct}),s.JsonRpcFailureStruct=(0,s.object)({id:s.JsonRpcIdStruct,jsonrpc:s.JsonRpcVersionStruct,error:s.JsonRpcErrorStruct}),s.JsonRpcResponseStruct=(0,n.union)([s.JsonRpcSuccessStruct,s.JsonRpcFailureStruct]),s.isPendingJsonRpcResponse=function(e){return(0,n.is)(e,s.PendingJsonRpcResponseStruct)},s.assertIsPendingJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},s.isJsonRpcResponse=function(e){return(0,n.is)(e,s.JsonRpcResponseStruct)},s.assertIsJsonRpcResponse=function(e,t){(0,r.assertStruct)(e,s.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},s.isJsonRpcSuccess=function(e){return(0,n.is)(e,s.JsonRpcSuccessStruct)},s.assertIsJsonRpcSuccess=function(e,t){(0,r.assertStruct)(e,s.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},s.isJsonRpcFailure=function(e){return(0,n.is)(e,s.JsonRpcFailureStruct)},s.assertIsJsonRpcFailure=function(e,t){(0,r.assertStruct)(e,s.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},s.isJsonRpcError=function(e){return(0,n.is)(e,s.JsonRpcErrorStruct)},s.assertIsJsonRpcError=function(e,t){(0,r.assertStruct)(e,s.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},s.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:s,permitNull:n}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(s||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||n&&null===e)}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/json.cjs"}],[2985,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/keyring.cjs"}],[2986,{debug:4438},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.createModuleLogger=s.createProjectLogger=void 0;const r=(0,n(e("debug")).default)("metamask");s.createProjectLogger=function(e){return r.extend(e)},s.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/logging.cjs"}],[2987,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.calculateNumberSize=s.calculateStringSize=s.isASCII=s.isPlainObject=s.ESCAPE_CHARACTERS_REGEXP=s.JsonSize=s.getKnownPropertyNames=s.hasProperty=s.isObject=s.isNullOrUndefined=s.isNonEmptyArray=void 0,s.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},s.isNullOrUndefined=function(e){return null===e||e===undefined},s.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}s.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),s.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(s.JsonSize||(s.JsonSize={})),s.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,s.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},s.isASCII=n,s.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(e.match(s.ESCAPE_CHARACTERS_REGEXP)??[]).length},s.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/misc.cjs"}],[2988,{"./assert.cjs":2973,"./hex.cjs":2982},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.hexToBigInt=s.hexToNumber=s.bigIntToHex=s.numberToHex=void 0;const n=e("./assert.cjs"),r=e("./hex.cjs");s.numberToHex=e=>((0,n.assert)("number"==typeof e,"Value must be a number."),(0,n.assert)(e>=0,"Value must be a non-negative number."),(0,n.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,r.add0x)(e.toString(16)));s.bigIntToHex=e=>((0,n.assert)("bigint"==typeof e,"Value must be a bigint."),(0,n.assert)(e>=0,"Value must be a non-negative bigint."),(0,r.add0x)(e.toString(16)));s.hexToNumber=e=>{(0,r.assertIsHexString)(e);const t=parseInt(e,16);return(0,n.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};s.hexToBigInt=e=>((0,r.assertIsHexString)(e),BigInt((0,r.add0x)(e)))}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/number.cjs"}],[2989,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/opaque.cjs"}],[2990,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.createDeferredPromise=void 0,s.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,s;const n=new Promise(((e,n)=>{t=e,s=n}));return e&&n.catch((e=>{})),{promise:n,resolve:t,reject:s}}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/promise.cjs"}],[2991,{"@metamask/superstruct":3315},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.definePattern=void 0;const n=e("@metamask/superstruct");s.definePattern=function(e,t){return(0,n.define)(e,(e=>"string"==typeof e&&t.test(e)))}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/superstruct.cjs"}],[2992,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.timeSince=s.inMilliseconds=s.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(s.Duration||(s.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};s.inMilliseconds=function(e,t){return n(e,"count"),e*t},s.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/time.cjs"}],[2993,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0})}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2994,{"./assert.cjs":2973,"@metamask/superstruct":3315,semver:5790},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.satisfiesVersionRange=s.gtRange=s.gtVersion=s.assertIsSemVerRange=s.assertIsSemVerVersion=s.isValidSemVerRange=s.isValidSemVerVersion=s.VersionRangeStruct=s.VersionStruct=void 0;const n=e("@metamask/superstruct"),r=e("semver"),i=e("./assert.cjs");s.VersionStruct=(0,n.refine)((0,n.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),s.VersionRangeStruct=(0,n.refine)((0,n.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),s.isValidSemVerVersion=function(e){return(0,n.is)(e,s.VersionStruct)},s.isValidSemVerRange=function(e){return(0,n.is)(e,s.VersionRangeStruct)},s.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,s.VersionStruct)},s.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,s.VersionRangeStruct)},s.gtVersion=function(e,t){return(0,r.gt)(e,t)},s.gtRange=function(e,t){return(0,r.gtr)(e,t)},s.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/snaps-execution-environments>@metamask/utils",file:"node_modules/@metamask/snaps-execution-environments/node_modules/@metamask/utils/dist/versions.cjs"}],[2995,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){t.exports={name:"@metamask/snaps-execution-environments",version:"6.14.0",description:"Snap sandbox environments for executing SES javascript",keywords:["MetaMask","Snaps","Ethereum"],homepage:"https://github.com/MetaMask/snaps/tree/main/packages/snaps-execution-environments#readme",bugs:{url:"https://github.com/MetaMask/snaps/issues"},repository:{type:"git",url:"https://github.com/MetaMask/snaps.git"},license:"SEE LICENSE IN LICENSE",sideEffects:!1,exports:{".":{import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"},require:{types:"./dist/index.d.cts",default:"./dist/index.cjs"}},"./dist/browserify/node-process/bundle.js":"./dist/browserify/node-process/bundle.js","./dist/browserify/node-thread/bundle.js":"./dist/browserify/node-thread/bundle.js","./package.json":"./package.json"},main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/index.d.cts",files:["dist"],scripts:{"auto-changelog-init":"auto-changelog init",build:"ts-bridge --project tsconfig.build.json --verbose --clean --no-references","build:lavamoat":"lavamoat scripts/build.js --policy lavamoat/build-system/policy.json  --policyOverride lavamoat/build-system/policy-override.json","build:lavamoat:policy":"yarn build:lavamoat --writeAutoPolicy && node scripts/build.js --writeAutoPolicy","build:post":"yarn build:lavamoat","changelog:update":"../../scripts/update-changelog.sh @metamask/snaps-execution-environments","changelog:validate":"../../scripts/validate-changelog.sh @metamask/snaps-execution-environments",clean:"rimraf '*.tsbuildinfo' 'dist' 'src/__GENERATED__/' 'coverage/*' '__test__/*'",lint:"yarn lint:eslint && yarn lint:misc --check && yarn changelog:validate && yarn lint:dependencies","lint:ci":"yarn lint","lint:dependencies":"depcheck","lint:eslint":"eslint . --cache --ext js,ts,jsx,tsx","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":'prettier --no-error-on-unmatched-pattern --loglevel warn "**/*.json" "**/*.md" "**/*.html" "!CHANGELOG.md" --ignore-path ./.prettierignore',"publish:preview":"yarn npm publish --tag preview","since-latest-release":"../../scripts/since-latest-release.sh",start:"node scripts/start.js",test:"jest --reporters=jest-silent-reporter && yarn test:browser","test:browser":"wdio run wdio.config.js","test:clean":"jest --clearCache","test:post":"ts-node scripts/coverage.ts && rimraf coverage/jest coverage/wdio","test:verbose":"jest --verbose","test:watch":"jest --watch"},dependencies:{"@metamask/json-rpc-engine":"^10.0.2","@metamask/object-multiplex":"^2.1.0","@metamask/post-message-stream":"^9.0.0","@metamask/providers":"^18.3.1","@metamask/rpc-errors":"^7.0.2","@metamask/snaps-sdk":"^6.17.0","@metamask/snaps-utils":"^8.10.0","@metamask/superstruct":"^3.1.0","@metamask/utils":"^11.0.1",nanoid:"^3.1.31","readable-stream":"^3.6.2"},devDependencies:{"@babel/core":"^7.23.2","@babel/preset-env":"^7.23.2","@babel/preset-typescript":"^7.23.2","@esbuild-plugins/node-globals-polyfill":"^0.2.3","@esbuild-plugins/node-modules-polyfill":"^0.2.2","@lavamoat/allow-scripts":"^3.0.4","@lavamoat/lavapack":"^6.1.1","@lavamoat/lavatube":"^1.0.0","@metamask/auto-changelog":"^3.4.4","@metamask/eslint-config":"^12.1.0","@metamask/eslint-config-jest":"^12.1.0","@metamask/eslint-config-nodejs":"^12.1.0","@metamask/eslint-config-typescript":"^12.1.0","@swc/core":"1.3.78","@swc/jest":"^0.2.26","@ts-bridge/cli":"^0.6.1","@types/express":"^4.17.17","@types/jest":"^27.5.1","@types/node":"18.14.2","@typescript-eslint/eslint-plugin":"^5.42.1","@typescript-eslint/parser":"^6.21.0","@wdio/browser-runner":"^8.19.0","@wdio/cli":"^8.19.0","@wdio/globals":"^8.19.0","@wdio/mocha-framework":"^8.19.0","@wdio/spec-reporter":"^8.19.0","@wdio/static-server-service":"^8.19.0","babel-plugin-tsconfig-paths-module-resolver":"^1.0.4",babelify:"^10.0.0",browserify:"^17.0.0",deepmerge:"^4.2.2",depcheck:"^1.4.7",esbuild:"^0.18.10",eslint:"^8.27.0","eslint-config-prettier":"^8.5.0","eslint-plugin-import":"^2.26.0","eslint-plugin-jest":"^27.1.5","eslint-plugin-jsdoc":"^41.1.2","eslint-plugin-n":"^15.7.0","eslint-plugin-prettier":"^4.2.1","eslint-plugin-promise":"^6.1.1","expect-webdriverio":"^4.4.1","istanbul-lib-coverage":"^3.2.0","istanbul-lib-report":"^3.0.0","istanbul-reports":"^3.1.5",jest:"^29.0.2","jest-environment-node":"^29.5.0","jest-fetch-mock":"^3.0.3","jest-silent-reporter":"^0.6.0",lavamoat:"^8.0.4","lavamoat-browserify":"^17.0.5",prettier:"^2.8.8","prettier-plugin-packagejson":"^2.5.2",rimraf:"^4.1.2","serve-handler":"^6.1.5",ses:"^1.1.0",terser:"^5.17.7","ts-node":"^10.9.1",typescript:"~5.3.3",vite:"^4.3.9","vite-tsconfig-paths":"^4.0.5","wdio-chromedriver-service":"^8.1.1","wdio-geckodriver-service":"^5.0.2",webdriverio:"^8.19.0",yargs:"^17.7.1"},engines:{node:"^18.16 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"}}}}},{package:"@metamask/snaps-execution-environments",file:"node_modules/@metamask/snaps-execution-environments/package.json"}],[5948,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){function n(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Object.defineProperty(s,"__esModule",{value:!0}),s.CallbackProcessor=void 0;s.CallbackProcessor=class{constructor(){n(this,"currentMessageId",0),n(this,"messageCallbacks",new Map)}registerCallback(e){return this.currentMessageId+=1,this.messageCallbacks.set(this.currentMessageId,e),this.currentMessageId}processCallback(e){if(this.messageCallbacks.has(e.messageId)){const t=this.messageCallbacks.get(e.messageId);if(t)return this.messageCallbacks.delete(e.messageId),t(e)}return null}}}}},{package:"$root$",file:"offscreen/scripts/callback-processor.ts"}],[5949,{"../../shared/constants/offscreen-communication":5974},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){chrome.runtime.onMessage.addListener(((e,t,s)=>{if(e.target===n.OffscreenCommunicationTarget.latticeOffscreen)return async function(e){const t=window.open(e);if(!t)throw new Error("Failed to open Lattice connector.");return t}(e.params.url).then((e=>{const t=setInterval((()=>{e.closed&&(clearInterval(t),s({error:new Error("Lattice connector closed.")}))}),500);window.addEventListener("message",(r=>{if(r.origin===n.KnownOrigins.lattice||r.source!==e)try{clearInterval(t);const e=JSON.parse(r.data);e.deviceID&&e.password||s({error:new Error("Invalid credentials returned from Lattice.")}),s({result:e})}catch(e){s({error:e})}}),!1)})),!0}))};var n=e("../../shared/constants/offscreen-communication")}}},{package:"$root$",file:"offscreen/scripts/lattice.ts"}],[5950,{"../../shared/constants/offscreen-communication":5974,"./callback-processor":5948},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=async function(){return new Promise((e=>{const t=document.createElement("iframe");t.src="https://metamask.github.io/ledger-iframe-bridge/8.0.3/",t.allow="hid",t.onload=()=>{!function(e){window.addEventListener("message",(({origin:t,data:s,source:r})=>{if(t===n.KnownOrigins.ledger&&r===e.contentWindow&&s){if(s.action===a)return void chrome.runtime.sendMessage({action:n.OffscreenCommunicationEvents.ledgerDeviceConnect,payload:s.payload.connected});o.processCallback(s)}})),chrome.runtime.onMessage.addListener(((t,s,r)=>{if(t.target!==n.OffscreenCommunicationTarget.ledgerOffscreen)return;if(!e.contentWindow){return void r({success:!1,payload:{error:new Error("Ledger iframe not present")}})}const a=o.registerCallback(r),c={...t,target:i,messageId:a};return e.contentWindow.postMessage(c,n.KnownOrigins.ledger),!0}))}(t),e()},document.body.appendChild(t)}))};var n=e("../../shared/constants/offscreen-communication"),r=e("./callback-processor");const i="LEDGER-IFRAME",a="ledger-connection-event",o=new r.CallbackProcessor}}},{package:"$root$",file:"offscreen/scripts/ledger.ts"}],[5952,{"../../shared/constants/offscreen-communication":5974,"@trezor/connect-web":3742},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(){chrome.runtime.onMessage.addListener(((e,t,s)=>{if(e.target===r.OffscreenCommunicationTarget.trezorOffscreen){switch(e.action){case r.TrezorAction.init:n.default.on(n.DEVICE_EVENT,(e=>{var t;e.type===n.DEVICE.CONNECT&&null!==(t=e.payload.features)&&void 0!==t&&t.model&&chrome.runtime.sendMessage({target:r.OffscreenCommunicationTarget.extension,event:r.OffscreenCommunicationEvents.trezorDeviceConnect,payload:{model:e.payload.features.model,minorVersion:e.payload.features.minor_version}})})),n.default.init({...e.params,env:"webextension"}).then((()=>{s()}));break;case r.TrezorAction.dispose:n.default.dispose(),s();break;case r.TrezorAction.getPublicKey:n.default.getPublicKey(e.params).then((e=>{s(e)}));break;case r.TrezorAction.signTransaction:n.default.ethereumSignTransaction(e.params).then((e=>{s(e)}));break;case r.TrezorAction.signMessage:n.default.ethereumSignMessage(e.params).then((e=>{s(e)}));break;case r.TrezorAction.signTypedData:n.default.ethereumSignTypedData(e.params).then((e=>{s(e)}));break;default:s({success:!1,payload:{error:"Trezor action not supported"}})}return!0}}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var s=i(t);if(s&&s.has(e))return s.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a]}return n.default=e,s&&s.set(e,n),n}(e("@trezor/connect-web")),r=e("../../shared/constants/offscreen-communication");function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,s=new WeakMap;return(i=function(e){return e?s:t})(e)}}}},{package:"$root$",file:"offscreen/scripts/trezor.ts"}],[5951,{"../../shared/constants/offscreen-communication":5974,"./lattice":5949,"./ledger":5950,"./trezor":5952,"@metamask/post-message-stream":2525,"@metamask/snaps-execution-environments":2970,"@metamask/utils":3434},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,s){var n=e("@metamask/post-message-stream"),r=e("@metamask/snaps-execution-environments"),i=(e("@metamask/utils"),e("../../shared/constants/offscreen-communication")),a=u(e("./ledger")),o=u(e("./trezor")),c=u(e("./lattice"));function u(e){return e&&e.__esModule?e:{default:e}}(async function(){!function(){const e=new n.BrowserRuntimePostMessageStream({name:"child",target:"parent"});r.ProxySnapExecutor.initialize(e,"./snaps/index.html")}(),(0,o.default)(),(0,c.default)();try{const e=new Promise(((e,t)=>{setTimeout((()=>{t(new Error("Ledger initialization timed out"))}),i.OFFSCREEN_LEDGER_INIT_TIMEOUT)}));await Promise.race([(0,a.default)(),e])}catch(e){console.error("Ledger initialization failed:",e)}})().then((()=>{chrome.runtime.sendMessage({target:i.OffscreenCommunicationTarget.extensionMain,isBooted:!0,webdriverPresent:!0===navigator.webdriver})}))}}},{package:"$root$",file:"offscreen/scripts/offscreen.ts"}]],[5951],{});