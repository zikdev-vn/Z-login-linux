LavaPack.loadBundle([[661,{_process:5251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(e){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.Sha1=n.RANDOM_FACTOR=n.MAX_VALUE_MILLIS=n.FirebaseError=n.ErrorFactory=n.Deferred=n.DecodeBase64StringError=n.CONSTANTS=void 0,n.areCookiesEnabled=function(){if("undefined"==typeof navigator||!navigator.cookieEnabled)return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.assertionError=n.assert=void 0,n.async=function(e,t){return(...n)=>{Promise.resolve(!0).then((()=>{e(...n)})).catch((e=>{t&&t(e)}))}},n.base64urlEncodeWithoutPadding=n.base64Encode=n.base64Decode=n.base64=void 0,n.calculateBackoffMillis=function(e,t=O,n=b){const r=t*Math.pow(n,e),a=Math.round(N*r*(Math.random()-.5)*2);return Math.min(k,r+a)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.createSubscribe=function(e,t){const n=new w(e,t);return n.subscribe.bind(n)},n.decode=void 0,n.deepCopy=function(e){return l(undefined,e)},n.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),a=Object.keys(n);for(const s of r){if(!a.includes(s))return!1;const r=t[s],o=n[s];if(I(r)&&I(o)){if(!e(r,o))return!1}else if(r!==o)return!1}for(const e of a)if(!r.includes(e))return!1;return!0},n.deepExtend=l,n.errorPrefix=C,n.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:undefined)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.getExperimentalSetting=n.getDefaults=n.getDefaultEmulatorHostnameAndPort=n.getDefaultEmulatorHost=n.getDefaultAppConfig=void 0,n.getGlobal=p,n.getModularInstance=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return e&&e._delegate?e._delegate:e},n.getUA=g,n.isAdmin=void 0,n.isBrowser=function(){return"undefined"!=typeof window||y()},n.isBrowserExtension=function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:undefined;return"object"==typeof e&&e.id!==undefined},n.isCloudflareWorker=function(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent},n.isElectron=function(){return g().indexOf("Electron/")>=0},n.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},n.isIE=function(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},n.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(e){return!1}},n.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())},n.isNode=T,n.isNodeSdk=function(){return!0===t.NODE_CLIENT||!0===t.NODE_ADMIN},n.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},n.isSafari=function(){return!T()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},n.isUWP=function(){return g().indexOf("MSAppHost/")>=0},n.isValidTimestamp=n.isValidFormat=void 0,n.isWebWorker=y,n.issuedAtTime=void 0,n.jsonEval=_,n.map=function(e,t,n){const r={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=t.call(n,e[a],a,e));return r},n.ordinal=function(e){if(!Number.isFinite(e))return`${e}`;return e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e)},n.promiseWithTimeout=
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t=2e3){const n=new h;return setTimeout((()=>n.reject("timeout!")),t),e.then(n.resolve,n.reject),n.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},n.querystringDecode=function(e){const t={},n=e.replace(/^\?/,"").split("&");return n.forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t},n.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:undefined},n.stringToByteArray=n.stringLength=void 0,n.stringify=function(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.validateArgCount=void 0,n.validateCallback=function(e,t,n,r){if(r&&!n)return;if("function"!=typeof n)throw new Error(C(e,t)+"must be a valid function.")},n.validateContextObject=function(e,t,n,r){if(r&&!n)return;if("object"!=typeof n||null===n)throw new Error(C(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,n.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},n.validateNamespace=function(e,t,n){if(n&&!t)return;if("string"!=typeof t)throw new Error(C(e,"namespace")+"must be a valid firebase namespace.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const t=n.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},r=function(e,t){if(!e)throw a(t)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.assert=r;const a=function(e){return new Error("Firebase Database ("+t.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.assertionError=a;const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296==(64512&a)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},o=n.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const a=e[t],s=t+1<e.length,o=s?e[t+1]:0,i=t+2<e.length,c=i?e[t+2]:0,u=a>>2,d=(3&a)<<4|o>>4;let l=(15&o)<<2|c>>6,p=63&c;i||(p=64,s||(l=64)),r.push(n[u],n[d],n[l],n[p])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&s)}else if(a>239&&a<365){const s=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const a=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==a||null==s||null==o||null==c)throw new i;const u=a<<2|s>>4;if(r.push(u),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==c){const e=o<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}n.DecodeBase64StringError=i;const c=function(e){const t=s(e);return o.encodeByteArray(t,!0)};n.base64Encode=c;const u=function(e){return c(e).replace(/\./g,"")};n.base64urlEncodeWithoutPadding=u;const d=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:e===undefined&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=l(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function p(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.base64Decode=d;const m=()=>{try{return p().__FIREBASE_DEFAULTS__||(()=>{if(void 0===e||void 0===e.env)return})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};n.getDefaults=m;const f=e=>{var t,n;return null===(n=null===(t=m())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]};n.getDefaultEmulatorHost=f;n.getDefaultEmulatorHostnameAndPort=e=>{const t=f(e);if(!t)return undefined;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]};n.getDefaultAppConfig=()=>{var e;return null===(e=m())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.getExperimentalSetting=e=>{var t;return null===(t=m())||void 0===t?void 0:t[`_${e}`]};class h{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function T(){var e;const t=null===(e=m())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}n.Deferred=h;class E extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,E.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,S.prototype.create)}}n.FirebaseError=E;class S{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],s=a?function(e,t){return e.replace(v,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(a,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new E(r,o,n)}}n.ErrorFactory=S;const v=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(e){return JSON.parse(e)}const A=function(e){let t={},n={},r={},a="";try{const s=e.split(".");t=_(d(s[0])||""),n=_(d(s[1])||""),a=s[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:a}};n.decode=A;n.isValidTimestamp=function(e){const t=A(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,a=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),a=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!a&&n>=r&&n<=a};n.issuedAtTime=function(e){const t=A(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null};n.isValidFormat=function(e){const t=A(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")};function I(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.isAdmin=function(e){const t=A(e).claims;return"object"==typeof t&&!0===t.admin};n.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=n[e-3]^n[e-8]^n[e-14]^n[e-16];n[e]=4294967295&(t<<1|t>>>31)}let r,a,s=this.chain_[0],o=this.chain_[1],i=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(r=c^o&(i^c),a=1518500249):(r=o^i^c,a=1859775393):e<60?(r=o&i|c&(o|i),a=2400959708):(r=o^i^c,a=3395469782);const t=(s<<5|s>>>27)+r+u+a+n[e]&4294967295;u=c,c=i,i=4294967295&(o<<30|o>>>2),o=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+i&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;t===undefined&&(t=e.length);const n=t-this.blockSize;let r=0;const a=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(a[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(a),s=0;break}}else for(;r<t;)if(a[s]=e[r],++s,++r,s===this.blockSize){this.compress_(a),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let t=0;t<5;t++)for(let r=24;r>=0;r-=8)e[n]=this.chain_[t]>>r&255,++n;return e}};class w{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(e===undefined&&t===undefined&&n===undefined)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},r.next===undefined&&(r.next=R),r.error===undefined&&(r.error=R),r.complete===undefined&&(r.complete=R);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}unsubscribeOne(e){this.observers!==undefined&&this.observers[e]!==undefined&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&this.onNoObservers!==undefined&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(this.observers!==undefined&&this.observers[e]!==undefined)try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,e!==undefined&&(this.finalError=e),this.task.then((()=>{this.observers=undefined,this.onNoObservers=undefined})))}}function R(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t){return`${e} failed: ${t} argument `}n.validateArgCount=function(e,t,n,r){let a;if(r<t?a="at least "+t:r>n&&(a=0===n?"none":"no more than "+n),a){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+a+".")}};n.stringToByteArray=function(e){const t=[];let n=0;for(let a=0;a<e.length;a++){let s=e.charCodeAt(a);if(s>=55296&&s<=56319){const t=s-55296;a++,r(a<e.length,"Surrogate pair missing trail surrogate.");s=65536+(t<<10)+(e.charCodeAt(a)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
n.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};const O=1e3,b=2,k=n.MAX_VALUE_MILLIS=144e5,N=n.RANDOM_FACTOR=.5}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/notification-services-controller>firebase>@firebase/util",file:"node_modules/@firebase/util/dist/index.esm2017.js"}],[662,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});class r{static parse(e){if(""===e)return new r([]);if(!e.startsWith("/"))throw new a(e);const[,...t]=e.split("/");return new r(t.map((e=>e.replace(/~1/g,"/").replace(/~0/g,"~"))))}constructor(e){this.tokens=e}toString(){if(0===this.tokens.length)return"";return`/${this.tokens.map((e=>e.replace(/~/g,"~0").replace(/\//g,"~1"))).join("/")}`}shmeval(e){for(const t of this.tokens){if(!e.hasOwnProperty(t))throw new s(e,t);e=e[t]}return e}}n.default=r;class a extends Error{constructor(e){super(`Invalid JSON Pointer: ${e}`),this.ptr=e}}n.InvalidPtrError=a;class s extends Error{constructor(e,t){super(`Error evaluating JSON Pointer: no attribute ${t} on ${e}`),this.instance=e,this.token=t}}n.EvalError=s}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/reference-resolver>@json-schema-spec/json-pointer",file:"node_modules/@json-schema-spec/json-pointer/lib/index.js"}],[663,{"./errors":664,"isomorphic-fetch":4953},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./errors"),i=s(e("isomorphic-fetch")),c=function(e){return r(void 0,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,i.default)(e)];case 1:return t=r.sent(),[3,3];case 2:throw r.sent(),new o.InvalidRemoteURLError(e);case 3:return r.trys.push([3,5,,6]),[4,t.json()];case 4:return[2,r.sent()];case 5:throw n=r.sent(),new o.NonJsonRefError({$ref:e},n.message);case 6:return[2]}}))}))};n.default={https:c,http:c}}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/reference-resolver",file:"node_modules/@json-schema-tools/reference-resolver/build/default-protocol-handler-map.js"}],[664,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InvalidFileSystemPathError=n.InvalidRemoteURLError=n.NotResolvableError=n.NonJsonRefError=void 0;var r=function(e,t){this.name="NonJsonRefError",this.message=["NonJsonRefError","The resolved value at the reference: ".concat(e.$ref," was not JSON.parse 'able"),"The non-json content in question: ".concat(t)].join("\n")};n.NonJsonRefError=r;var a=function(e){this.name="NotResolvableError",this.message=["NotResolvableError","Could not resolve the reference: ".concat(e),"No protocol handler was found, and it was not found to be an internal reference"].join("\n")};n.NotResolvableError=a;var s=function(e){this.name="InvalidRemoteURLError",this.message=["InvalidRemoteURLError","The url was not resolvable: ".concat(e)].join("\n")};n.InvalidRemoteURLError=s;var o=function(e){this.name="InvalidFileSystemPathError",this.message=["InvalidFileSystemPathError","The path was not resolvable: ".concat(e)].join("\n")};n.InvalidFileSystemPathError=o}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/reference-resolver",file:"node_modules/@json-schema-tools/reference-resolver/build/errors.js"}],[6648,{"../../../helpers/constants/design-system":6979,"../../../selectors":7653,"../../component-library/avatar-account":6463,"../../component-library/avatar-base":6466,"../../component-library/avatar-network":6475,"../../component-library/avatar-token":6478,"../../component-library/box":6491,"../../component-library/text":6588,"./avatar-group.types":6649,classnames:4314,react:5502,"react-redux":5460},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AvatarGroup=void 0;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("react")),s=(r=e("classnames"))&&r.__esModule?r:{default:r},o=e("react-redux"),i=e("../../../selectors"),c=e("../../component-library/text"),u=e("../../../helpers/constants/design-system"),d=e("../../component-library/avatar-token"),l=e("../../component-library/box"),p=e("../../component-library/avatar-account"),m=e("../../component-library/avatar-network"),f=e("../../component-library/avatar-base"),h=e("./avatar-group.types");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}n.AvatarGroup=({className:e="",limit:t=4,members:n=[],size:r=d.AvatarTokenSize.Xs,avatarType:g=h.AvatarType.TOKEN,borderColor:T,isTagOverlay:y=!1})=>{const E=n.length,S=n.slice(0,t).reverse(),v=E>t,_=(0,o.useSelector)(i.getUseBlockie);let A="";A=d.AvatarTokenSize.Xs?"-8px":d.AvatarTokenSize.Sm?"-12px":"-16px";const I=`+${(E-t).toLocaleString()}`;return a.createElement(l.Box,{alignItems:u.AlignItems.center,display:u.Display.Flex,className:(0,s.default)("multichain-avatar-group",e),"data-testid":"avatar-group",gap:1},a.createElement(l.Box,{display:u.Display.Flex,alignItems:u.AlignItems.center},S.map(((e,t)=>a.createElement(l.Box,{borderRadius:u.BorderRadius.full,key:t,style:{marginLeft:0===t?"0":A}},g===h.AvatarType.TOKEN&&a.createElement(d.AvatarToken,{src:e.avatarValue,name:e.symbol,size:r,borderColor:T}),g===h.AvatarType.ACCOUNT&&a.createElement(p.AvatarAccount,{size:p.AvatarAccountSize.Xs,address:e.avatarValue,variant:_?p.AvatarAccountVariant.Blockies:p.AvatarAccountVariant.Jazzicon,borderColor:T}),g===h.AvatarType.NETWORK&&a.createElement(m.AvatarNetwork,{src:e.avatarValue,name:e.symbol??"",size:m.AvatarNetworkSize.Xs})))),v&&y&&a.createElement(f.AvatarBase,{backgroundColor:u.BackgroundColor.overlayAlternative,style:{marginLeft:A,fontSize:8},size:f.AvatarBaseSize.Xs,borderColor:u.BorderColor.backgroundDefault,borderRadius:u.BorderRadius.MD,color:u.TextColor.overlayInverse},I)),v&&!y?a.createElement(l.Box,null,a.createElement(c.Text,{variant:u.TextVariant.bodySm,color:u.TextColor.textAlternative},I)):null)}}}},{package:"$root$",file:"ui/components/multichain/avatar-group/avatar-group.tsx"}],[6649,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AvatarType=void 0;n.AvatarType=function(e){return e.TOKEN="TOKEN",e.ACCOUNT="ACCOUNT",e.NETWORK="NETWORK",e}({})}}},{package:"$root$",file:"ui/components/multichain/avatar-group/avatar-group.types.tsx"}],[665,{"./default-protocol-handler-map":663,"./reference-resolver":666},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var i=o(e("./default-protocol-handler-map")),c=o(e("./reference-resolver")),u=r(r({},i.default),{file:function(){return a(void 0,void 0,void 0,(function(){return s(this,(function(e){return[2,undefined]}))}))}});n.default=new c.default(u)}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/reference-resolver",file:"node_modules/@json-schema-tools/reference-resolver/build/index-web.js"}],[6650,{"./avatar-group":6648},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"AvatarGroup",{enumerable:!0,get:function(){return r.AvatarGroup}});var r=e("./avatar-group")}}},{package:"$root$",file:"ui/components/multichain/avatar-group/index.ts"}],[666,{"./errors":664,"./resolve-pointer":667},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,s){function o(e){try{c(r.next(e))}catch(e){s(e)}}function i(e){try{c(r.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=o.trys,(a=a.length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("./errors"),i=s(e("./resolve-pointer")),c=function(){function e(e){this.protocolHandlerMap=e}return e.prototype.resolve=function(e){return r(this,arguments,void 0,(function(e,t){var n,r,s,c,u,d,l,p,m,f;return void 0===t&&(t={}),a(this,(function(a){switch(a.label){case 0:if("#"===e[0])return[2,Promise.resolve((0,i.default)(e,t))];(n=e.split("#")).length>1&&(r=n[n.length-1]),s=n[0],a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.protocolHandlerMap.file(s,t)];case 2:return c=a.sent(),[3,4];case 3:throw u=a.sent(),new o.NonJsonRefError({$ref:e},u.message);case 4:if(c!==undefined)return f=c,r&&(f=(0,i.default)(r,f)),[2,f];if(!1===e.includes("://"))throw new o.InvalidFileSystemPathError(e);d=0,l=Object.keys(this.protocolHandlerMap),a.label=5;case 5:return d<l.length?(p=l[d],s.startsWith(p)?[4,this.protocolHandlerMap[p](s,t)]:[3,7]):[3,8];case 6:if((m=a.sent())!==undefined)return f=m,r&&(f=(0,i.default)(r,f)),[2,f];a.label=7;case 7:return d++,[3,5];case 8:throw new o.NotResolvableError(e)}}))}))},e}();n.default=c}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/reference-resolver",file:"node_modules/@json-schema-tools/reference-resolver/build/reference-resolver.js"}],[667,{"@json-schema-spec/json-pointer":662},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.InvalidJsonPointerRefError=void 0;var a=r(e("@json-schema-spec/json-pointer")),s=function(e,t){this.name="InvalidJsonPointerRefError",this.message=["InvalidJsonPointerRefError","The provided RFC6901 JSON Pointer is invalid: ".concat(e),"","addition info: ",t].join("\n")};n.InvalidJsonPointerRefError=s,n.default=function(e,t){try{var n=e.replace("#","");return a.default.parse(n).shmeval(t)}catch(t){throw new s(e,t.message)}}}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/reference-resolver",file:"node_modules/@json-schema-tools/reference-resolver/build/resolve-pointer.js"}],[668,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(n,"__esModule",{value:!0}),n.defaultOptions=void 0,n.defaultOptions={skipFirstMutation:!1,mutable:!1,bfs:!1};var s=function(e){return e.map((function(e){return""===e?"$":".".concat(e)})).join("")},o=function(e,t){var n=t.find((function(t){return t===e}));return n||!1},i=function(e,t){return void 0===t&&(t=1),e[e.length-t]};n.default=function e(t,c,u,d,l,p,m,f,h){void 0===u&&(u=n.defaultOptions),void 0===d&&(d=0),void 0===l&&(l=[]),void 0===p&&(p=[]),void 0===m&&(m=[]),void 0===f&&(f=[]),void 0===h&&(h=[]);var g=r(r({},n.defaultOptions),u);if(0===d&&(m=[""]),"boolean"==typeof t||t instanceof Boolean)return!0===g.skipFirstMutation&&0===d?t:c(t,!1,s(m),i(p));var T=t;!1===g.mutable&&(T=r({},t)),p.push(T),!0===g.bfs&&(!1!==g.skipFirstMutation&&0===d||(T=c(T,!1,s(m),i(p,2)))),l.push(t),f.push([t,T]);var y=function(t,n){var r=o(t,l);return r?(h.push(r),!0===g.skipFirstMutation&&r===l[0]?c(t,!0,s(n),i(p)):f.find((function(e){var t=e[0];return r===t}))[1]):e(t,c,u,d+1,l,p,n,f,h)};if(t.anyOf)T.anyOf=t.anyOf.map((function(e,t){return y(e,a(a([],m,!0),["anyOf[".concat(t,"]")],!1))}));else if(t.allOf)T.allOf=t.allOf.map((function(e,t){return y(e,a(a([],m,!0),["allOf[".concat(t,"]")],!1))}));else if(t.oneOf)T.oneOf=t.oneOf.map((function(e,t){return y(e,a(a([],m,!0),["oneOf[".concat(t,"]")],!1))}));else{if(t.items)if(t.items instanceof Array)T.items=t.items.map((function(e,t){return y(e,a(a([],m,!0),["items[".concat(t,"]")],!1))}));else{var E=o(t.items,l);if(E)if(h.push(E),!0===g.skipFirstMutation&&E===l[0])T.items=c(t.items,!0,s(m),i(p));else{var S=f.find((function(e){var t=e[0];return E===t}))[1];T.items=S}else T.items=e(t.items,c,u,d+1,l,p,a(a([],m,!0),["items"],!1),f,h)}if(t.additionalItems!==undefined&&(T.additionalItems=y(t.additionalItems,a(a([],m,!0),["additionalItems"],!1))),t.properties!==undefined){var v=t.properties,_={};Object.keys(t.properties).forEach((function(e){_[e]=y(v[e],a(a([],m,!0),["properties",e.toString()],!1))})),T.properties=_}if(t.patternProperties!==undefined){var A=t.patternProperties,I={};Object.keys(t.patternProperties).forEach((function(e){I[e]=y(A[e],a(a([],m,!0),["patternProperties",e.toString()],!1))})),T.patternProperties=I}t.additionalProperties!==undefined&&!0==!!t.additionalProperties&&(T.additionalProperties=y(t.additionalProperties,a(a([],m,!0),["additionalProperties"],!1)))}if(!0===g.skipFirstMutation&&0===d)return T;if(!0===g.bfs)return p.pop(),T;var w=-1!==h.indexOf(t);return p.pop(),c(T,w,s(m),i(p))}}}},{package:"@open-rpc/schema-utils-js>@json-schema-tools/dereferencer>@json-schema-tools/traverse",file:"node_modules/@json-schema-tools/traverse/build/index.js"}],[669,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(e,t,n){var r=Math.floor(n()*e.prob.length);return t[n()<e.prob[r]?r:e.alias[r]]};n.default=function(e,t,n){if(void 0===n&&(n=Math.random),!Array.isArray(e))throw new Error("Probabilities must be an array.");if(0===e.length)throw new Error("Probabilities array must not be empty.");var a=e.length,s=null!=t?t:Array.from({length:a},(function(e,t){return t})),o=function(e,t){var n=e.reduce((function(t,n){if(n<0)throw new Error("Probability must be a positive: p["+e.indexOf(n)+"]="+n);return t+n}),0);if(0===n)throw new Error("Probability sum must be greater than zero.");for(var r=e.map((function(e){return e*t/n})),a={prob:new Array(t),alias:new Array(t)},s=[],o=[],i=t-1;i>=0;i--)r[i]<1?s.push(i):o.push(i);for(;s.length>0&&o.length>0;){var c=s.pop(),u=o.pop();a.prob[c]=r[c],a.alias[c]=u,r[u]=r[u]+r[c]-1,r[u]<1?s.push(u):o.push(u)}for(;o.length>0;)a.prob[o.pop()]=1;for(;s.length>0;)a.prob[s.pop()]=1;return a}(e,a);return{next:function(e){return void 0===e&&(e=1),function(e,t,n,a){if(void 0===a&&(a=1),1===a)return r(e,t,n);for(var s=[],o=0;o<a;o++)s.push(r(e,t,n));return s}(o,s,n,e)}}}}}},{package:"@ngraveio/bc-ur>@keystonehq/alias-sampling",file:"node_modules/@keystonehq/alias-sampling/dist/cjs/index.js"}],[673,{"@ethereumjs/util":521,"@keystonehq/bc-ur-registry":695,buffer:4291,hdkey:4903,uuid:5901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),s=e("uuid"),o=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,i=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class m extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=Number(this.chainId)),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,o,i,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),p=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(o,"hex"));return new m({requestId:i?t.from(s.parse(i)):undefined,signData:e,dataType:n,derivationPath:p,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:d||undefined})}}m.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],s=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),o=t[l.chainId]?t[l.chainId]:undefined,i=t[l.address]?t[l.address]:undefined,c=t[l.requestId]?t[l.requestId].getData():undefined,u=t[l.origin]?t[l.origin]:undefined;return new m({requestId:c,signData:n,dataType:r,chainId:o,derivationPath:s,address:i,origin:u})},m.fromCBOR=e=>{const t=u(e);return m.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:h}=a.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(g||(g={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new a.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[g.origin]=this.origin),e[g.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[g.signature],r=t[g.requestId]?t[g.requestId].getData():undefined;return new T(n,r,t[g.origin])},T.fromCBOR=e=>{const t=h(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var E;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(E||(E={}));class S extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[E.chainId]=this.chainId,e[E.name]=this.name,e[E.contractAddress]=this.contractAddress,e[E.contractName]=this.contractName,e[E.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new S({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}S.fromDataItem=e=>{const t=e.getData(),n=t[E.chainId],r=t[E.name],a=t[E.mediaData],s=t[E.contractAddress],o=t[E.contractName];return new S({chainId:n,name:r,contractAddress:s,contractName:o,mediaData:a})},S.fromCBOR=e=>{const t=y(e);return S.fromDataItem(t)};const v=(e,t)=>{const n=o.fromExtendedKey(e).derive(t),r="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=S,n.ETHSignature=T,n.EthSignRequest=m,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=v(t,`M/0/${a}`);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[674,{"@ethereumjs/util":521,"@keystonehq/bc-ur-registry":695,buffer:4291,hdkey:4903,uuid:5901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),s=e("uuid"),o=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,i=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,p;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(p=n.DataType||(n.DataType={}))[p.transaction=1]="transaction",p[p.typedData=2]="typedData",p[p.personalMessage=3]="personalMessage",p[p.typedTransaction=4]="typedTransaction";class m extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=Number(this.chainId)),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,o,i,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),p=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(o,"hex"));return new m({requestId:i?t.from(s.parse(i)):void 0,signData:e,dataType:n,derivationPath:p,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:d||void 0})}}m.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],s=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),o=t[l.chainId]?t[l.chainId]:void 0,i=t[l.address]?t[l.address]:void 0,c=t[l.requestId]?t[l.requestId].getData():void 0;return new m({requestId:c,signData:n,dataType:r,chainId:o,derivationPath:s,address:i,origin:t[l.origin]?t[l.origin]:void 0})},m.fromCBOR=e=>{const t=u(e);return m.fromDataItem(t)};const{RegistryTypes:f,decodeToDataItem:h}=a.extend;var g;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(g||(g={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[g.requestId]=new a.DataItem(this.requestId,f.UUID.getTag())),this.origin&&(e[g.origin]=this.origin),e[g.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[g.signature],r=t[g.requestId]?t[g.requestId].getData():void 0;return new T(n,r,t[g.origin])},T.fromCBOR=e=>{const t=h(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var E;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(E||(E={}));class S extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[E.chainId]=this.chainId,e[E.name]=this.name,e[E.contractAddress]=this.contractAddress,e[E.contractName]=this.contractName,e[E.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new S({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}S.fromDataItem=e=>{const t=e.getData();return new S({chainId:t[E.chainId],name:t[E.name],contractAddress:t[E.contractAddress],contractName:t[E.contractName],mediaData:t[E.mediaData]})},S.fromCBOR=e=>{const t=y(e);return S.fromDataItem(t)};const v=(e,t)=>{const n=o.fromExtendedKey(e).derive(t),r="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=S,n.ETHSignature=T,n.EthSignRequest=m,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=v(t,"M/0/"+a);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=v}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[675,{"./bc-ur-registry-eth.cjs.development.js":673,"./bc-ur-registry-eth.cjs.production.min.js":674},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[676,{"./RegistryItem":687,"./RegistryType":688,"./lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Bytes=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class o extends a.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>s.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}}n.Bytes=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[677,{".":695,"./RegistryItem":687,"./RegistryType":688,"./lib":698,buffer:4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoAccount=void 0;const r=e("."),a=e("./lib"),s=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[i.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new a.DataItem(e)}}}n.CryptoAccount=c,c.fromDataItem=e=>{const n=e.getData(),a=t.alloc(4),s=n[i.masterFingerprint];s&&a.writeUInt32BE(s,0);const o=n[i.outputDescriptors].map((e=>r.CryptoOutput.fromDataItem(e)));return new c(a,o)},c.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[678,{"./RegistryItem":687,"./RegistryType":688,"./lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoCoinInfo=n.Network=n.Type=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var o,i,c;!function(e){e.type="1",e.network="2"}(o||(o={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=n.Type||(n.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=n.Network||(n.Network={}));class u extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[o.type]=this.type),this.network&&(e[o.network]=this.network),new r.DataItem(e)}}}n.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),n=t[o.type],r=t[o.network];return new u(n,r)},u.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[679,{"./RegistryItem":687,"./RegistryType":688,"./lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoECKey=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");var o;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(o||(o={}));class i extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[o.curve]=this.curve),this.privateKey!==undefined&&(e[o.private]=this.privateKey),e[o.data]=this.data,new r.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}n.CryptoECKey=i,i.fromDataItem=e=>{const t=e.getData(),n=t[o.curve],r=t[o.private],a=t[o.data];if(!a)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new i({data:a,curve:n,privateKey:r})},i.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[680,{"./CryptoCoinInfo":678,"./CryptoKeypath":681,"./RegistryItem":687,"./RegistryType":688,"./lib":698,bs58check:4295,buffer:4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoHDKey=void 0;const r=e("bs58check"),a=e("./CryptoCoinInfo"),s=e("./CryptoKeypath"),o=e("./lib"),i=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class d extends i.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,n,a;let s,o,i=0,c=t.alloc(4).fill(0);if(this.isMaster())s=t.from("0488ADE4","hex"),o=0,i=0;else{o=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(n=this.getOrigin())||void 0===n?void 0:n.getDepth());const r=null===(a=this.getOrigin())||void 0===a?void 0:a.getComponents(),u=r[r.length-1];u&&(i=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),s=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(o,0);const d=t.alloc(4);d.writeUInt32BE(i,0);const l=this.getChainCode(),p=this.getKey();return(0,r.encode)(t.concat([s,u,c,d,l,p]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,n,r,a,s,o;let i="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(i+=`${null===(r=null===(n=this.getOrigin())||void 0===n?void 0:n.getSourceFingerprint())||void 0===r?void 0:r.toString("hex")}/${null===(a=this.getOrigin())||void 0===a?void 0:a.getPath()}`),i+=this.getBip32Key(),this.getChildren()&&(null===(s=this.getChildren())||void 0===s?void 0:s.getPath())&&(i+=`/${null===(o=this.getChildren())||void 0===o?void 0:o.getPath()}`),i},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new o.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}n.CryptoHDKey=d,d.fromDataItem=e=>{const n=e.getData(),r=!!n[u.is_master],o=n[u.is_private],i=n[u.key_data],c=n[u.chain_code],l=n[u.use_info]?a.CryptoCoinInfo.fromDataItem(n[u.use_info]):undefined,p=n[u.origin]?s.CryptoKeypath.fromDataItem(n[u.origin]):undefined,m=n[u.children]?s.CryptoKeypath.fromDataItem(n[u.children]):undefined,f=n[u.parent_fingerprint];let h=undefined;f&&(h=t.alloc(4),h.writeUInt32BE(f,0));const g=n[u.name],T=n[u.note];return new d({isMaster:r,isPrivateKey:o,key:i,chainCode:c,useInfo:l,origin:p,children:m,parentFingerprint:h,name:g,note:T})},d.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return d.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[681,{"./PathComponent":686,"./RegistryItem":687,"./RegistryType":688,"./lib":698,buffer:4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoKeypath=void 0;const r=e("./lib"),a=e("./PathComponent"),s=e("./RegistryItem"),o=e("./RegistryType");var i;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(i||(i={}));class c extends s.RegistryItem{constructor(e=[],t,n){super(),this.components=e,this.sourceFingerprint=t,this.depth=n,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[i.components]=t,this.sourceFingerprint&&(e[i.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[i.depth]=this.depth),new r.DataItem(e)}}}n.CryptoKeypath=c,c.fromDataItem=e=>{const n=e.getData(),r=[],s=n[i.components];if(s)for(let e=0;e<s.length;e+=2){const t=s[e+1],n=s[e];"number"==typeof n?r.push(new a.PathComponent({index:n,hardened:t})):r.push(new a.PathComponent({hardened:t}))}const o=n[i.source_fingerprint];let u;o&&(u=t.alloc(4),u.writeUInt32BE(o,0));const d=n[i.depth];return new c(r,u,d)},c.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[682,{"./CryptoECKey":679,"./CryptoHDKey":680,"./MultiKey":685,"./RegistryItem":687,"./RegistryType":688,"./ScriptExpression":689,"./lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoOutput=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib"),o=e("./MultiKey"),i=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class d extends i.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof a.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof r.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof o.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof a.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const n=t.getTag();e.getTag()===undefined?e.setTag(n):e=new s.DataItem(e,n)})),e}}}n.CryptoOutput=d,d.fromDataItem=e=>{const t=[];let n=e;for(;;){let e=n.getTag();const r=u.ScriptExpression.fromTag(e);if(!r)break;if(t.push(r),!(n.getData()instanceof s.DataItem))break;n=n.getData(),e=n.getTag()}const i=t.length;if(i>0&&(t[i-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[i-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=o.MultiKey.fromDataItem(n);return new d(t,e)}if(n.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=a.CryptoHDKey.fromDataItem(n);return new d(t,e)}{const e=r.CryptoECKey.fromDataItem(n);return new d(t,e)}},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[683,{"./RegistryItem":687,"./RegistryType":688,"./lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoPSBT=void 0;const r=e("./lib"),a=e("./RegistryItem"),s=e("./RegistryType");class o extends a.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}}n.CryptoPSBT=o,o.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new o(t)},o.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[684,{"..":695,"../RegistryType":688,"../errors":690,"@ngraveio/bc-ur":3452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.URRegistryDecoder=void 0;const r=e("@ngraveio/bc-ur"),a=e(".."),s=e("../RegistryType"),o=e("../errors");class i extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case s.RegistryTypes.BYTES.getType():return a.Bytes.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_HDKEY.getType():return a.CryptoHDKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_KEYPATH.getType():return a.CryptoKeypath.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_COIN_INFO.getType():return a.CryptoCoinInfo.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ECKEY.getType():return a.CryptoECKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_OUTPUT.getType():return a.CryptoOutput.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_PSBT.getType():return a.CryptoPSBT.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ACCOUNT.getType():return a.CryptoAccount.fromCBOR(e.cbor);default:throw new o.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}n.URRegistryDecoder=i}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[685,{"./CryptoECKey":679,"./CryptoHDKey":680,"./RegistryItem":687,"./RegistryType":688,"./lib/DataItem":696},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultiKey=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),s=e("./lib/DataItem"),o=e("./RegistryItem"),i=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends o.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}n.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),n=t[c.threshold],s=t[c.keys],o=[];return s.forEach((e=>{e.getTag()===i.RegistryTypes.CRYPTO_HDKEY.getTag()?o.push(a.CryptoHDKey.fromDataItem(e)):e.getTag()===i.RegistryTypes.CRYPTO_ECKEY.getTag()&&o.push(r.CryptoECKey.fromDataItem(e))})),new u(n,o)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[686,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&r.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}n.PathComponent=r,r.HARDENED_BIT=2147483648}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[6860,{blo:4242,"prop-types":5256,react:5502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("prop-types")),s=e("blo");function o(e){return e&&e.__esModule?e:{default:e}}const i=({address:e,diameter:t,alt:n="",borderRadius:a})=>r.default.createElement("img",{src:(0,s.blo)(e),height:t,width:t,style:{borderRadius:a},alt:n});i.propTypes={address:a.default.string.isRequired,diameter:a.default.number.isRequired,alt:a.default.string,borderRadius:a.default.string};n.default=i}}},{package:"$root$",file:"ui/components/ui/identicon/blockieIdenticon/blockieIdenticon.component.js"}],[6869,{"../../../../shared/lib/multichain":5997,"../../../helpers/utils/icon-factory":7012,"@metamask/jazzicon":1994,"@metamask/utils":3434,react:5502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=d(e("react")),s=(r=e("@metamask/jazzicon"))&&r.__esModule?r:{default:r},o=e("@metamask/utils"),i=d(e("../../../helpers/utils/icon-factory")),c=e("../../../../shared/lib/multichain");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}const l=(0,i.default)(s.default),p=new i.IconFactory(s.default,(function(e){return Array.from((0,o.stringToBytes)(e.normalize("NFKC").toLowerCase()))}));n.default=function({address:e,className:t,diameter:n=46,style:r,tokenList:s={},namespace:i}){const u=(0,a.useRef)(null);return(0,a.useEffect)((()=>{if(!u.current)return;const t=((i??(0,c.getCaipNamespaceFromAddress)(e))===o.KnownCaipNamespace.Eip155?l:p).iconForAddress(e,n,s[null==e?void 0:e.toLowerCase()]);return u.current.appendChild(t),()=>{for(;null!==(e=u.current)&&void 0!==e&&e.firstChild;){var e;u.current.firstChild.remove()}}}),[e,n,s]),a.default.createElement("div",{ref:u,className:t,style:r})}}}},{package:"$root$",file:"ui/components/ui/jazzicon/jazzicon.component.tsx"}],[687,{"./lib":698,"@ngraveio/bc-ur":3452},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryItem=void 0;const r=e("@ngraveio/bc-ur"),a=e("./lib");n.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,a.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,n)=>{const a=this.toUR();return new r.UREncoder(a,e,t,n)}}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[688,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryTypes=n.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}n.RegistryType=r,n.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",undefined),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new r("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new r("qr-hardware-call",1201),KEY_DERIVATION_CALL:new r("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new r("key-derivation-schema",1302)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[689,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScriptExpressions=n.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}n.ScriptExpression=r,r.fromTag=e=>Object.values(n.ScriptExpressions).find((t=>t.getTag()===e)),n.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[690,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}n.UnknownURTypeError=r}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[691,{"../CryptoHDKey":680,"../RegistryItem":687,"../RegistryType":688,"../lib":698,buffer:4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoMultiAccounts=void 0;const r=e("../RegistryType"),a=e("../CryptoHDKey"),s=e("../RegistryItem"),o=e("../lib");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(i||(i={}));class c extends s.RegistryItem{constructor(e,t,n,a,s){super(),this.masterFingerprint=e,this.keys=t,this.device=n,this.deviceId=a,this.version=s,this.getRegistryType=()=>r.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[i.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[i.device]=this.device),this.deviceId&&(e[i.deviceId]=this.deviceId),this.version&&(e[i.version]=this.version),new o.DataItem(e)}}}n.CryptoMultiAccounts=c,c.fromDataItem=e=>{const n=e.getData(),r=t.alloc(4),s=n[i.masterFingerprint];s&&r.writeUInt32BE(s,0);const o=n[i.keys].map((e=>a.CryptoHDKey.fromDataItem(e))),u=n[i.device],d=n[i.deviceId],l=n[i.version];return new c(r,o,u,d,l)},c.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[692,{"../CryptoKeypath":681,"../RegistryItem":687,"../RegistryType":688,"../lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivationSchema=n.DerivationAlgorithm=n.Curve=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("../CryptoKeypath");var i,c,u;!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(i||(i={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(c=n.Curve||(n.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(u=n.DerivationAlgorithm||(n.DerivationAlgorithm={}));class d extends a.RegistryItem{constructor(e,t=c.secp256k1,n=u.slip10){super(),this.keypath=e,this.curve=t,this.algo=n,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[i.keyPath]=t,e[i.curve]=this.curve,e[i.algo]=this.algo,new s.DataItem(e)}}}n.KeyDerivationSchema=d,d.fromDataItem=e=>{const t=e.getData(),n=o.CryptoKeypath.fromDataItem(t[i.keyPath]),r=t[i.curve],a=t[i.algo];return new d(n,r,a)},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/DerivationSchema.js"}],[693,{"../RegistryItem":687,"../RegistryType":688,"../lib":698,"./DerivationSchema":692},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.KeyDerivation=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("./DerivationSchema");var i;!function(e){e[e.schemas=1]="schemas"}(i||(i={}));class c extends a.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>r.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const e={};return e[i.schemas]=this.schemas.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),new s.DataItem(e)}}}n.KeyDerivation=c,c.fromDataItem=e=>{const t=e.getData()[i.schemas].map((e=>o.KeyDerivationSchema.fromDataItem(e)));return new c(t)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/KeyDerivation.js"}],[6939,{"../ducks/locale/locale":6966,"../helpers/utils/i18n-helper":7011,"prop-types":5256,react:5502,"react-redux":5460},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LegacyI18nProvider=n.I18nProvider=n.I18nContext=void 0;var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("react")),s=(r=e("prop-types"))&&r.__esModule?r:{default:r},o=e("react-redux"),i=e("../ducks/locale/locale"),c=e("../helpers/utils/i18n-helper");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const l=n.I18nContext=(0,a.createContext)((e=>`[${e}]`)),p=e=>{const t=(0,o.useSelector)(i.getCurrentLocale),n=(0,o.useSelector)(i.getCurrentLocaleMessages),r=(0,o.useSelector)(i.getEnLocaleMessages),s=(0,a.useMemo)((()=>(e,...a)=>(0,c.getMessage)(t,n,e,...a)||(0,c.getMessage)(t,r,e,...a)),[t,n,r]);return a.default.createElement(l.Provider,{value:s},e.children)};n.I18nProvider=p,p.propTypes={children:s.default.node},p.defaultProps={children:undefined};class m extends a.Component{getChildContext(){return{t:this.context}}render(){return this.props.children}}n.LegacyI18nProvider=m,d(m,"propTypes",{children:s.default.node}),d(m,"defaultProps",{children:undefined}),d(m,"contextType",l),d(m,"childContextTypes",{t:s.default.func})}}},{package:"$root$",file:"ui/contexts/i18n.js"}],[694,{"../RegistryItem":687,"../RegistryType":688,"../lib":698,"./KeyDerivation":693},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.QRHardwareCall=n.QRHardwareCallType=void 0;const r=e("../RegistryType"),a=e("../RegistryItem"),s=e("../lib"),o=e("./KeyDerivation");var i,c;!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(i||(i={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(c=n.QRHardwareCallType||(n.QRHardwareCallType={}));class u extends a.RegistryItem{constructor(e,t,n){super(),this.type=e,this.params=t,this.origin=n,this.getRegistryType=()=>r.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};e[i.type]=this.type;const t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[i.params]=t,this.origin&&(e[i.origin]=this.origin),new s.DataItem(e)}}}n.QRHardwareCall=u,u.fromDataItem=e=>{const t=e.getData(),n=t[i.type]||c.KeyDerivation;let r;if(n===c.KeyDerivation)r=o.KeyDerivation.fromDataItem(t[i.params]);const a=t[i.origin];return new u(n,r,a)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/extended/QRHardwareCall.js"}],[6948,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ALERT_STATE=void 0;n.ALERT_STATE={CLOSED:"CLOSED",ERROR:"ERROR",LOADING:"LOADING",OPEN:"OPEN"}}}},{package:"$root$",file:"ui/ducks/alerts/enums.js"}],[695,{"./Bytes":676,"./CryptoAccount":677,"./CryptoCoinInfo":678,"./CryptoECKey":679,"./CryptoHDKey":680,"./CryptoKeypath":681,"./CryptoOutput":682,"./CryptoPSBT":683,"./Decoder":684,"./MultiKey":685,"./PathComponent":686,"./RegistryItem":687,"./RegistryType":688,"./ScriptExpression":689,"./errors":690,"./extended/CryptoMultiAccounts":691,"./extended/DerivationSchema":692,"./extended/KeyDerivation":693,"./extended/QRHardwareCall":694,"./lib":698,"./patchCBOR":699,"./types":700,"./utils":701,"buffer/":4298,tslib:5855},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoMultiAccounts=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const r=e("tslib");e("./patchCBOR");const a=e("buffer/");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return a.Buffer}});const s=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return s.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const i=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return i.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return i.Network}});const c=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const d=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return d.CryptoOutput}});const l=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return l.CryptoPSBT}});const p=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return p.CryptoAccount}});const m=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return m.URRegistryDecoder}});const f=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return f.MultiKey}});const h=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return h.ScriptExpressions}});const g=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const T=e("./RegistryItem"),y=e("./RegistryType"),E=e("./lib");var S=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return S.DataItem}});const v=e("./utils"),_=e("./extended/CryptoMultiAccounts");Object.defineProperty(n,"CryptoMultiAccounts",{enumerable:!0,get:function(){return _.CryptoMultiAccounts}});const A={URRegistryDecoder:m.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:p.CryptoAccount,CryptoHDKey:s.CryptoHDKey,CryptoMultiAccounts:_.CryptoMultiAccounts,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:i.CryptoCoinInfo,CryptoCoinInfoType:i.Type,CryptoCoinInfoNetwork:i.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:d.CryptoOutput,CryptoPSBT:l.CryptoPSBT,MultiKey:f.MultiKey,ScriptExpressions:h.ScriptExpressions,PathComponent:g.PathComponent},I={addReader:E.addReader,addSemanticDecode:E.addSemanticDecode,addSemanticEncode:E.addSemanticEncode,addWriter:E.addWriter,patchTags:v.patchTags},w={RegistryTypes:y.RegistryTypes,RegistryItem:T.RegistryItem,RegistryType:y.RegistryType,decodeToDataItem:E.decodeToDataItem,encodeDataItem:E.encodeDataItem,cbor:I};n.extend=w,(0,r.__exportStar)(e("./errors"),n),(0,r.__exportStar)(e("./Decoder"),n),(0,r.__exportStar)(e("./lib"),n),(0,r.__exportStar)(e("./CryptoAccount"),n),(0,r.__exportStar)(e("./CryptoPSBT"),n),(0,r.__exportStar)(e("./CryptoHDKey"),n),(0,r.__exportStar)(e("./extended/CryptoMultiAccounts"),n),(0,r.__exportStar)(e("./extended/QRHardwareCall"),n),(0,r.__exportStar)(e("./extended/KeyDerivation"),n),(0,r.__exportStar)(e("./extended/DerivationSchema"),n),(0,r.__exportStar)(e("./CryptoOutput"),n),(0,r.__exportStar)(e("./CryptoCoinInfo"),n),(0,r.__exportStar)(e("./CryptoECKey"),n),(0,r.__exportStar)(e("./MultiKey"),n),(0,r.__exportStar)(e("./CryptoKeypath"),n),(0,r.__exportStar)(e("./patchCBOR"),n),(0,r.__exportStar)(e("./PathComponent"),n),(0,r.__exportStar)(e("./RegistryItem"),n),(0,r.__exportStar)(e("./RegistryType"),n),(0,r.__exportStar)(e("./types"),n),(0,r.__exportStar)(e("./utils"),n),n.default=A}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[6951,{"../../../shared/constants/alerts":5955,"../../selectors":7653,"../../store/actionConstants":7666,"../../store/actions":7667,"./enums":6948,"@reduxjs/toolkit":3507,"@sentry/browser":3562},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.switchedToUnconnectedAccount=n.switchToAccount=n.getAlertState=n.dismissAndDisableAlert=n.dismissAlert=n.default=n.connectAccount=n.alertIsOpen=void 0;var r=e("@reduxjs/toolkit"),a=e("@sentry/browser"),s=e("../../../shared/constants/alerts"),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("../../store/actionConstants")),i=e("../../store/actions"),c=e("../../selectors"),u=e("./enums");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}const l=s.AlertTypes.unconnectedAccount,p={state:u.ALERT_STATE.CLOSED},m=(0,r.createSlice)({name:l,initialState:p,reducers:{connectAccountFailed:e=>{e.state=u.ALERT_STATE.ERROR},connectAccountRequested:e=>{e.state=u.ALERT_STATE.LOADING},connectAccountSucceeded:e=>{e.state=u.ALERT_STATE.CLOSED},disableAlertFailed:e=>{e.state=u.ALERT_STATE.ERROR},disableAlertRequested:e=>{e.state=u.ALERT_STATE.LOADING},disableAlertSucceeded:e=>{e.state=u.ALERT_STATE.CLOSED},dismissAlert:e=>{e.state=u.ALERT_STATE.CLOSED},switchAccountFailed:e=>{e.state=u.ALERT_STATE.ERROR},switchAccountRequested:e=>{e.state=u.ALERT_STATE.LOADING},switchAccountSucceeded:e=>{e.state=u.ALERT_STATE.CLOSED},switchedToUnconnectedAccount:e=>{e.state=u.ALERT_STATE.OPEN}},extraReducers:{[o.SELECTED_ADDRESS_CHANGED]:e=>{e.state===u.ALERT_STATE.OPEN&&(e.state=u.ALERT_STATE.CLOSED)}}}),{actions:f,reducer:h}=m;n.default=h;n.getAlertState=e=>e[l].state;n.alertIsOpen=e=>e[l].state!==u.ALERT_STATE.CLOSED;const{connectAccountFailed:g,connectAccountRequested:T,connectAccountSucceeded:y,disableAlertFailed:E,disableAlertRequested:S,disableAlertSucceeded:v,dismissAlert:_,switchAccountFailed:A,switchAccountRequested:I,switchAccountSucceeded:w,switchedToUnconnectedAccount:R}=f;n.switchedToUnconnectedAccount=R,n.dismissAlert=_;n.dismissAndDisableAlert=()=>async e=>{try{await e(S()),await(0,i.setAlertEnabledness)(l,!1),await e(v())}catch(t){console.error(t),(0,a.captureException)(t),await e(E())}};n.switchToAccount=e=>async(t,n)=>{const r=n();try{await t(I()),await t((0,i.setSelectedInternalAccount)(e));const n=(0,c.getInternalAccount)(r,e);await t((0,i.setSelectedAccount)(n.address)),await t(w())}catch(e){console.error(e),(0,a.captureException)(e),await t(A())}};n.connectAccount=()=>async(e,t)=>{const n=t(),{address:r}=(0,c.getSelectedInternalAccount)(n),s=(0,c.getOriginOfCurrentTab)(n);try{await e(T()),await e((0,i.addPermittedAccount)(s,r)),await e(y())}catch(t){console.error(t),(0,a.captureException)(t),await e(g())}}}}},{package:"$root$",file:"ui/ducks/alerts/unconnected-account.js"}],[6952,{"../../../shared/constants/hardware-wallets":5964,"../../store/actionConstants":7666},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n,r;const s={...o,...e};switch(t.type){case a.UPDATE_CUSTOM_NONCE:return{...s,customNonceValue:t.value};case a.TOGGLE_ACCOUNT_MENU:return{...s,isAccountMenuOpen:!s.isAccountMenuOpen};case a.SET_NEXT_NONCE:return{...s,nextNonce:t.payload};case a.SET_PENDING_TOKENS:return{...s,pendingTokens:{...t.payload}};case a.CLEAR_PENDING_TOKENS:return{...s,pendingTokens:{}};case a.CLOSE_WELCOME_SCREEN:return{...s,welcomeScreenSeen:!0};case a.SET_CONFIRMATION_EXCHANGE_RATES:return{...s,confirmationExchangeRates:t.value};case a.RESET_ONBOARDING:return{...s,welcomeScreenSeen:!1};case a.NETWORK_DROPDOWN_OPEN:return{...s,networkDropdownOpen:!0};case a.NETWORK_DROPDOWN_CLOSE:return{...s,networkDropdownOpen:!1};case a.IMPORT_NFTS_MODAL_OPEN:return{...s,importNftsModal:{open:!0,...t.payload}};case a.IMPORT_NFTS_MODAL_CLOSE:return{...s,importNftsModal:{open:!1}};case a.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN:return{...s,showBasicFunctionalityModal:!0};case a.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE:return{...s,showBasicFunctionalityModal:!1};case a.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON:return{...s,externalServicesOnboardingToggleState:!0};case a.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF:return{...s,externalServicesOnboardingToggleState:!1};case a.SHOW_IPFS_MODAL_OPEN:return{...s,showIpfsModalOpen:!0};case a.SHOW_IPFS_MODAL_CLOSE:return{...s,showIpfsModalOpen:!1};case a.SHOW_PERMITTED_NETWORK_TOAST_OPEN:return{...s,showPermittedNetworkToastOpen:!0};case a.SHOW_PERMITTED_NETWORK_TOAST_CLOSE:return{...s,showPermittedNetworkToastOpen:!1};case a.IMPORT_TOKENS_POPOVER_OPEN:return{...s,importTokensModalOpen:!0};case a.IMPORT_TOKENS_POPOVER_CLOSE:return{...s,importTokensModalOpen:!1};case a.DEPRECATED_NETWORK_POPOVER_OPEN:return{...s,deprecatedNetworkModalOpen:!0};case a.DEPRECATED_NETWORK_POPOVER_CLOSE:return{...s,deprecatedNetworkModalOpen:!1};case a.ALERT_OPEN:return{...s,alertOpen:!0,alertMessage:t.payload};case a.ALERT_CLOSE:return{...s,alertOpen:!1,alertMessage:null};case a.SET_ACCOUNT_DETAILS_ADDRESS:return{...s,accountDetailsAddress:t.payload};case a.QR_CODE_DETECTED:return{...s,qrCodeData:t.value};case a.SET_SMART_TRANSACTIONS_ERROR:return{...s,smartTransactionsError:t.payload};case a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE:return{...s,smartTransactionsErrorMessageDismissed:!0};case a.MODAL_OPEN:{const{name:e,...n}=t.payload;return{...s,modal:{open:!0,modalState:{name:e,props:{...n}},previousModalState:{...s.modal.modalState}}}}case a.MODAL_CLOSE:return{...s,modal:{...s.modal,open:!1,modalState:{name:null,props:{}},previousModalState:{...s.modal.modalState}}};case a.CLEAR_ACCOUNT_DETAILS:return{...s,accountDetail:{privateKey:""}};case a.SHOW_SEND_TOKEN_PAGE:case a.LOCK_METAMASK:return{...s,warning:null};case a.GO_HOME:return{...s,accountDetail:{privateKey:""},warning:null};case a.SHOW_ACCOUNTS_PAGE:return{...s,isLoading:!1,warning:null,scrollToBottom:!1};case a.SHOW_CONF_TX_PAGE:return{...s,txId:t.id,warning:null,isLoading:!1};case a.COMPLETED_TX:return{...s,warning:null,txId:null};case a.UNLOCK_FAILED:return{...s,warning:t.value||"Incorrect password. Try again."};case a.UNLOCK_SUCCEEDED:return{...s,warning:""};case a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH:{const{device:e,path:n}=t.payload,r={...s.defaultHdPaths};return r[e]=n,{...s,defaultHdPaths:r}}case a.SHOW_LOADING:return{...s,isLoading:!0,loadingMessage:t.payload};case a.HIDE_LOADING:return{...s,isLoading:!1};case a.SHOW_NFT_STILL_FETCHING_INDICATION:return{...s,isNftStillFetchingIndication:!0};case a.SHOW_NFT_DETECTION_ENABLEMENT_TOAST:return{...s,showNftDetectionEnablementToast:t.payload};case a.HIDE_NFT_STILL_FETCHING_INDICATION:return{...s,isNftStillFetchingIndication:!1};case a.DISPLAY_WARNING:return{...s,warning:t.payload,isLoading:!1};case a.HIDE_WARNING:return{...s,warning:undefined};case a.SHOW_PRIVATE_KEY:return{...s,accountDetail:{privateKey:t.payload}};case a.SET_SELECTED_NETWORK_CONFIGURATION_ID:return{...s,selectedNetworkConfigurationId:t.payload};case a.SET_NEW_NETWORK_ADDED:{const{networkConfigurationId:e,nickname:n}=t.payload;return{...s,newNetworkAddedName:n,newNetworkAddedConfigurationId:e}}case a.SET_EDIT_NETWORK:return{...s,editedNetwork:t.payload};case a.SET_NEW_TOKENS_IMPORTED:return{...s,newTokensImported:t.payload};case a.SET_NEW_TOKENS_IMPORTED_ERROR:return{...s,newTokensImportedError:t.payload};case a.SET_NEW_NFT_ADDED_MESSAGE:return{...s,newNftAddedMessage:t.payload};case a.SET_REMOVE_NFT_MESSAGE:return{...s,removeNftMessage:t.payload};case a.SET_REQUEST_ACCOUNT_TABS:return{...s,requestAccountTabs:t.value};case a.SET_OPEN_METAMASK_TAB_IDS:return{...s,openMetaMaskTabs:t.payload};case a.HIDE_WHATS_NEW_POPUP:return{...s,showWhatsNewPopup:!1};case a.CAPTURE_SINGLE_EXCEPTION:return{...s,singleExceptions:{...s.singleExceptions,[t.value]:null}};case a.TOGGLE_GAS_LOADING_ANIMATION:return{...s,gasLoadingAnimationIsShowing:t.payload};case a.SET_WEBHID_CONNECTED_STATUS:return{...s,ledgerWebHidConnectedStatus:t.payload};case a.SET_LEDGER_TRANSPORT_STATUS:return{...s,ledgerTransportStatus:t.payload};case a.TOGGLE_CURRENCY_INPUT_SWITCH:return{...s,sendInputCurrencySwitched:!s.sendInputCurrencySwitched};case a.ONBOARDED_IN_THIS_UI_SESSION:return{...s,onboardedInThisUISession:t.payload};case a.SET_CUSTOM_TOKEN_AMOUNT:return{...s,customTokenAmount:t.payload};case a.TOGGLE_NETWORK_MENU:return{...s,isAddingNewNetwork:Boolean(null===(n=t.payload)||void 0===n?void 0:n.isAddingNewNetwork),isMultiRpcOnboarding:Boolean(null===(r=t.payload)||void 0===r?void 0:r.isMultiRpcOnboarding),isNetworkMenuOpen:!s.isNetworkMenuOpen};case a.DELETE_METAMETRICS_DATA_MODAL_OPEN:return{...s,showDeleteMetaMetricsDataModal:!0};case a.DELETE_METAMETRICS_DATA_MODAL_CLOSE:return{...s,showDeleteMetaMetricsDataModal:!1};case a.DATA_DELETION_ERROR_MODAL_OPEN:return{...s,showDataDeletionErrorModal:!0};case a.DATA_DELETION_ERROR_MODAL_CLOSE:return{...s,showDataDeletionErrorModal:!1};case a.SHOW_SETTINGS_PAGE_ERROR:return{...s,errorInSettings:t.payload};case a.HIDE_SETTINGS_PAGE_ERROR:return{...s,errorInSettings:null};case a.SHOW_KEYRING_SNAP_REMOVAL_RESULT:return{...s,showKeyringRemovalSnapModal:!0,keyringRemovalSnapModal:{...t.payload}};case a.HIDE_KEYRING_SNAP_REMOVAL_RESULT:return{...s,showKeyringRemovalSnapModal:!1,keyringRemovalSnapModal:{snapName:"",result:"none"}};default:return s}},n.displayErrorInSettings=function(e){return{type:a.SHOW_SETTINGS_PAGE_ERROR,payload:e}},n.getGasLoadingAnimationIsShowing=function(e){return e.appState.gasLoadingAnimationIsShowing},n.getLedgerTransportStatus=function(e){return e.appState.ledgerTransportStatus},n.getLedgerWebHidConnectedStatus=function(e){return e.appState.ledgerWebHidConnectedStatus},n.getQrCodeData=function(e){return e.appState.qrCodeData},n.hideBasicFunctionalityModal=function(){return{type:a.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE}},n.hideDataDeletionErrorModal=function(){return{type:a.DATA_DELETION_ERROR_MODAL_CLOSE}},n.hideDeleteMetaMetricsDataModal=function(){return{type:a.DELETE_METAMETRICS_DATA_MODAL_CLOSE}},n.hideErrorInSettings=function(){return{type:a.HIDE_SETTINGS_PAGE_ERROR}},n.hideWhatsNewPopup=function(){return{type:a.HIDE_WHATS_NEW_POPUP}},n.onboardingToggleBasicFunctionalityOff=function(){return{type:a.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF}},n.onboardingToggleBasicFunctionalityOn=function(){return{type:a.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON}},n.openBasicFunctionalityModal=function(){return{type:a.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN}},n.openDataDeletionErrorModal=function(){return{type:a.DATA_DELETION_ERROR_MODAL_OPEN}},n.openDeleteMetaMetricsDataModal=function(){return{type:a.DELETE_METAMETRICS_DATA_MODAL_OPEN}},n.setCustomTokenAmount=function(e){return{type:a.SET_CUSTOM_TOKEN_AMOUNT,payload:e}},n.setLedgerTransportStatus=function(e){return{type:a.SET_LEDGER_TRANSPORT_STATUS,payload:e}},n.setLedgerWebHidConnectedStatus=function(e){return{type:a.SET_WEBHID_CONNECTED_STATUS,payload:e}},n.setOnBoardedInThisUISession=function(e){return{type:a.ONBOARDED_IN_THIS_UI_SESSION,payload:e}},n.toggleCurrencySwitch=function(){return{type:a.TOGGLE_CURRENCY_INPUT_SWITCH}},n.toggleGasLoadingAnimation=function(e){return{type:a.TOGGLE_GAS_LOADING_ANIMATION,payload:e}};var r=e("../../../shared/constants/hardware-wallets"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var i=a?Object.getOwnPropertyDescriptor(e,o):null;i&&(i.get||i.set)?Object.defineProperty(r,o,i):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}(e("../../store/actionConstants"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}const o={customNonceValue:"",isAccountMenuOpen:!1,isNetworkMenuOpen:!1,nextNonce:null,pendingTokens:{},welcomeScreenSeen:!1,confirmationExchangeRates:{},shouldClose:!1,menuOpen:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},alertOpen:!1,alertMessage:null,qrCodeData:null,networkDropdownOpen:!1,importNftsModal:{open:!1},showPermittedNetworkToastOpen:!1,showIpfsModalOpen:!1,showBasicFunctionalityModal:!1,externalServicesOnboardingToggleState:!0,keyringRemovalSnapModal:{snapName:"",result:"none"},showKeyringRemovalSnapModal:!1,importTokensModalOpen:!1,deprecatedNetworkModalOpen:!1,accountDetail:{privateKey:""},isLoading:!1,isNftStillFetchingIndication:!1,showNftDetectionEnablementToast:!1,loadingMessage:null,warning:null,buyView:{},defaultHdPaths:{trezor:"m/44'/60'/0'/0",onekey:"m/44'/60'/0'/0",ledger:"m/44'/60'/0'/0/0",lattice:"m/44'/60'/0'/0"},networksTabSelectedRpcUrl:"",requestAccountTabs:{},openMetaMaskTabs:{},currentWindowTab:{},showWhatsNewPopup:!0,showTermsOfUsePopup:!0,singleExceptions:{testKey:null},gasLoadingAnimationIsShowing:!1,smartTransactionsError:null,smartTransactionsErrorMessageDismissed:!1,ledgerWebHidConnectedStatus:r.WebHIDConnectedStatuses.unknown,ledgerTransportStatus:r.HardwareTransportStates.none,newNftAddedMessage:"",removeNftMessage:"",newNetworkAddedName:"",editedNetwork:undefined,newNetworkAddedConfigurationId:"",selectedNetworkConfigurationId:"",sendInputCurrencySwitched:!1,newTokensImported:"",newTokensImportedError:"",onboardedInThisUISession:!1,customTokenAmount:"",scrollToBottom:!0,txId:null,accountDetailsAddress:"",showDeleteMetaMetricsDataModal:!1,showDataDeletionErrorModal:!1,snapsInstallPrivacyWarningShown:!1,isAddingNewNetwork:!1,isMultiRpcOnboarding:!1,errorInSettings:null}}}},{package:"$root$",file:"ui/ducks/app/app.ts"}],[6958,{"../../../shared/modules/Numeric":6006,"../../../shared/modules/conversion.utils":6015,"../../helpers/utils/util":7028,"../../pages/swaps/swaps.util":7636,"bignumber.js":4195,"ethers/lib/utils":4577},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.tokenPriceInNativeAsset=n.tokenAmountToCurrency=n.isNetworkAdded=n.getTxGasEstimates=n.getTokenExchangeRate=n.getHexMaxGasLimit=n.exchangeRatesFromNativeAndCurrencyRates=n.exchangeRateFromMarketData=void 0;var r=e("bignumber.js"),a=e("ethers/lib/utils"),s=e("../../../shared/modules/conversion.utils"),o=e("../../../shared/modules/Numeric"),i=e("../../pages/swaps/swaps.util"),c=e("../../helpers/utils/util");n.getHexMaxGasLimit=e=>new o.Numeric(new r.BigNumber(e).toString(),10).toPrefixedHexString();n.getTxGasEstimates=async({networkAndAccountSupports1559:e,networkGasFeeEstimates:t,txParams:n,hexChainId:r})=>{if(e){var a;const{estimatedBaseFee:e="0"}=t,o=(0,s.decGWEIToHexWEI)(e);return await(0,i.getTransaction1559GasFeeEstimates)({...n,chainId:r,gasLimit:null===(a=n.gasLimit)||void 0===a?void 0:a.toString()},o,r)}return{baseAndPriorityFeePerGas:undefined,maxFeePerGas:undefined,maxPriorityFeePerGas:undefined}};n.getTokenExchangeRate=async e=>{const{chainId:t,tokenAddress:n,currency:r}=e,s=await(async(e,t,...n)=>{const r=await(0,c.fetchTokenExchangeRates)(t,n,e);return Object.keys(r).reduce(((e,t)=>(e[t.toLowerCase()]=r[t],e)),{})})(t,r,n);return(null==s?void 0:s[n.toLowerCase()])??(null==s?void 0:s[(0,a.getAddress)(n)])};n.exchangeRateFromMarketData=(e,t,n)=>{var r,s,o;return null===(r=(null==n||null===(s=n[e])||void 0===s?void 0:s[t.toLowerCase()])??(null==n||null===(o=n[e])||void 0===o?void 0:o[(0,a.getAddress)(t)]))||void 0===r?void 0:r.price};n.tokenAmountToCurrency=(e,t)=>new o.Numeric(e,10).applyConversionRate(new r.BigNumber(t.toString(),10)).toNumber();n.tokenPriceInNativeAsset=(e,t)=>e&&t?e/t:null;n.exchangeRatesFromNativeAndCurrencyRates=(e,t,n)=>({valueInCurrency:e&&t?e*t:null,usd:e&&n?e*n:null});n.isNetworkAdded=e=>e!==undefined&&"networkClientId"in e.rpcEndpoints[e.defaultRpcEndpointIndex]}}},{package:"$root$",file:"ui/ducks/bridge/utils.ts"}],[696,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[6960,{"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/string-utils":6036,"../../../shared/modules/transaction.utils":6038,"../../helpers/utils/confirm-tx.util":7006,"../../selectors":7653,"../../selectors/custom-gas":7649,"../metamask/metamask":6967},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.clearConfirmTransaction=function(){return{type:f}},n.default=function(e=S,t={}){switch(t.type){case l:return{...e,txData:{...t.payload}};case p:return{...e,tokenData:{...t.payload}};case m:return{...e,tokenProps:{...t.payload}};case h:{const{fiatTransactionAmount:n,ethTransactionAmount:r,hexTransactionAmount:a}=t.payload;return{...e,fiatTransactionAmount:n||e.fiatTransactionAmount,ethTransactionAmount:r||e.ethTransactionAmount,hexTransactionAmount:a||e.hexTransactionAmount}}case g:{const{fiatTransactionFee:n,ethTransactionFee:r,hexTransactionFee:a}=t.payload;return{...e,fiatTransactionFee:n||e.fiatTransactionFee,ethTransactionFee:r||e.ethTransactionFee,hexTransactionFee:a||e.hexTransactionFee}}case T:{const{fiatTransactionTotal:n,ethTransactionTotal:r,hexTransactionTotal:a}=t.payload;return{...e,fiatTransactionTotal:n||e.fiatTransactionTotal,ethTransactionTotal:r||e.ethTransactionTotal,hexTransactionTotal:a||e.hexTransactionTotal}}case y:return{...e,nonce:t.payload};case f:return{...S,maxValueMode:e.maxValueMode};case E:return{...e,maxValueMode:{...e.maxValueMode,[t.payload.transactionId]:t.payload.enabled}};default:return e}},n.setMaxValueMode=function(e,t){return{type:E,payload:{transactionId:e,enabled:t}}},n.setTransactionToConfirm=function(e){return(t,n)=>{const s=n(),i=(0,r.unconfirmedTransactionsHashSelector)(s)[e];if(i)if(i.txParams){t(O(i));const{txParams:e}=i;if(e.data){const{to:n,data:r}=e,o=(0,u.parseStandardTokenTransactionData)(r),i=(0,a.getTokens)(s),d=null==i?void 0:i.find((({address:e})=>(0,c.isEqualCaseInsensitive)(n,e)));t(A({decimals:null==d?void 0:d.decimals,symbol:null==d?void 0:d.symbol})),t(_(o))}if(e.nonce){t(C((0,o.hexToDecimal)(e.nonce)))}}else t(v(i));else console.error(`Transaction with id ${e} not found`)}},n.updateNonce=C,n.updateTokenData=_,n.updateTokenProps=A,n.updateTransactionAmounts=I,n.updateTransactionFees=w,n.updateTransactionTotals=R,n.updateTxData=v,n.updateTxDataAndCalculate=O;var r=e("../../selectors"),a=e("../metamask/metamask"),s=e("../../helpers/utils/confirm-tx.util"),o=e("../../../shared/modules/conversion.utils"),i=e("../../selectors/custom-gas"),c=e("../../../shared/modules/string-utils"),u=e("../../../shared/modules/transaction.utils");const d=e=>`metamask/confirm-transaction/${e}`,l=d("UPDATE_TX_DATA"),p=d("UPDATE_TOKEN_DATA"),m=d("UPDATE_TOKEN_PROPS"),f=d("CLEAR_CONFIRM_TRANSACTION"),h=d("UPDATE_TRANSACTION_AMOUNTS"),g=d("UPDATE_TRANSACTION_FEES"),T=d("UPDATE_TRANSACTION_TOTALS"),y=d("UPDATE_NONCE"),E=d("SET_MAX_VALUE_MODE"),S={txData:{},tokenData:{},tokenProps:{},fiatTransactionAmount:"",fiatTransactionFee:"",fiatTransactionTotal:"",ethTransactionAmount:"",ethTransactionFee:"",ethTransactionTotal:"",hexTransactionAmount:"",hexTransactionFee:"",hexTransactionTotal:"",nonce:"",maxValueMode:{}};function v(e){return{type:l,payload:e}}function _(e){return{type:p,payload:e}}function A(e){return{type:m,payload:e}}function I(e){return{type:h,payload:e}}function w(e){return{type:g,payload:e}}function R(e){return{type:T,payload:e}}function C(e){return{type:y,payload:e}}function O(e){return(t,n)=>{const c=n(),u=(0,r.currentCurrencySelector)(c),d=(0,r.conversionRateSelector)(c),l=(0,a.getNativeCurrency)(c);t(v(e));const{txParams:{value:p="0x0",gas:m="0x0"}={}}=e;let{txParams:{gasPrice:f}={}}=e;f||(f=(0,i.getAveragePriceEstimateInHexWEI)(c)||"0x0");const h=(0,o.getValueFromWeiHex)({value:p,fromCurrency:l,toCurrency:u,conversionRate:d,numberOfDecimals:2}),g=(0,o.getValueFromWeiHex)({value:p,fromCurrency:l,toCurrency:l,conversionRate:d,numberOfDecimals:6});t(I({fiatTransactionAmount:h,ethTransactionAmount:g,hexTransactionAmount:p}));const T=(0,s.getHexGasTotal)({gasLimit:m,gasPrice:f}),y=(0,s.getTransactionFee)({value:T,fromCurrency:l,toCurrency:u,numberOfDecimals:2,conversionRate:d}),E=(0,s.getTransactionFee)({value:T,fromCurrency:l,toCurrency:l,numberOfDecimals:6,conversionRate:d});t(w({fiatTransactionFee:y,ethTransactionFee:E,hexTransactionFee:T}));t(R({fiatTransactionTotal:(0,s.addFiat)(y,h),ethTransactionTotal:(0,s.addEth)(E,g),hexTransactionTotal:(0,o.sumHexes)(p,T)}))}}}}},{package:"$root$",file:"ui/ducks/confirm-transaction/confirm-transaction.duck.js"}],[6961,{"../../shared/modules/hexstring-utils":6021,"../../shared/modules/selectors/networks":6033,"../pages/confirmations/send/send.constants":7419,"../selectors":7653,"../store/actionConstants":7666,"../store/actions":7667,"@metamask/snaps-rpc-methods":3039,"@reduxjs/toolkit":3507,loglevel:5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.domainInitialState=n.default=void 0,n.fetchResolutions=A,n.getDomainError=function(e){return e[f].error},n.getDomainResolutions=function(e){return e[f].resolutions},n.getDomainWarning=function(e){return e[f].warning},n.initializeDomainSlice=_,n.lookupDomainName=function(e){return async(t,n)=>{const r=e.trim();let a=n();"UNINITIALIZED"===a[f].stage&&await t(_()),await t(y(r)),a=n(),s.default.info(`Resolvers attempting to resolve name: ${r}`);const o=(0,c.getCurrentChainId)(a),i=parseInt(o,16),u=await A({domain:r,chainId:`eip155:${i}`,state:a});a=n(),r===a[f].domainName&&await t(E({resolutions:u,error:undefined,chainId:o,network:i,domainName:r}))}},n.resetDomainResolution=void 0;var r,a=e("@reduxjs/toolkit"),s=(r=e("loglevel"))&&r.__esModule?r:{default:r},o=e("@metamask/snaps-rpc-methods"),i=e("../selectors"),c=e("../../shared/modules/selectors/networks"),u=e("../store/actions"),d=e("../pages/confirmations/send/send.constants"),l=e("../store/actionConstants"),p=e("../../shared/modules/hexstring-utils");const m={stage:"UNINITIALIZED",resolutions:null,error:null,warning:null,chainId:null,domainName:null},f=(n.domainInitialState=m,"DNS"),h=(0,a.createSlice)({name:f,initialState:m,reducers:{lookupStart:(e,t)=>{e.domainName=t.payload,e.warning="loading",e.error=null},lookupEnd:(e,t)=>{e.resolutions=null,e.error=null,e.warning=null,e.domainName=null;const{resolutions:n,domainName:r}=t.payload,a=n.filter((e=>e.resolvedAddress!==p.BURN_ADDRESS&&"0x"!==e.resolvedAddress));a.length>0?e.resolutions=a:r.length>0&&(e.error=d.NO_RESOLUTION_FOR_DOMAIN)},enableDomainLookup:(e,t)=>{e.stage="INITIALIZED",e.error=null,e.resolutions=null,e.warning=null,e.chainId=t.payload},resetDomainResolution:e=>{e.resolutions=null,e.warning=null,e.error=null}},extraReducers:e=>{e.addCase(l.CHAIN_CHANGED,((e,t)=>{t.payload!==e.chainId&&(e.stage="UNINITIALIZED")}))}}),{reducer:g,actions:T}=h;n.default=g;const{lookupStart:y,lookupEnd:E,enableDomainLookup:S,resetDomainResolution:v}=T;function _(){return(e,t)=>{const n=t(),r=(0,c.getCurrentChainId)(n);e(S(r))}}async function A({domain:e,chainId:t,state:n}){const r=(0,i.getPermissionSubjects)(n),a=(0,i.getNameLookupSnapsIds)(n).filter((n=>{var a;const s=null===(a=r[n])||void 0===a?void 0:a.permissions["endowment:name-lookup"],i=(0,o.getChainIdsCaveat)(s),c=(0,o.getLookupMatchersCaveat)(s);if(i&&!i.includes(t))return!1;if(c){const{tlds:t,schemes:n}=c;return(null==t?void 0:t.some((t=>e.endsWith(`.${t}`))))||(null==n?void 0:n.some((t=>e.startsWith(`${t}:`))))}return!0}));if(0===e.length)return[];return(await Promise.allSettled(a.map((n=>(0,u.handleSnapRequest)({snapId:n,origin:"",handler:"onNameLookup",request:{jsonrpc:"2.0",method:" ",params:{domain:e,chainId:t}}}))))).reduce(((e,t,r)=>{if("rejected"!==t.status&&null!==t.value){const s=t.value.resolvedAddresses.map((e=>{var t,s;return{...e,resolvingSnap:null===(t=(0,i.getSnapMetadata)(n,a[r]))||void 0===t?void 0:t.name,addressBookEntryName:null===(s=(0,i.getAddressBookEntry)(n,e.resolvedAddress))||void 0===s?void 0:s.name}}));return e.concat(s)}return e}),[])}n.resetDomainResolution=v}}},{package:"$root$",file:"ui/ducks/domains.js"}],[6962,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SET_CUSTOM_GAS_PRICE=n.SET_CUSTOM_GAS_LIMIT=n.RESET_CUSTOM_DATA=void 0;n.RESET_CUSTOM_DATA="metamask/gas/RESET_CUSTOM_DATA",n.SET_CUSTOM_GAS_LIMIT="metamask/gas/SET_CUSTOM_GAS_LIMIT",n.SET_CUSTOM_GAS_PRICE="metamask/gas/SET_CUSTOM_GAS_PRICE"}}},{package:"$root$",file:"ui/ducks/gas/gas-action-constants.ts"}],[6963,{"./gas-action-constants":6962,lodash:5108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=s,t){switch(t.type){case a.SET_CUSTOM_GAS_PRICE:return{...e,customData:{...e.customData,price:t.value}};case a.SET_CUSTOM_GAS_LIMIT:return{...e,customData:{...e.customData,limit:t.value}};case a.RESET_CUSTOM_DATA:return{...e,customData:(0,r.cloneDeep)(s.customData)};default:return e}},n.setCustomGasLimit=function(e){return{type:a.SET_CUSTOM_GAS_LIMIT,value:e}},n.setCustomGasPrice=function(e){return{type:a.SET_CUSTOM_GAS_PRICE,value:e}};var r=e("lodash"),a=e("./gas-action-constants");const s={customData:{price:null,limit:null}}}}},{package:"$root$",file:"ui/ducks/gas/gas.duck.js"}],[6966,{"../../../shared/modules/i18n":6022,"../../store/actionConstants":7666,reselect:5527},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=i,t){if(t.type===a.SET_CURRENT_LOCALE)return{...e,current:t.payload.messages,currentLocale:t.payload.locale};return e},n.getIntlLocale=n.getEnLocaleMessages=n.getCurrentLocaleMessages=n.getCurrentLocale=void 0;var r=e("reselect"),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var i=a?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(r,s,i):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("../../store/actionConstants")),s=e("../../../shared/modules/i18n");function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}const i={};const c=e=>e.localeMessages.currentLocale;n.getCurrentLocale=c;n.getIntlLocale=(0,r.createSelector)(c,(e=>Intl.getCanonicalLocales(e?e.replace(/_/gu,"-"):s.FALLBACK_LOCALE)[0]));n.getCurrentLocaleMessages=e=>e.localeMessages.current;n.getEnLocaleMessages=e=>e.localeMessages.en}}},{package:"$root$",file:"ui/ducks/locale/locale.ts"}],[6967,{"../../../shared/constants/alerts":5955,"../../../shared/constants/gas":5963,"../../../shared/constants/keyring":5965,"../../../shared/constants/preferences":5977,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/hexstring-utils":6021,"../../../shared/modules/selectors/networks":6033,"../../../shared/modules/string-utils":6036,"../../selectors/accounts":7645,"../../selectors/selectors":7660,"../../store/actionConstants":7666,"../../store/actions":7667,"../gas/gas.duck":6963,"@metamask/transaction-controller":3344,"ethereumjs-util":4537,reselect:5527},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e=S,t){const n={...S,...e};switch(t.type){case g.UPDATE_METAMASK_STATE:return{...n,...t.value};case g.LOCK_METAMASK:return{...n,isUnlocked:!1};case g.SET_ACCOUNT_LABEL:{const{account:e}=t.value,r=t.value.label,a=Object.values(n.internalAccounts.accounts).find((t=>t.address.toLowerCase()===e.toLowerCase())),s={...n.internalAccounts,accounts:{...n.internalAccounts.accounts,[a.id]:{...a,metadata:{...a.metadata,name:r}}}};return Object.assign(n,{internalAccounts:s})}case g.UPDATE_TRANSACTION_PARAMS:{const{id:e,value:r}=t;let{transactions:a}=n;return a=a.map((t=>{if(t.id===e){const e={...t};return e.txParams=r,e}return t})),{...n,transactions:a}}case g.SET_PARTICIPATE_IN_METAMETRICS:return{...n,participateInMetaMetrics:t.value};case g.SET_DATA_COLLECTION_FOR_MARKETING:return{...n,dataCollectionForMarketing:t.value};case g.COMPLETE_ONBOARDING:return{...n,completedOnboarding:!0};case g.RESET_ONBOARDING:return{...n,isInitialized:!1,completedOnboarding:!1,firstTimeFlowType:null,isUnlocked:!1,onboardingTabs:{},seedPhraseBackedUp:null};case g.SET_FIRST_TIME_FLOW_TYPE:return{...n,firstTimeFlowType:t.value};default:return n}},n.doesUserHaveALedgerAccount=function(e){return e.metamask.keyrings.some((e=>e.type===c.KeyringType.ledger))},n.findKeyringForAddress=k,n.getAlertEnabledness=void 0,n.getBlockGasLimit=function(e){return e.metamask.currentBlockGasLimit},n.getCompletedOnboarding=function(e){return e.metamask.completedOnboarding},n.getConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,f.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate},n.getCurrencyRates=function(e){return e.metamask.currencyRates},n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getEstimatedGasFeeTimeBounds=function(e){return e.metamask.estimatedGasFeeTimeBounds},n.getEstimatedGasFeeTimeBoundsByChainId=function(e,t){var n;return null===(n=e.metamask.gasFeeEstimatesByChainId)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.estimatedGasFeeTimeBounds},n.getGasFeeEstimatesByChainId=n.getGasFeeEstimates=n.getGasEstimateTypeByChainId=n.getGasEstimateType=void 0,n.getIsGasEstimatesLoading=function(e){const t=(0,m.checkNetworkAndAccountSupports1559)(e),n=C(e),r=n===i.GasEstimateTypes.feeMarket||n===i.GasEstimateTypes.ethGasPrice;return n===i.GasEstimateTypes.none||t&&!r||!t&&n===i.GasEstimateTypes.feeMarket},n.getIsGasEstimatesLoadingByChainId=function(e,{chainId:t,networkClientId:n}){const r=(0,m.checkNetworkAndAccountSupports1559)(e,n),a=O(e,t),s=a===i.GasEstimateTypes.feeMarket||a===i.GasEstimateTypes.ethGasPrice;return a===i.GasEstimateTypes.none||r&&!s||!r&&a===i.GasEstimateTypes.feeMarket},n.getIsInitialized=function(e){return e.metamask.isInitialized},n.getIsNetworkBusyByChainId=function(e,t){const n=b(e,t);return(null==n?void 0:n.networkCongestion)>=i.NetworkCongestionThresholds.busy},n.getIsUnlocked=function(e){return e.metamask.isUnlocked},n.getLedgerTransportType=function(e){return e.metamask.ledgerTransportType},n.getNFTsByChainId=void 0,n.getNativeCurrency=function(e){return(0,f.getProviderConfig)(e).ticker},n.getNfts=n.getNftContracts=void 0,n.getNftsDropdownState=function(e){return e.metamask.nftsDropdownState},n.getSeedPhraseBackedUp=function(e){return e.metamask.seedPhraseBackedUp},n.getSendHexDataFeatureFlagState=function(e){return e.metamask.featureFlags.sendHexData},n.getSendToAccounts=function(e){const t=(0,m.accountsWithSendEtherInfoSelector)(e),n=(0,m.getAddressBook)(e);return[...t,...n]},n.getTokenBalances=function(e){return e.metamask.tokenBalances},n.getWeb3ShimUsageAlertEnabledness=n.getUnconnectedAccountAlertShown=n.getUnconnectedAccountAlertEnabledness=n.getTokens=void 0,n.isAddressLedger=function(e,t){const n=k(e,t);return(null==n?void 0:n.type)===c.KeyringType.ledger},n.isEIP1559Network=function(e,t){var n;const r=(0,f.getSelectedNetworkClientId)(e);return!0===(null===(n=e.metamask.networksMetadata)||void 0===n||null===(n=n[t??r])||void 0===n?void 0:n.EIPS[1559])},n.isNotEIP1559Network=function(e){const t=(0,f.getSelectedNetworkClientId)(e);return!1===e.metamask.networksMetadata[t].EIPS[1559]},n.updateGasFees=function({gasPrice:e,gasLimit:t,maxPriorityFeePerGas:n,maxFeePerGas:a,transaction:s,expectHexWei:o=!1}){return async i=>{const c={...s.txParams,gas:t};e?(i((0,y.setCustomGasPrice)(v(c.gasPrice,o))),c.gasPrice=v(e,o)):a&&n&&(c.maxFeePerGas=v(a,o),c.maxPriorityFeePerGas=(0,r.addHexPrefix)((0,d.decGWEIToHexWEI)(n)));const u={...s,txParams:c},l=(0,r.isHexString)((0,r.addHexPrefix)(t))?(0,r.addHexPrefix)(t):(0,r.addHexPrefix)(t.toString(16));i((0,y.setCustomGasLimit)(l)),await i((0,T.updateTransactionGasFees)(u.id,u))}};var r=e("ethereumjs-util"),a=e("reselect"),s=e("@metamask/transaction-controller"),o=e("../../../shared/constants/alerts"),i=e("../../../shared/constants/gas"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/preferences"),d=e("../../../shared/modules/conversion.utils"),l=e("../../../shared/modules/hexstring-utils"),p=e("../../../shared/modules/string-utils"),m=e("../../selectors/selectors"),f=e("../../../shared/modules/selectors/networks"),h=e("../../selectors/accounts"),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("../../store/actionConstants")),T=e("../../store/actions"),y=e("../gas/gas.duck");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}const S={isInitialized:!1,isUnlocked:!1,internalAccounts:{accounts:{},selectedAccount:""},transactions:[],networkConfigurations:{},addressBook:[],useBlockie:!1,featureFlags:{},currentLocale:"",currentBlockGasLimit:"",currentBlockGasLimitByChainId:{},preferences:{autoLockTimeLimit:u.DEFAULT_AUTO_LOCK_TIME_LIMIT,showExtensionInFullSizeView:!1,showFiatInTestnets:!1,showTestNetworks:!1,smartTransactionsOptInStatus:!0,petnamesEnabled:!0,featureNotificationsEnabled:!1,privacyMode:!1,showMultiRpcModal:!1},firstTimeFlowType:null,completedOnboarding:!1,knownMethodData:{},use4ByteResolution:!0,participateInMetaMetrics:null,dataCollectionForMarketing:null,currencyRates:{ETH:{conversionRate:null}},throttledOrigins:{}};const v=(e,t)=>(0,r.addHexPrefix)(t?e:(0,d.decGWEIToHexWEI)(e));const _=e=>e.metamask.alertEnabledness;n.getAlertEnabledness=_;n.getUnconnectedAccountAlertEnabledness=e=>_(e)[o.AlertTypes.unconnectedAccount];n.getWeb3ShimUsageAlertEnabledness=e=>_(e)[o.AlertTypes.web3ShimUsage];n.getUnconnectedAccountAlertShown=e=>e.metamask.unconnectedAccountAlertShownOrigins;n.getTokens=e=>e.metamask.tokens;n.getNfts=e=>{var t;const{metamask:{allNfts:n}}=e,{address:r}=(0,h.getSelectedInternalAccount)(e),{chainId:a}=(0,f.getProviderConfig)(e);return(null==n||null===(t=n[r])||void 0===t?void 0:t[a])??[]};n.getNFTsByChainId=(e,t)=>{var n;const{metamask:{allNfts:r}}=e,{address:a}=(0,h.getSelectedInternalAccount)(e);return(null==r||null===(n=r[a])||void 0===n?void 0:n[t])??[]};function A(e){var t;const n=null===(t=e.confirmTransaction)||void 0===t?void 0:t.txData;return null==n?void 0:n.gasFeeEstimates}function I(e,t){var n;const r=null===(n=e.confirmTransaction)||void 0===n?void 0:n.txData;return(null==r?void 0:r.chainId)!==t?undefined:null==r?void 0:r.gasFeeEstimates}n.getNftContracts=e=>{var t;const{metamask:{allNftContracts:n}}=e,{address:r}=(0,h.getSelectedInternalAccount)(e),{chainId:a}=(0,f.getProviderConfig)(e);return(null==n||null===(t=n[r])||void 0===t?void 0:t[a])??[]};const w=(0,a.createSelector)(A,(e=>null==e?void 0:e.type)),R=(0,a.createSelector)(I,(e=>null==e?void 0:e.type)),C=n.getGasEstimateType=(0,a.createSelector)((function(e){return e.metamask.gasEstimateType}),w,((e,t)=>t??e)),O=n.getGasEstimateTypeByChainId=(0,a.createSelector)((function(e,t){var n;return null===(n=e.metamask.gasFeeEstimatesByChainId)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.gasEstimateType}),R,((e,t)=>t??e));const b=n.getGasFeeEstimatesByChainId=(0,a.createSelector)((function(e,t){var n;return null===(n=e.metamask.gasFeeEstimatesByChainId)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.gasFeeEstimates}),I,((e,t)=>t?(0,s.mergeGasFeeEstimates)({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}):e));n.getGasFeeEstimates=(0,a.createSelector)((function(e){return e.metamask.gasFeeEstimates}),A,((e,t)=>t?(0,s.mergeGasFeeEstimates)({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}):e));function k(e,t){return e.metamask.keyrings.find((e=>e.accounts.some((e=>(0,p.isEqualCaseInsensitive)(e,(0,r.addHexPrefix)(t))||(0,p.isEqualCaseInsensitive)(e,(0,l.stripHexPrefix)(t))))))}}}},{package:"$root$",file:"ui/ducks/metamask/metamask.js"}],[697,{"./DataItem":696,buffer:4291},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var r=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n+=a}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",a=0;a<n.length;a++)if("%"===n.charAt(a))r+=n.substring(a+1,a+3),a+=2;else{var s=n.charCodeAt(a).toString(16);s.length<2&&(s="0"+s),r+=s}return new e(r)};var r=[],a={},s=function(e){return function(){throw new Error(e+" not implemented")}};function o(){}function i(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void s("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}o.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-a:a},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-a:a},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-a:a},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},i.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:s("writeString"),canWriteBinary:function(e){return!1},writeBinary:s("writeChunk")};var d=new Error;function l(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),r=[];if(null!==n){5===t.type&&(n*=2);for(var s=0;s<n;s++)r[s]=l(e)}else for(var o;(o=l(e))!==d;)r.push(o);if(5===t.type){var i={};for(s=0;s<r.length;s+=2)i[r[s]]=r[s+1];return i}return r;case 6:var u=c(t,e),p=a[u];r=l(e);return p?p(r):r;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return d;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function p(e,t){for(var n=0;n<r.length;n++){var a=r[n].fn(e);if(a!==undefined)return u(6,r[n].tag,t),p(a,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(h.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)p(e[n],t)}else{var s=Object.keys(e);u(5,s.length,t);for(n=0;n<s.length;n++){const r=parseInt(s[n]);isNaN(r)?(p(s[n],t),p(e[s[n]],t)):(p(r,t),p(e[s[n]],t))}}}}var m=[],f=[],h={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?f.push((function(n){if(e===n)return t(n)})):f.push(e)},addReader:function(e,t){"string"==typeof e?m.push((function(n,r){if(e===r)return t(n,r)})):m.push(e)},encode:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(t);if(r)return p(e,r),r.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<f.length;n++){var r=(0,f[n])(t);if(r)return e.getTag()!==undefined?(p(e,r),r.result()):(p(e.getData(),r),r.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<m.length;n++){var r=(0,m[n])(e,t);if(r)return l(r)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var r=0;r<m.length;r++){var a=(0,m[r])(e,n);if(a){const e=l(a);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a[e]=t,this}};function g(e){this.buffer=e,this.pos=0}function T(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function y(e){this.hex=e,this.pos=0}function E(e){this.$hex="",this.finalFormat=e||"hex"}return g.prototype=Object.create(o.prototype),g.prototype.peekByte=function(){return this.buffer[this.pos]},g.prototype.readByte=function(){return this.buffer[this.pos++]},g.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},g.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},g.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},g.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},g.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},T.prototype=Object.create(i.prototype),T.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},T.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},T.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},T.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},T.prototype.canWriteBinary=function(e){return e instanceof n},T.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},T.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},T.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var a=this.completeBuffers[r];a.copy(e,t,0,a.length),t+=a.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(h.addReader((function(e,t){return n.isBuffer(e)?new g(e):"hex"===t||"base64"===t?new g(n.from(e,t)):void 0})),h.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new T(e):void 0:new T}))),y.prototype=Object.create(o.prototype),y.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},y.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},y.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},E.prototype=Object.create(i.prototype),E.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},E.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},E.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},E.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},E.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},h.addReader((function(t,n){return t instanceof e||t.$hex?new y(t.$hex):"hex"===n?new y(t):void 0})),h.addWriter((function(e){if("hex"===e)return new E})),h}();return r.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),r}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[6971,{"../../../shared/constants/common":5959,"../../../shared/constants/gas":5963,"../../../shared/constants/network":5972,"../../../shared/constants/swaps":5982,"../../../shared/constants/transaction":5986,"../../../shared/lib/transactions-controller-utils":6004,"../../../shared/modules/Numeric":6006,"../../../shared/modules/contract-utils":6014,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/error":6017,"../../../shared/modules/selectors/networks":6033,"../../../shared/modules/string-utils":6036,"../../helpers/utils/util":7028,"../../pages/confirmations/send/send.utils":7420,"../../selectors":7653,"../../store/actions":7667,"../metamask/metamask":6967,"../swaps/swaps":6975,"@metamask/transaction-controller":3344,"bignumber.js":4195,"ethereumjs-util":4537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateBestQuote=n.addAdjustedReturnToQuotes=void 0,n.estimateGasLimitForSend=async function({selectedAddress:e,value:t,gasPrice:n,sendToken:r,to:o,data:u,isNonStandardEthChain:l,chainId:f,gasLimit:h,...y}){let E=!1,S=c.MIN_GAS_LIMIT_HEX;y.blockGasLimit?S=y.blockGasLimit:r&&(S=c.GAS_LIMITS.BASE_TOKEN_ESTIMATE);const v={from:e,value:t,gasPrice:n};if(r){if(!o)return c.GAS_LIMITS.BASE_TOKEN_ESTIMATE;v.value="0x0",v.data=(0,m.getAssetTransferData)({sendToken:r,fromAddress:e,toAddress:o,amount:t}),v.to=r.address}else{if(!u){const{isContractAddress:e}=o?await(0,p.readAddressAsContract)(global.ethereumProvider,o):{};if(!e&&!l)return c.GAS_LIMITS.SIMPLE;!e&&l&&(E=!0)}v.data=u||"0x",o&&(v.to=o),t&&"0"!==t||(v.value="0xff")}E||(v.gas=new T.Numeric(S,16).times(new T.Numeric(.95,10)).round(0,s.default.ROUND_DOWN).toPrefixedHexString());let _=1.5;E?_=1:d.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[f]&&(_=d.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[f]);try{const e=await(0,g.estimateGas)(v),t=(0,m.addGasBuffer)(e,S,_);return(0,a.addHexPrefix)(t)}catch(e){const t=(0,i.getErrorMessage)(e);if(t.includes("Transaction execution error.")||t.includes("gas required exceeds allowance or always failing transaction")||d.CHAIN_ID_TO_GAS_LIMIT_BUFFER_MAP[f]&&t.includes("gas required exceeds allowance")){const e=(0,m.addGasBuffer)((null==v?void 0:v.gas)??h,S,_);return(0,a.addHexPrefix)(e)}throw e}},n.generateTransactionParams=function(e){var t,n,r,a;const s=e.draftTransactions[e.currentTransactionUUID],i={from:(null===(t=s.fromAccount)||void 0===t?void 0:t.address)||e.selectedAccount.address,gas:s.gas.gasLimit};switch(s.sendAsset.type){case l.AssetType.token:i.to=s.sendAsset.details.address,i.value="0x0",i.data=(0,m.generateERC20TransferData)({toAddress:s.recipient.address,amount:s.amount.value,sendToken:s.sendAsset.details});break;case l.AssetType.NFT:i.to=s.sendAsset.details.address,i.value="0x0",i.data=(null===(n=s.sendAsset.details)||void 0===n?void 0:n.standard)===l.TokenStandard.ERC721?(0,m.generateERC721TransferData)({toAddress:s.recipient.address,fromAddress:(null===(r=s.fromAccount)||void 0===r?void 0:r.address)??e.selectedAccount.address,tokenId:s.sendAsset.details.tokenId}):(0,m.generateERC1155TransferData)({toAddress:s.recipient.address,fromAddress:(null===(a=s.fromAccount)||void 0===a?void 0:a.address)??e.selectedAccount.address,tokenId:s.sendAsset.details.tokenId,amount:s.amount.value});break;case l.AssetType.native:default:i.to=s.recipient.address,i.value=s.amount.value,i.data=s.userInputHexData||"0x"}e.eip1559support?(i.type=o.TransactionEnvelopeType.feeMarket,i.maxFeePerGas=s.gas.maxFeePerGas,i.maxPriorityFeePerGas=s.gas.maxPriorityFeePerGas,i.maxFeePerGas&&"0x0"!==i.maxFeePerGas||(i.maxFeePerGas=s.gas.gasPrice),i.maxPriorityFeePerGas&&"0x0"!==i.maxPriorityFeePerGas||(i.maxPriorityFeePerGas=i.maxFeePerGas)):(i.gasPrice=s.gas.gasPrice,i.type=o.TransactionEnvelopeType.legacy);return i},n.getIsDraftSwapAndSend=function(e){var t,n;return!(0,I.isEqualCaseInsensitive)((null==e||null===(t=e.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||"",(null==e||null===(n=e.receiveAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address)||"")},n.getRoundedGasPrice=function(e){const t=new T.Numeric(e,10).round(9).toString(),n=Number(t);return(0,h.getGasPriceInHexWei)(n)};var r,a=e("ethereumjs-util"),s=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},o=e("@metamask/transaction-controller"),i=e("../../../shared/modules/error"),c=e("../../../shared/constants/gas"),u=e("../../../shared/lib/transactions-controller-utils"),d=e("../../../shared/constants/network"),l=e("../../../shared/constants/transaction"),p=e("../../../shared/modules/contract-utils"),m=e("../../pages/confirmations/send/send.utils"),f=e("../../../shared/modules/selectors/networks"),h=e("../../selectors"),g=e("../../store/actions"),T=e("../../../shared/modules/Numeric"),y=e("../metamask/metamask"),E=e("../swaps/swaps"),S=e("../../helpers/utils/util"),v=e("../../../shared/modules/conversion.utils"),_=e("../../../shared/constants/common"),A=e("../../../shared/constants/swaps"),I=e("../../../shared/modules/string-utils");n.addAdjustedReturnToQuotes=async(e,t,n)=>{if(null==e||!e.length)return e;try{const r=(0,f.getCurrentChainId)(t),{medium:s,gasPrice:o}=(0,y.getGasFeeEstimates)(t),i=(0,h.checkNetworkAndAccountSupports1559)(t),c=o??(null==s?void 0:s.suggestedMaxFeePerGas),d=(0,E.getUsedSwapsGasPrice)(t),l=i?c:d,p=(0,h.getTokenExchangeRates)(t),m=(0,h.getConfirmationExchangeRates)(t),g={...p,...m},I=(0,y.getNativeCurrency)(t),w=null!=n&&n.address?(0,a.toChecksumAddress)(n.address):undefined;let R=w?g[w]:1;return!R&&w&&(R=(await(0,S.fetchTokenExchangeRates)(I,[w],r))[w]),R?e.map((e=>{var t;const a=((null==e?void 0:e.gasParams.maxGas)||0)+Number((0,v.hexToDecimal)((null==e||null===(t=e.approvalNeeded)||void 0===t?void 0:t.gas)||"0x0")),s=new T.Numeric(l,10,_.EtherDenomination.GWEI).times(a,10).toDenomination(_.EtherDenomination.ETH),o=(e.destinationAmount?new T.Numeric((0,u.calcTokenAmount)(e.destinationAmount,(null==n?void 0:n.decimals)||A.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r].decimals),10).times(R,10):undefined).minus(s).toNumber();return{...e,adjustAmountReceivedInNative:o}})):e}catch(e){console.warn(`Could not calculate adjusted return for quote selection: ${e}`)}return e};n.calculateBestQuote=e=>e.reduce(((e,t)=>((null==t?void 0:t.adjustAmountReceivedInNative)||Number((null==t?void 0:t.destinationAmount)||0))>((null==e?void 0:e.adjustAmountReceivedInNative)||Number((null==e?void 0:e.destinationAmount)||0))?t:e),null==e?void 0:e[0])}}},{package:"$root$",file:"ui/ducks/send/helpers.js"}],[6972,{"./send":6973},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./send");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}))}}},{package:"$root$",file:"ui/ducks/send/index.js"}],[6973,{"../../../shared/constants/common":5959,"../../../shared/constants/gas":5963,"../../../shared/constants/swaps":5982,"../../../shared/constants/time":5984,"../../../shared/constants/transaction":5986,"../../../shared/lib/metamask-controller-utils":5996,"../../../shared/lib/transactions-controller-utils":6004,"../../../shared/modules/Numeric":6006,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/error":6017,"../../../shared/modules/hexstring-utils":6021,"../../../shared/modules/selectors/networks":6033,"../../../shared/modules/string-utils":6036,"../../../shared/modules/transaction.utils":6038,"../../helpers/constants/error-keys":6980,"../../helpers/constants/routes":6985,"../../helpers/utils/token-util":7025,"../../helpers/utils/transactions.util":7026,"../../helpers/utils/util":7028,"../../pages/confirmations/send/send.constants":7419,"../../pages/confirmations/send/send.utils":7420,"../../pages/swaps/swaps.util":7636,"../../selectors":7653,"../../store/actionConstants":7666,"../../store/actions":7667,"../confirm-transaction/confirm-transaction.duck":6960,"../domains":6961,"../gas/gas.duck":6963,"../metamask/metamask":6967,"./helpers":6971,"./swap-and-send-utils":6974,"@metamask/rpc-errors":2715,"@metamask/transaction-controller":3344,"@reduxjs/toolkit":3507,"bignumber.js":4195,"ethereumjs-util":4537,lodash:5108,uuid:5901},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.draftTransactionInitialState=n.default=n.computeEstimatedGasLimit=n.addHistoryEntry=n.acknowledgeRecipientWarning=n.SEND_STATUSES=n.SEND_STAGES=n.RECIPIENT_SEARCH_MODES=n.GAS_INPUT_MODES=n.AMOUNT_MODES=void 0,n.editExistingTransaction=function(e,t){return async(n,r)=>{await n(re.clearPreviousDrafts());const a=r(),s=(0,T.getUnapprovedTransactions)(a)[t],i=(0,T.getTargetAccount)(a,s.txParams.from);if(Boolean(a[X].prevSwapAndSendInput)){const{amountMode:e,amount:{value:r},...s}=a[X].prevSwapAndSendInput;n(re.addNewDraft({...Y,...s,id:t,fromAccount:i,history:[`sendFlow - user clicked edit on transaction with id ${t} (swap and send)`]})),e===V.MAX?(n(re.updateAmountMode(V.MAX)),n(re.updateAmountToMax()),n(he())):n(ye(r))}else if(e===C.AssetType.native)await n(re.addNewDraft({...Y,id:t,fromAccount:i,gas:{...Y.gas,gasLimit:s.txParams.gas,gasPrice:s.txParams.gasPrice},userInputHexData:s.txParams.data,recipient:{...Y.recipient,address:s.txParams.to,nickname:(0,T.getAddressBookEntryOrAccountName)(a,s.txParams.to)??""},amount:{...Y.amount,value:s.txParams.value},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await n(Ee({type:C.AssetType.native},{initialAssetSet:!0}));else{const r=(0,N.parseStandardTokenTransactionData)(s.txParams.data),c=e===C.AssetType.token?(0,D.getTokenValueParam)(r):"1",u=(0,v.getTokenAddressParam)(r),d=(0,T.getAddressBookEntryOrAccountName)(a,u)??"",l=(0,o.addHexPrefix)((0,p.decimalToHex)(c));await n(re.addNewDraft({...Y,id:t,fromAccount:i,gas:{...Y.gas,gasLimit:s.txParams.gas,gasPrice:s.txParams.gasPrice},userInputHexData:s.txParams.data,recipient:{...Y.recipient,address:u,nickname:d},amount:{...Y.amount,value:l},history:[`sendFlow - user clicked edit on transaction with id ${t}`]})),await n(Ee({type:e,details:{address:s.txParams.to,...e===C.AssetType.NFT?{tokenId:(0,v.getTokenIdParam)(r)??(0,D.getTokenValueParam)(r)}:{}}},{initialAssetSet:!0}))}await n(Z())}},n.gasFeeIsInError=function(e){var t;return Boolean(null===(t=ve(e).gas)||void 0===t?void 0:t.error)},n.getAssetError=function(e){return Ie(e).error},n.getBestQuote=void 0,n.getCurrentDraftTransaction=ve,n.getCurrentTransactionUUID=Se,n.getDraftTransactionExists=function(e){const t=ve(e);if(0===Object.keys(t).length)return!1;return!0},n.getDraftTransactionID=function(e){return ve(e).id},n.getGasInputMode=function(e){const t=(0,T.getIsMainnet)(e),n=(0,A.getGasEstimateType)(e),r=(0,T.getAdvancedInlineGasShown)(e);if(e[X].gasIsSetInModal)return q.CUSTOM;if(!t||r)return q.INLINE;if(t&&n===m.GasEstimateTypes.ethGasPrice)return q.INLINE;return q.BASIC},n.getGasLimit=function(e){var t;return null===(t=ve(e).gas)||void 0===t?void 0:t.gasLimit},n.getGasPrice=function(e){var t;return null===(t=ve(e).gas)||void 0===t?void 0:t.gasPrice},n.getGasTotal=function(e){var t;return null===(t=ve(e).gas)||void 0===t?void 0:t.gasTotal},n.getIsAssetSendable=function(e){var t,n;if((null===(t=Ie(e))||void 0===t?void 0:t.type)===C.AssetType.native)return!0;return!1===(null===(n=Ie(e))||void 0===n||null===(n=n.details)||void 0===n?void 0:n.isERC721)},n.getIsBalanceInsufficient=function(e){var t;return(null===(t=ve(e).gas)||void 0===t?void 0:t.error)===f.INSUFFICIENT_FUNDS_ERROR},n.getIsSwapAndSendDisabledForNetwork=n.getIsNativeSendPossible=void 0,n.getIsUsingMyAccountForRecipientSearch=function(e){return e[X].recipientMode===Q.MY_ACCOUNTS},n.getMinimumGasLimitForSend=function(e){return e[X].gasLimitMinimum},n.getRecipient=Re,n.getRecipientUserInput=function(e){return e[X].recipientInput},n.getRecipientWarningAcknowledgement=function(e){var t;return(null===(t=ve(e).recipient)||void 0===t?void 0:t.recipientWarningAcknowledged)??!1},n.getSendAmount=function(e){var t;return null===(t=ve(e).amount)||void 0===t?void 0:t.value},n.getSendAnalyticProperties=void 0,n.getSendAsset=Ie,n.getSendAssetAddress=function(e){var t;return null===(t=Ie(e))||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address},n.getSendErrors=function(e){var t,n;return{gasFee:null===(t=ve(e).gas)||void 0===t?void 0:t.error,amount:null===(n=ve(e).amount)||void 0===n?void 0:n.error}},n.getSendHexData=function(e){return ve(e).userInputHexData},n.getSendLayer1GasFee=Ae,n.getSendMaxModeState=function(e){return e[X].amountMode===V.MAX},n.getSendStage=function(e){return e[X].stage},n.getSendTo=function(e){var t;return null===(t=Re(e))||void 0===t?void 0:t.address},n.getSender=we,n.getSwapsBlockedTokens=function(e){return e[X].swapsBlockedTokens},n.hasSendLayer1GasFee=function(e){return null!==e[X].gasTotalForLayer1},n.initializeSendState=n.initialState=void 0,n.isSendFormInvalid=function(e){const t=ve(e);if(!t)return!0;return t.status===$.INVALID},n.isSendStateInitialized=function(e){return e[X].stage!==K.INACTIVE},n.resetRecipientInput=function(){return async(e,t)=>{const n=t(),r=(0,g.getCurrentChainId)(n);(0,y.showLoadingIndication)(),e(de("sendFlow - user cleared recipient input")),e((0,I.resetDomainResolution)()),e(Te("")),await e(ge({address:"",nickname:""})),e(ce({chainId:r})),(0,y.hideLoadingIndication)()}},n.resetSendState=function(){return async(e,t)=>{const n=t();e(re.resetSendState()),n[X].gasEstimatePollToken&&(await(0,y.gasFeeStopPollingByPollingToken)(n[X].gasEstimatePollToken),(0,y.removePollingTokenFromAppState)(n[X].gasEstimatePollToken))}},n.sendAmountIsInError=function(e){var t;return Boolean(null===(t=ve(e).amount)||void 0===t?void 0:t.error)},n.signTransaction=function(e){return async(t,n)=>{const r=n(),{stage:a,eip1559support:s,amountMode:o}=r[X],c=r[X].draftTransactions[r[X].currentTransactionUUID];let l;const p=(0,H.getIsDraftSwapAndSend)(c),m=c.quotes,h=m?(0,H.calculateBestQuote)(m):undefined;l=p?{...h.trade}:(0,H.generateTransactionParams)(r[X]);const{amount:E,sendAsset:S,receiveAsset:v,recipient:_}=c,I={amount:{...E},sendAsset:{...S},receiveAsset:{...v},recipient:{..._},amountMode:r[X].amountMode};if(await t(re.setPrevSwapAndSend(I)),a!==K.EDIT||p){let n,s=c.recipient.type===f.RECIPIENT_TYPES.SMART_CONTRACT?d.TransactionType.contractInteraction:d.TransactionType.simpleSend;if(c.sendAsset.type!==C.AssetType.native&&(s=c.sendAsset.type===C.AssetType.NFT?c.sendAsset.details.standard===C.TokenStandard.ERC721?d.TransactionType.tokenMethodTransferFrom:d.TransactionType.tokenMethodSafeTransferFrom:d.TransactionType.tokenMethodTransfer),await t(de("sendFlow - user clicked next and transaction should be added to controller")),p){var w,R,O,b,k,N;if(a===K.EDIT){const e=(0,T.getUnapprovedTransactions)(r)[c.id];e&&await t((0,y.rejectPendingApproval)(e.id,u.providerErrors.userRejectedRequest().serialize()))}const s=(0,g.getCurrentChainId)(r),o=F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].decimals,i=(null===(w=c.sendAsset.details)||void 0===w?void 0:w.symbol)||(0,A.getNativeCurrency)(r),p=(null===(R=c.receiveAsset.details)||void 0===R?void 0:R.symbol)||(0,A.getNativeCurrency)(r),m=(null===(O=c.receiveAsset.details)||void 0===O?void 0:O.decimals)||o,f=(null===(b=c.receiveAsset.details)||void 0===b?void 0:b.address)||F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].address,S=(null===(k=c.sendAsset.details)||void 0===k?void 0:k.decimals)||o,v=new M.Numeric((null==E?void 0:E.value)||"0x0",16).toBase(10).shiftedBy(S).toString(),_=c.recipient.address,I=(null===(N=c.sendAsset.details)||void 0===N?void 0:N.address)||F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[s].address,C=null==h?void 0:h.sourceAmount,D=null==h?void 0:h.destinationAmount,P={swapAndSendRecipient:_,type:d.TransactionType.swapAndSend,sourceTokenSymbol:i,destinationTokenSymbol:p,destinationTokenDecimals:m,destinationTokenAddress:f,swapTokenValue:v,approvalTxId:undefined,destinationTokenAmount:D,sourceTokenAddress:I,sourceTokenAmount:C,sourceTokenDecimals:S};if(null!=h&&h.approvalNeeded){const{id:e}=await(0,y.addTransactionAndWaitForPublish)({...h.approvalNeeded,amount:"0x0"},{requireApproval:!1,type:d.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:d.TransactionType.swapApproval,sourceTokenSymbol:i}}});P.approvalTxId=e}const{id:x}=await(0,y.addTransactionAndWaitForPublish)(l,{requireApproval:!1,sendFlowHistory:c.history,type:d.TransactionType.swapAndSend,swaps:{hasApproveTx:Boolean(null==h?void 0:h.approvalNeeded),meta:P}});n=x,await t((0,y.setDefaultHomeActiveTabName)("activity")),e.push(U.DEFAULT_ROUTE)}else{const{id:r}=await t((0,y.addTransactionAndRouteToConfirmationPage)(l,{sendFlowHistory:c.history,type:s}));n=r,e.push(U.CONFIRM_TRANSACTION_ROUTE)}await t((0,L.setMaxValueMode)(n,o===V.MAX&&c.sendAsset.type===C.AssetType.native))}else{var D;const n=(0,T.getUnapprovedTransactions)(r),a=(0,i.cloneDeep)(n[c.id]),o={data:l.data,from:l.from,to:l.to,value:l.value,gas:null!=a&&a.userEditedGasLimit?a.txParams.gas:l.gas};a.originalGasEstimate=o.gas;const u={...a,txParams:Object.assign(a.txParams,s?o:l)};await t(de("sendFlow - user clicked next and transaction should be updated in controller")),await t((0,y.updateTransactionSendFlowHistory)(c.id,(null===(D=a.sendFlowHistory)||void 0===D?void 0:D.length)||0,c.history)),await t((0,y.updateEditableParams)(c.id,u.txParams)),await t((0,y.updateTransactionGasFees)(c.id,u.txParams)),e.push(U.CONFIRM_TRANSACTION_ROUTE)}await t(re.setPrevSwapAndSend(I))}},n.startNewDraftTransaction=function(e){return async t=>{await t(re.clearPreviousDrafts()),await t(re.addNewDraft({...Y,history:["sendFlow - User started new draft transaction"]})),await t(Ee({type:e.type??C.AssetType.native,details:e.details,skipComputeEstimatedGasLimit:!0})),await t(Z())}},n.toggleSendMaxMode=function(){return async(e,t)=>{t()[X].amountMode===V.MAX?(await e(re.updateAmountMode(V.INPUT)),await e(re.updateSendAmount("0x0")),await e(de("sendFlow - user toggled max mode off"))):(await e(re.updateAmountMode(V.MAX)),await e(re.updateAmountToMax()),await e(de("sendFlow - user toggled max mode on"))),await e(he())}},n.updateGasLimit=void 0,n.updateGasPrice=function(e){return t=>{t(de(`sendFlow - user set legacy gasPrice to ${e}`)),t(re.updateGasFees({gasPrice:e,transactionType:d.TransactionEnvelopeType.legacy,manuallyEdited:!0}))}},n.updateRecipient=ge,n.updateRecipientUserInput=Te,n.updateSendAmount=ye,n.updateSendAsset=Ee,n.updateSendHexData=function(e){return async(t,n)=>{await t(de(`sendFlow - user added custom hexData ${e}`)),await t(re.updateUserInputHexData(e));const r=n(),a=r[X].draftTransactions[r[X].currentTransactionUUID];await t(he(a.sendAsset.type===C.AssetType.native))}},n.updateSendQuote=he,n.useContactListForRecipientSearch=function(){return e=>{e(de("sendFlow - user selected back to all on recipient screen")),e(ue(Q.CONTACT_LIST))}},n.useDefaultGas=n.useCustomGas=void 0,n.useMyAccountsForRecipientSearch=function(){return e=>{e(de("sendFlow - user selected transfer to my accounts on recipient screen")),e(ue(Q.MY_ACCOUNTS))}};var r,a=e("@reduxjs/toolkit"),s=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},o=e("ethereumjs-util"),i=e("lodash"),c=e("uuid"),u=e("@metamask/rpc-errors"),d=e("@metamask/transaction-controller"),l=e("../../../shared/modules/error"),p=e("../../../shared/modules/conversion.utils"),m=e("../../../shared/constants/gas"),f=e("../../pages/confirmations/send/send.constants"),h=e("../../pages/confirmations/send/send.utils"),g=e("../../../shared/modules/selectors/networks"),T=e("../../selectors"),y=e("../../store/actions"),E=e("../gas/gas.duck"),S=e("../../store/actionConstants"),v=e("../../helpers/utils/token-util"),_=e("../../helpers/utils/util"),A=e("../metamask/metamask"),I=e("../domains"),w=e("../../../shared/modules/hexstring-utils"),R=e("../../helpers/utils/transactions.util"),C=e("../../../shared/constants/transaction"),O=e("../../helpers/constants/error-keys"),b=e("../../../shared/constants/time"),k=e("../../../shared/modules/string-utils"),N=e("../../../shared/modules/transaction.utils"),D=e("../../../shared/lib/metamask-controller-utils"),P=e("../../../shared/lib/transactions-controller-utils"),M=e("../../../shared/modules/Numeric"),x=e("../../../shared/constants/common"),F=e("../../../shared/constants/swaps"),L=e("../confirm-transaction/confirm-transaction.duck"),U=e("../../helpers/constants/routes"),G=e("../../pages/swaps/swaps.util"),B=e("./swap-and-send-utils"),H=e("./helpers");const j="This has been replaced with a more recent request",W=b.SECOND,K=n.SEND_STAGES={ADD_RECIPIENT:"ADD_RECIPIENT",DRAFT:"DRAFT",EDIT:"EDIT",INACTIVE:"INACTIVE"},$=n.SEND_STATUSES={INVALID:"INVALID",VALID:"VALID"},q=n.GAS_INPUT_MODES={BASIC:"BASIC",CUSTOM:"CUSTOM",INLINE:"INLINE"},V=n.AMOUNT_MODES={INPUT:"INPUT",MAX:"MAX"},Q=n.RECIPIENT_SEARCH_MODES={CONTACT_LIST:"CONTACT_LIST",MY_ACCOUNTS:"MY_ACCOUNTS"},Y=n.draftTransactionInitialState={amount:{error:null,value:"0x0"},sendAsset:{balance:"0x0",details:null,error:null,type:C.AssetType.native},receiveAsset:{balance:"0x0",details:null,error:null,type:C.AssetType.native},fromAccount:null,gas:{error:null,gasLimit:"0x0",gasPrice:"0x0",gasTotal:"0x0",maxFeePerGas:"0x0",maxPriorityFeePerGas:"0x0",wasManuallyEdited:!1},history:[],id:null,recipient:{address:"",error:null,nickname:"",warning:null,type:"",recipientWarningAcknowledged:!1},status:$.VALID,transactionType:d.TransactionEnvelopeType.legacy,userInputHexData:null,isSwapQuoteLoading:!1,swapQuotesError:null,swapQuotesLatestRequestTimestamp:null,timeToFetchQuotes:null,quotes:null},z=n.initialState={amountMode:V.INPUT,currentTransactionUUID:null,disabledSwapAndSendNetworks:[],draftTransactions:{},eip1559support:!1,gasEstimateIsLoading:!0,gasEstimatePollToken:null,gasIsSetInModal:!1,gasPriceEstimate:"0x0",gasLimitMinimum:m.GAS_LIMITS.SIMPLE,gasTotalForLayer1:null,prevSwapAndSendInput:null,recipientMode:Q.CONTACT_LIST,recipientInput:"",selectedAccount:{address:null,balance:"0x0"},stage:K.INACTIVE,swapsBlockedTokens:[]},X="send",J=n.computeEstimatedGasLimit=(0,a.createAsyncThunk)("send/computeEstimatedGasLimit",(async(e,t)=>{var n,r;const a=t.getState(),{send:s,metamask:o}=a,i=s.draftTransactions[s.currentTransactionUUID],c=(0,T.getUnapprovedTransactions)(a)[i.id],u=(0,T.getIsNonStandardEthChain)(a),d=(0,g.getCurrentChainId)(a),l=(0,T.getSelectedInternalAccountWithBalance)(a),p=await t.dispatch((0,y.getLayer1GasFee)({transactionParams:{gasPrice:i.gas.gasPrice,gas:i.gas.gasLimit,to:null===(n=i.recipient.address)||void 0===n?void 0:n.toLowerCase(),value:s.amountMode===V.MAX?s.selectedAccount.balance:i.amount.value,from:s.selectedAccount.address,data:i.userInputHexData,type:"0x0"},chainId:d}));if(s.stage!==K.EDIT||null===(r=c.dappSuggestedGasFees)||void 0===r||!r.gas||!c.userEditedGasLimit){var m;const e=await(0,H.estimateGasLimitForSend)({gasPrice:i.gas.gasPrice,blockGasLimit:o.currentBlockGasLimit,selectedAddress:l.address,sendToken:i.sendAsset.details,to:null===(m=i.recipient.address)||void 0===m?void 0:m.toLowerCase(),value:i.amount.value,data:i.userInputHexData,isNonStandardEthChain:u,chainId:d,gasLimit:i.gas.gasLimit});return await t.dispatch((0,E.setCustomGasLimit)(e)),{gasLimit:e,gasTotalForLayer1:p}}return null})),Z=n.initializeSendState=(0,a.createAsyncThunk)("send/initializeSendState",(async({chainHasChanged:e=!1}={},t)=>{const n=t.getState(),r=(0,T.getIsNonStandardEthChain)(n),a=(0,g.getSelectedNetworkClientId)(n),s=(0,g.getCurrentChainId)(n);let i=(0,T.checkNetworkAndAccountSupports1559)(n);i===undefined&&(i=await(0,y.getCurrentNetworkEIP1559Compatibility)());const c=(0,T.getSelectedAccount)(n),{send:u,metamask:d}=n,l=u.draftTransactions[u.currentTransactionUUID];if(!l)return t.rejectWithValue("draftTransaction not found, possibly not on send flow");let p=u.stage===K.EDIT?l.gas.gasPrice:"0x1",f=null;f=await(0,y.gasFeeStartPollingByNetworkClientId)(a),(0,y.addPollingTokenToAppState)(f);const{metamask:{gasFeeEstimates:h,gasEstimateType:S}}=t.getState();u.stage!==K.EDIT&&(p=S===m.GasEstimateTypes.legacy?(0,T.getGasPriceInHexWei)(h.medium):S===m.GasEstimateTypes.ethGasPrice?(0,H.getRoundedGasPrice)(h.gasPrice):S===m.GasEstimateTypes.feeMarket?(0,T.getGasPriceInHexWei)(h.medium.suggestedMaxFeePerGas):h.gasPrice?(0,H.getRoundedGasPrice)(h.gasPrice):"0x0");let{gasLimit:v}=l.gas;if(S!==m.GasEstimateTypes.none&&u.stage!==K.EDIT&&l.recipient.address){v=l.sendAsset.type===C.AssetType.token||l.sendAsset.type===C.AssetType.NFT?m.GAS_LIMITS.BASE_TOKEN_ESTIMATE:m.GAS_LIMITS.SIMPLE;v=await(0,H.estimateGasLimitForSend)({gasPrice:p,blockGasLimit:d.currentBlockGasLimit,selectedAddress:we(n),sendToken:l.sendAsset.details,to:l.recipient.address.toLowerCase(),value:l.amount.value,data:l.userInputHexData,isNonStandardEthChain:r,chainId:s})||v}await t.dispatch((0,E.setCustomGasLimit)(v));if(t.getState().send.currentTransactionUUID!==u.currentTransactionUUID)return t.rejectWithValue("draftTransaction changed during initialization.\n        A new initializeSendState action must be dispatched.");const _=(0,T.getIsSwapsChain)(n)&&(0,T.getUseExternalServices)(n)?(await(0,G.fetchBlockedTokens)(s)).map((e=>e.toLowerCase())):[],I=await(0,B.getDisabledSwapAndSendNetworksFromAPI)();return{account:c,chainId:(0,g.getCurrentChainId)(n),tokens:(0,A.getTokens)(n),chainHasChanged:e,disabledSwapAndSendNetworks:I,gasFeeEstimates:h,gasEstimateType:S,gasLimit:v,gasTotal:(0,o.addHexPrefix)((0,P.calcGasTotal)(v,p)),gasEstimatePollToken:f,eip1559support:i,useTokenDetection:(0,T.getUseTokenDetection)(n),tokenAddressList:Object.keys((0,T.getTokenList)(n)),swapsBlockedTokens:_}}));let ee;const te=(0,a.createAsyncThunk)("send/fetchSwapAndSendQuotes",(async({requestTimestamp:e},t)=>{var n,r;const a=t.getState(),s=a[X],i=(0,g.getCurrentChainId)(a),c=s.draftTransactions[s.currentTransactionUUID],u=we(a),d=(0,p.hexToDecimal)(c.amount.value);if(!(Number(d)&&c.sendAsset&&c.receiveAsset&&c.recipient.address))return{quotes:null,requestTimestamp:e};let l=await new Promise(((t,n)=>setTimeout((async()=>{var r,a;e!==ee&&n(new Error(j)),(0,B.getSwapAndSendQuotes)({chainId:i,sourceAmount:d,sourceToken:(null===(r=c.sendAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)||F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[i].address,destinationToken:(null===(a=c.receiveAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address)||F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[i].address,sender:u,recipient:c.recipient.address}).then((e=>t(e))).catch((()=>n(f.SWAPS_QUOTES_ERROR)))}),W)));for(const e of l)e.approvalNeeded&&(e.approvalNeeded.gas=(0,o.addHexPrefix)(await(0,y.estimateGas)(e.approvalNeeded)));if(l=await(0,H.addAdjustedReturnToQuotes)(l,a,null===(n=c.receiveAsset)||void 0===n?void 0:n.details),null===(r=l)||void 0===r||!r.length)throw new Error(f.SWAPS_NO_QUOTES);return{quotes:l,requestTimestamp:e}})),ne=(0,a.createSlice)({name:X,initialState:z,reducers:{addNewDraft:(e,t)=>{e.currentTransactionUUID=(0,c.v4)(),e.draftTransactions[e.currentTransactionUUID]=t.payload,t.payload.id?e.stage=K.EDIT:e.stage=K.ADD_RECIPIENT},addHistoryEntry:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&n.history.push({entry:t.payload,timestamp:Date.now()})},calculateGasTotal:e=>{const t=e.draftTransactions[e.currentTransactionUUID];t&&(t.transactionType===d.TransactionEnvelopeType.feeMarket?t.gas.gasTotal=(0,o.addHexPrefix)((0,P.calcGasTotal)(t.gas.gasLimit,t.gas.maxFeePerGas)):t.gas.gasTotal=(0,o.addHexPrefix)((0,P.calcGasTotal)(t.gas.gasLimit,t.gas.gasPrice)),e.amountMode===V.MAX&&t.sendAsset.type===C.AssetType.native&&ne.caseReducers.updateAmountToMax(e),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))},clearPreviousDrafts:e=>{e.currentTransactionUUID=null,e.draftTransactions={}},resetSendState:e=>({...z,prevSwapAndSendInput:e.prevSwapAndSendInput}),setPrevSwapAndSend:(e,t)=>{e.prevSwapAndSendInput=t.payload},updateAmountMode:(e,t)=>{Object.values(V).includes(t.payload)&&(e.amountMode=t.payload)},updateAmountToMax:e=>{const t=e.draftTransactions[e.currentTransactionUUID];let n="0x0";if((null==t?void 0:t.sendAsset.type)===C.AssetType.token){var r;const e=(null===(r=t.sendAsset.details)||void 0===r?void 0:r.decimals)??0,a=Math.pow(10,Number(e));n=new M.Numeric(t.sendAsset.balance,16).times(a,10).toString()}else{const r=new M.Numeric(t.gas.gasTotal||"0x0",16).add(new M.Numeric(e.gasTotalForLayer1??"0x0",16));n=new M.Numeric(t.sendAsset.balance,16).lessThanOrEqualTo(r)?"0":new M.Numeric(t.sendAsset.balance,16).minus(r).toString()}ne.caseReducers.updateSendAmount(e,{payload:n})},updateAsset:(e,t)=>{const{asset:n,initialAssetSet:r,isReceived:a}=t.payload,s=e.draftTransactions[e.currentTransactionUUID],o=s[a?"receiveAsset":"sendAsset"];o.type=n.type,o.balance=n.balance,o.error=n.error,o.type===C.AssetType.token||o.type===C.AssetType.NFT?o.details=n.details:(o.details=null,s.recipient.error===f.CONTRACT_ADDRESS_ERROR&&(s.recipient.error=null)),a||(s.receiveAsset=o),e.amountMode===V.MAX?(e.amountMode=V.INPUT,ne.caseReducers.updateSendAmount(e,{payload:"0x0"})):!1===r&&(a?s.quotes=Y.quotes:(ne.caseReducers.updateSendAmount(e,{payload:"0x0"}),ne.caseReducers.updateUserInputHexData(e,{payload:""}))),ne.caseReducers.validateSendState(e)},updateGasFeeEstimates:(e,t)=>{const{gasFeeEstimates:n,gasEstimateType:r}=t.payload;let a="0x0";switch(r){case m.GasEstimateTypes.feeMarket:ne.caseReducers.updateGasFees(e,{payload:{transactionType:d.TransactionEnvelopeType.feeMarket,maxFeePerGas:(0,T.getGasPriceInHexWei)(n.medium.suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,T.getGasPriceInHexWei)(n.medium.suggestedMaxPriorityFeePerGas)}});break;case m.GasEstimateTypes.legacy:a=(0,H.getRoundedGasPrice)(n.medium),ne.caseReducers.updateGasFees(e,{payload:{gasPrice:a,type:d.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});break;case m.GasEstimateTypes.ethGasPrice:a=(0,H.getRoundedGasPrice)(n.gasPrice),ne.caseReducers.updateGasFees(e,{payload:{gasPrice:(0,H.getRoundedGasPrice)(n.gasPrice),type:d.TransactionEnvelopeType.legacy,isAutomaticUpdate:!0}});case m.GasEstimateTypes.none:}e.gasPriceEstimate=(0,o.addHexPrefix)(a)},updateGasFees:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&(t.payload.transactionType===d.TransactionEnvelopeType.feeMarket?(n.gas.maxFeePerGas=(0,o.addHexPrefix)(t.payload.maxFeePerGas),n.gas.maxPriorityFeePerGas=(0,o.addHexPrefix)(t.payload.maxPriorityFeePerGas),n.transactionType=d.TransactionEnvelopeType.feeMarket):(t.payload.manuallyEdited&&(n.gas.wasManuallyEdited=!0),n.gas.wasManuallyEdited&&!t.payload.manuallyEdited||(n.gas.gasPrice=(0,o.addHexPrefix)(t.payload.gasPrice)),n.transactionType=d.TransactionEnvelopeType.legacy),ne.caseReducers.calculateGasTotal(e))},updateGasLimit:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&(n.gas.gasLimit=(0,o.addHexPrefix)(t.payload),ne.caseReducers.calculateGasTotal(e))},updateLayer1Fees:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];e.gasTotalForLayer1=t.payload,e.amountMode===V.MAX&&(null==n?void 0:n.sendAsset.type)===C.AssetType.native&&ne.caseReducers.updateAmountToMax(e)},updateRecipient:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n.recipient.error=null,e.recipientInput="",n.recipient.address=t.payload.address??"",n.recipient.nickname=t.payload.nickname??"",""===n.recipient.address?e.stage=K.ADD_RECIPIENT:(e.stage=null===n.id?K.DRAFT:K.EDIT,e.recipientMode=Q.CONTACT_LIST),ne.caseReducers.validateSendState(e)},updateRecipientSearchMode:(e,t)=>{e.recipientInput="",e.recipientMode=t.payload},updateRecipientWarning:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.warning=t.payload},updateRecipientType:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].recipient.type=t.payload},updateDraftTransactionStatus:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].status=t.payload},acknowledgeRecipientWarning:e=>{e.draftTransactions[e.currentTransactionUUID].recipient.recipientWarningAcknowledged=!0,ne.caseReducers.validateSendState(e)},updateRecipientUserInput:(e,t)=>{e.recipientInput=t.payload},updateSendAmount:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n.amount.value=(0,o.addHexPrefix)(t.payload),ne.caseReducers.validateAmountField(e),n.sendAsset.type===C.AssetType.native&&ne.caseReducers.validateGasField(e)},updateUserInputHexData:(e,t)=>{e.draftTransactions[e.currentTransactionUUID].userInputHexData=t.payload},useCustomGas:e=>{e.gasIsSetInModal=!0},useDefaultGas:e=>{e.gasIsSetInModal=!1},validateAmountField:e=>{const t=e.draftTransactions[e.currentTransactionUUID];if(!t)return;const n=new M.Numeric(t.amount.value,16);switch(!0){case t.sendAsset.type===C.AssetType.NFT&&t.sendAsset.details.standard===C.TokenStandard.ERC1155&&"0x0"===t.amount.value:t.amount.error=f.NEGATIVE_OR_ZERO_AMOUNT_TOKENS_ERROR,t.status!==$.INVALID&&ne.caseReducers.validateSendState(e);break;case t.sendAsset.type===C.AssetType.NFT&&t.sendAsset.details.standard===C.TokenStandard.ERC1155&&!(0,h.isERC1155BalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value}):t.amount.error=f.INSUFFICIENT_FUNDS_ERROR,t.status!==$.INVALID&&ne.caseReducers.validateSendState(e);break;case n.isFloat()&&t.sendAsset.type===C.AssetType.NFT&&t.sendAsset.details.standard===C.TokenStandard.ERC1155:t.amount.error=f.FLOAT_TOKENS_ERROR,t.status!==$.INVALID&&ne.caseReducers.validateSendState(e);break;case t.sendAsset.type===C.AssetType.token&&!(0,h.isTokenBalanceSufficient)({tokenBalance:t.sendAsset.balance??"0x0",amount:t.amount.value,decimals:t.sendAsset.details.decimals}):t.amount.error=f.INSUFFICIENT_TOKENS_ERROR,t.status!==$.INVALID&&ne.caseReducers.validateSendState(e);break;case!(0,h.isBalanceSufficient)({amount:t.sendAsset.type===C.AssetType.native?t.amount.value:undefined,balance:t.sendAsset.type===C.AssetType.native?t.sendAsset.balance:e.selectedAccount.balance,gasTotal:t.gas.gasTotal??"0x0"}):{const n=t.sendAsset.type===C.AssetType.native&&!(0,h.isBalanceSufficient)({amount:t.amount.value,balance:t.sendAsset.balance,gasTotal:"0x0"});t.amount.error=n?f.INSUFFICIENT_FUNDS_ERROR:f.INSUFFICIENT_FUNDS_FOR_GAS_ERROR,t.status!==$.INVALID&&ne.caseReducers.validateSendState(e);break}default:t.amount.error=null,t.status===$.INVALID&&ne.caseReducers.validateSendState(e)}},validateGasField:e=>{var t;const n=e.draftTransactions[e.currentTransactionUUID];if(!n)return;const r=!(0,h.isBalanceSufficient)({amount:n.sendAsset.type===C.AssetType.native?n.amount.value:"0x0",balance:(null===(t=n.fromAccount)||void 0===t?void 0:t.balance)??e.selectedAccount.balance,gasTotal:n.gas.gasTotal??"0x0"});n.gas.error=r?f.INSUFFICIENT_FUNDS_ERROR:null},validateRecipientUserInput:(e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];if(n)if(e.recipientMode===Q.MY_ACCOUNTS||""===e.recipientInput||null===e.recipientInput)n.recipient.error=null,n.recipient.warning=null;else{var r;const{tokens:a,tokenAddressList:s,isProbablyAnAssetContract:o}=t.payload;(0,w.isBurnAddress)(e.recipientInput)||(0,w.isPossibleAddress)(e.recipientInput)&&!(0,w.isValidHexAddress)(e.recipientInput,{mixedCaseUseChecksum:!0})?n.recipient.error=f.INVALID_RECIPIENT_ADDRESS_ERROR:(0,_.isOriginContractAddress)(e.recipientInput,null===(r=n.sendAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)?n.recipient.error=f.CONTRACT_ADDRESS_ERROR:n.recipient.error=null,(0,w.isValidHexAddress)(e.recipientInput)&&(s.find((t=>(0,k.isEqualCaseInsensitive)(t,e.recipientInput)))||(0,_.checkExistingAddresses)(e.recipientInput,a))||o?n.recipient.warning=f.KNOWN_RECIPIENT_ADDRESS_WARNING:n.recipient.warning=null}ne.caseReducers.validateSendState(e)},validateSendState:e=>{var t,n,r,a,i;const c=e.draftTransactions[e.currentTransactionUUID];if(ne.caseReducers.addHistoryEntry(e,{payload:"Begin validating send state"}),c){const u=(0,H.getIsDraftSwapAndSend)(c),d=()=>[f.INSUFFICIENT_TOKENS_ERROR,f.INSUFFICIENT_FUNDS_ERROR,f.INSUFFICIENT_FUNDS_FOR_GAS_ERROR].includes(c.amount.error)&&!c.sendAsset.balance,{quotes:l,gas:m}=c,g=l?(0,H.calculateBestQuote)(l):undefined,T=(0,p.hexToDecimal)((null==m?void 0:m.gasTotal)||"0x0")>0&&(0,p.hexToDecimal)((null==m?void 0:m.gasLimit)||"0x0")>0?new M.Numeric(m.gasTotal,16).divide(m.gasLimit,16).toString():undefined;switch(!0){case Boolean(c.amount.error&&!d()):ne.caseReducers.addHistoryEntry(e,{payload:`Amount is in error ${c.amount.error}`}),c.status=$.INVALID;break;case Boolean(c.gas.error):ne.caseReducers.addHistoryEntry(e,{payload:`Gas is in error ${c.gas.error}`}),c.status=$.INVALID;break;case Boolean(c.sendAsset.error):ne.caseReducers.addHistoryEntry(e,{payload:`Send asset is in error ${c.sendAsset.error}`}),c.status=$.INVALID;break;case Boolean(c.receiveAsset.error):ne.caseReducers.addHistoryEntry(e,{payload:`Receive asset is in error ${c.receiveAsset.error}`}),c.status=$.INVALID;break;case c.sendAsset.type===C.AssetType.token&&null===c.sendAsset.details:ne.caseReducers.addHistoryEntry(e,{payload:"Send asset is TOKEN and token details is null"}),c.status=$.INVALID;break;case c.receiveAsset.type===C.AssetType.token&&null===c.receiveAsset.details:ne.caseReducers.addHistoryEntry(e,{payload:"Receive asset is TOKEN and token details is null"}),c.status=$.INVALID;break;case e.stage===K.ADD_RECIPIENT:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is ADD_RECIPIENT"}),c.status=$.INVALID;break;case e.stage===K.INACTIVE:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because stage is INACTIVE"}),c.status=$.INVALID;break;case e.gasEstimateIsLoading:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because gasEstimateIsLoading"}),c.status=$.INVALID;break;case new s.default(c.gas.gasLimit,16).lessThan(new s.default(e.gasLimitMinimum)):ne.caseReducers.addHistoryEntry(e,{payload:`Form is invalid because ${c.gas.gasLimit} is lessThan ${e.gasLimitMinimum}`}),c.status=$.INVALID;break;case"loading"===c.recipient.warning:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning is loading"}),c.status=$.INVALID;break;case c.recipient.warning===f.KNOWN_RECIPIENT_ADDRESS_WARNING&&!1===c.recipient.recipientWarningAcknowledged:ne.caseReducers.addHistoryEntry(e,{payload:"Form is invalid because recipient warning not acknolwedged"}),c.status=$.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)(g.recipient,c.recipient.address)):ne.caseReducers.addHistoryEntry(e,{payload:`Recipient is not match ${c.recipient.address} ${g.recipient}`}),c.status=$.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)(g.trade.from,e.selectedAccount.address)):ne.caseReducers.addHistoryEntry(e,{payload:`Sender is not match ${e.selectedAccount.address} ${g.trade.from}`}),c.status=$.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)((null===(t=c.sendAsset)||void 0===t||null===(t=t.details)||void 0===t?void 0:t.address)||(0,o.zeroAddress)(),g.sourceToken)):ne.caseReducers.addHistoryEntry(e,{payload:`Source token is not match ${null===(n=c.sendAsset)||void 0===n||null===(n=n.details)||void 0===n?void 0:n.address} ${g.sourceToken}`}),c.status=$.INVALID;break;case Boolean(g&&!(0,k.isEqualCaseInsensitive)(g.destinationToken,(null===(r=c.receiveAsset)||void 0===r||null===(r=r.details)||void 0===r?void 0:r.address)||(0,o.zeroAddress)())):ne.caseReducers.addHistoryEntry(e,{payload:`Destination token is not match ${null===(a=c.receiveAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.address} ${g.destinationToken}`}),c.status=$.INVALID;break;case g&&!(0,h.isBalanceSufficient)({amount:c.sendAsset.type===C.AssetType.native?c.amount.value:undefined,balance:e.selectedAccount.balance,gasTotal:(0,P.calcGasTotal)(new M.Numeric((null==g||null===(i=g.gasParams)||void 0===i?void 0:i.maxGas)||0,10).toPrefixedHexString(),T??"0x0")}):c.amount.error||(c.amount.error=f.INSUFFICIENT_FUNDS_FOR_GAS_ERROR),c.status=$.INVALID;break;case u&&!g:ne.caseReducers.addHistoryEntry(e,{payload:"No swap and send quote available"}),c.status=$.INVALID;break;default:ne.caseReducers.addHistoryEntry(e,{payload:"Form is valid"}),c.status=$.VALID}}}},extraReducers:e=>{e.addCase(S.ACCOUNT_CHANGED,((e,t)=>{if(e.stage===K.EDIT&&t.payload.account){const n=e.draftTransactions[e.currentTransactionUUID];n&&n.fromAccount&&n.fromAccount.address===t.payload.account.address&&(n.fromAccount.balance=t.payload.account.balance,n.sendAsset.type===C.AssetType.native&&(n.sendAsset.balance=t.payload.account.balance),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))}})).addCase(S.ADDRESS_BOOK_UPDATED,((e,t)=>{var n;const{addressBook:r}=t.payload,a=e.draftTransactions[e.currentTransactionUUID];a&&null!==(n=r[a.recipient.address])&&void 0!==n&&n.name&&(a.recipient.nickname=r[a.recipient.address].name)})).addCase(S.CLEAR_SWAP_AND_SEND_STATE,(e=>{const t=e.draftTransactions[e.currentTransactionUUID];t.quotes=Y.quotes,t.swapQuotesError=Y.swapQuotesError,t.isSwapQuoteLoading=Y.isSwapQuoteLoading,t.swapQuotesLatestRequestTimestamp=Y.swapQuotesLatestRequestTimestamp,t.timeToFetchQuotes=Y.timeToFetchQuotes})).addCase(J.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(J.fulfilled,((e,t)=>{var n,r;e.gasEstimateIsLoading=!1,null!==(n=t.payload)&&void 0!==n&&n.gasLimit&&ne.caseReducers.updateGasLimit(e,{payload:t.payload.gasLimit}),null!==(r=t.payload)&&void 0!==r&&r.gasTotalForLayer1&&ne.caseReducers.updateLayer1Fees(e,{payload:t.payload.gasTotalForLayer1})})).addCase(J.rejected,(e=>{e.gasEstimateIsLoading=!1})).addCase(S.GAS_FEE_ESTIMATES_UPDATED,((e,t)=>{ne.caseReducers.updateGasFeeEstimates(e,{payload:t.payload})})).addCase(Z.pending,(e=>{e.gasEstimateIsLoading=!0})).addCase(Z.fulfilled,((e,t)=>{e.eip1559support=t.payload.eip1559support,e.selectedAccount.address=t.payload.account.address,e.selectedAccount.balance=t.payload.account.balance,e.prevSwapAndSendInput=z.prevSwapAndSendInput;const n=e.draftTransactions[e.currentTransactionUUID];var r;n&&(n.gas.gasLimit=t.payload.gasLimit,n.gas.gasTotal=t.payload.gasTotal,t.payload.chainHasChanged&&(n.sendAsset.type=C.AssetType.native,n.sendAsset.balance=(null===(r=n.fromAccount)||void 0===r?void 0:r.balance)??e.selectedAccount.balance,n.sendAsset.details=null,n.receiveAsset=Y.receiveAsset));ne.caseReducers.updateGasFeeEstimates(e,{payload:{gasFeeEstimates:t.payload.gasFeeEstimates,gasEstimateType:t.payload.gasEstimateType}}),e.gasEstimatePollToken=t.payload.gasEstimatePollToken,t.payload.gasEstimatePollToken&&(e.gasEstimateIsLoading=!1),e.stage!==K.INACTIVE&&ne.caseReducers.validateRecipientUserInput(e,{payload:{chainId:t.payload.chainId,tokens:t.payload.tokens,useTokenDetection:t.payload.useTokenDetection,tokenAddressList:t.payload.tokenAddressList}}),e.swapsBlockedTokens=t.payload.swapsBlockedTokens,e.disabledSwapAndSendNetworks=t.payload.disabledSwapAndSendNetworks,e.amountMode===V.MAX&&ne.caseReducers.updateAmountToMax(e),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e)})).addCase(Z.rejected,(e=>{e.prevSwapAndSendInput=z.prevSwapAndSendInput})).addCase(te.pending,((e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];var r;n&&(null!==(r=t.meta)&&void 0!==r&&null!==(r=r.arg)&&void 0!==r&&r.isRefreshingQuotes||(n.quotes=Y.quotes),n.swapQuotesError=null,n.isSwapQuoteLoading=!0,n.swapQuotesLatestRequestTimestamp=Math.max(t.meta.arg.requestTimestamp,n.swapQuotesLatestRequestTimestamp));ne.caseReducers.validateSendState(e)})).addCase(te.fulfilled,((e,t)=>{const n=e.draftTransactions[e.currentTransactionUUID];n&&t.payload.requestTimestamp===n.swapQuotesLatestRequestTimestamp&&(n.timeToFetchQuotes=Date.now()-t.payload.requestTimestamp,n.isSwapQuoteLoading=!1,n.swapQuotesError=null,t.payload&&(n.quotes=t.payload.quotes)),ne.caseReducers.validateSendState(e)})).addCase(te.rejected,((e,t)=>{if(t.error.message===j)return;const n=e.draftTransactions[e.currentTransactionUUID];n&&(n.isSwapQuoteLoading=!1,n.swapQuotesError=t.error.message)})).addCase(S.SELECTED_ACCOUNT_CHANGED,((e,t)=>{if(e.stage!==K.EDIT&&t.payload.account){e.selectedAccount.balance=t.payload.account.balance,e.selectedAccount.address=t.payload.account.address;const n=e.draftTransactions[e.currentTransactionUUID];n&&((null==n?void 0:n.sendAsset.type)===C.AssetType.native&&(n.sendAsset.balance=t.payload.account.balance),(null==n?void 0:n.sendAsset.type)!==C.AssetType.token&&(null==n?void 0:n.sendAsset.type)!==C.AssetType.NFT||(n.sendAsset.type=Y.sendAsset.type,n.sendAsset.error=Y.sendAsset.error,n.sendAsset.details=Y.sendAsset.details,n.sendAsset.balance=t.payload.account.balance,n.receiveAsset=Y.receiveAsset,n.amount.value=Y.amount.value),ne.caseReducers.validateAmountField(e),ne.caseReducers.validateGasField(e),ne.caseReducers.validateSendState(e))}})).addCase(S.QR_CODE_DETECTED,((e,t)=>{const n=t.value,r=e.draftTransactions[e.currentTransactionUUID];if(n&&r&&"address"===n.type){const t=n.values.address.toLowerCase();(0,w.isValidHexAddress)(t,{allowNonPrefixed:!1})?r.recipient.address!==t&&ne.caseReducers.updateRecipient(e,{payload:{address:t}}):r.recipient.error=f.INVALID_RECIPIENT_ADDRESS_ERROR}}))}}),{actions:re,reducer:ae}=ne;n.default=ae;const{useDefaultGas:se,useCustomGas:oe,updateGasLimit:ie,validateRecipientUserInput:ce,updateRecipientSearchMode:ue,addHistoryEntry:de,acknowledgeRecipientWarning:le}=re;n.acknowledgeRecipientWarning=le,n.addHistoryEntry=de,n.updateGasLimit=ie,n.useCustomGas=oe,n.useDefaultGas=se;const pe=(0,i.debounce)(((e,t,n)=>{e(de(`sendFlow - user typed ${t.userInput} into recipient input field`)),e(ce(t)),n()}),300),me=(0,i.debounce)((async e=>{await e(J())}),300),fe=(0,i.debounce)(((e,t)=>{e(de(t))}),100);function he(e=!0,t=!1,n=!0){return async(r,a)=>{var s;const o=a()[X],i=null===(s=o.draftTransactions)||void 0===s?void 0:s[null==o?void 0:o.currentTransactionUUID],c=(0,H.getIsDraftSwapAndSend)(i),{quotes:u,swapQuotesError:d,isSwapQuoteLoading:l,swapQuotesLatestRequestTimestamp:p}=i??{};if(c){const e=Date.now();ee=e,r(te({requestTimestamp:e,isRefreshingQuotes:t}))}else(u||d||l||p)&&r({type:S.CLEAR_SWAP_AND_SEND_STATE});e&&(n?await r(J()):await me(r))}}function ge({address:e,nickname:t}){return async(n,r)=>{const a=r(),s=(0,T.getAddressBookEntryOrAccountName)(a,e)??"";await n(re.updateRecipient({address:e,nickname:t||s})),await n(he())}}function Te(e){return async(t,n)=>{t(re.updateRecipientWarning("loading")),t(re.updateDraftTransactionStatus($.INVALID)),await t(re.updateRecipientUserInput(e));const r=n(),a=we(r),s=(0,g.getCurrentChainId)(r),o=(0,A.getTokens)(r),i=(0,T.getUseTokenDetection)(r),c=(0,T.getTokenList)(r),u=Object.keys(c),d=(0,w.isValidHexAddress)(e);let l=!1;if(d){if(await(0,R.isSmartContractAddress)(e)){t(re.updateRecipientType(f.RECIPIENT_TYPES.SMART_CONTRACT));const{symbol:n,decimals:r}=(0,v.getTokenMetadata)(e,c)||{};if(l=n&&r!==undefined,!l)try{const{standard:t}=await(0,y.getTokenStandardAndDetails)(e,a);l=Boolean(t)}catch(e){console.log(e)}}}return new Promise((n=>{pe(t,{userInput:e,chainId:s,tokens:o,useTokenDetection:i,tokenAddressList:u,isProbablyAnAssetContract:l},n)}))}}function ye(e,t){return async(n,r)=>{const a=r();if(n(re.updateSendAmount(e)),a[X].amountMode===V.MAX&&n(re.updateAmountMode(V.INPUT)),await n(he(!0,!1,!1)),t===undefined)return;const{ticker:s}=(0,g.getProviderConfig)(a),o=a[X].draftTransactions[a[X].currentTransactionUUID];let i=e;var c;o.sendAsset.type===C.AssetType.token?i=`${t} ${null===(c=o.sendAsset.details)||void 0===c?void 0:c.symbol}`:i=`${t} ${s||x.EtherDenomination.ETH}`;fe(n,`sendFlow - user set amount to ${i}`)}}function Ee({type:e,details:t,skipComputeEstimatedGasLimit:n,isReceived:r},{initialAssetSet:a=!1}={}){return async(s,i)=>{const c=i(),{ticker:u}=(0,g.getProviderConfig)(c),p=c[X].draftTransactions[c[X].currentTransactionUUID],m=we(c),f=(0,T.getTargetAccount)(c,m);if(e===C.AssetType.native){const t=(0,T.getUnapprovedTransactions)(c),n=null==t?void 0:t[p.id];await s(de(`sendFlow - user set asset of type ${C.AssetType.native} with symbol ${u??x.EtherDenomination.ETH}`)),await s(re.updateAsset({asset:{type:e,details:null,balance:f.balance,error:null},initialAssetSet:a,isReceived:r})),(null==n?void 0:n.type)!==d.TransactionType.tokenMethodTransferFrom&&(null==n?void 0:n.type)!==d.TransactionType.tokenMethodTransfer&&(null==n?void 0:n.type)!==d.TransactionType.tokenMethodSafeTransferFrom||await s(re.updateUserInputHexData(""))}else{var h;await s((0,y.showLoadingIndication)());let n,i=null===(h={[C.TokenStandard.ERC20]:r?["address","symbol","decimals"]:["address","symbol","decimals","balance"],[C.TokenStandard.ERC721]:["address","symbol","tokenId"],[C.TokenStandard.ERC1155]:["address","symbol","tokenId"]}[t.standard])||void 0===h?void 0:h.find((e=>t.collection&&"symbol"===e?t.collection[e]===undefined:t[e]===undefined));if("balance"===i){var E;const e=(0,g.getSelectedNetworkClientId)(c),n=we(c),r=null===(E=(await(0,y.getBalancesInSingleCall)(n,[t.address],e).catch((()=>({}))))[t.address])||void 0===E?void 0:E.hex;t.balance=r?(0,o.addHexPrefix)(r):undefined,i=undefined}n=t.standard&&!i?{...t}:{...t,...await(0,y.getTokenStandardAndDetails)(t.address,m,t.tokenId).catch((()=>{s((0,y.hideLoadingIndication)())}))},await s((0,y.hideLoadingIndication)());const u={type:e,details:n,error:null};if(n.standard===C.TokenStandard.ERC20)u.balance=n.balance&&n.decimals!==undefined?(0,o.addHexPrefix)((0,P.calcTokenAmount)(n.balance,n.decimals).toString(16)):undefined,await s(de(`sendFlow - user set asset to ERC20 token with symbol ${n.symbol} and address ${n.address}`));else if(n.standard===C.TokenStandard.ERC1155||n.standard===C.TokenStandard.ERC721){if(e===C.AssetType.token)throw s((0,y.showModal)({name:"CONVERT_TOKEN_TO_NFT",tokenAddress:n.address})),u.error=O.INVALID_ASSET_TYPE,new Error(O.INVALID_ASSET_TYPE);{let e=!0;try{e=await(0,y.isNftOwner)(m,n.address,n.tokenId)}catch(e){(0,l.getErrorMessage)(e).includes("Unable to verify ownership.")||s((0,y.displayWarning)(e))}if(!e)throw new Error("Send slice initialized as NFT send with an NFT not currently owned by the select account");u.error=null,u.balance=n.balance?(0,o.addHexPrefix)(n.balance):"0x1",await s(de(`sendFlow - user set asset to NFT with tokenId ${n.tokenId} and address ${n.address}`))}}await s(re.updateAsset({asset:u,initialAssetSet:a,isReceived:r}))}await s(he(!1===a&&!n))}}function Se(e){return e[X].currentTransactionUUID}function ve(e){return e[X].draftTransactions[Se(e)]??{}}const _e=n.getBestQuote=(0,a.createSelector)(ve,(({quotes:e,swapQuotesError:t})=>{const n=e;if(t||null==n||!n.length)return undefined;return(0,H.calculateBestQuote)(n)}));function Ae(e){return e[X].gasTotalForLayer1}n.getIsNativeSendPossible=(0,a.createSelector)(ve,Ae,(({gas:{gasTotal:e},sendAsset:t},n)=>{if(t.type!==C.AssetType.native)return!0;const r=t.balance;return new M.Numeric(e||"0x0",16).add(new M.Numeric(n??"0x0",16)).lessThan(r,16)}));function Ie(e){return ve(e).sendAsset}function we(e){var t,n;const r=e[X],a=r.draftTransactions[r.currentTransactionUUID];return(null==a||null===(t=a.fromAccount)||void 0===t?void 0:t.address)??r.selectedAccount.address??(null===(n=(0,T.getSelectedInternalAccount)(e))||void 0===n?void 0:n.address)}function Re(e){const t=ve(e);if(!t.recipient)return{address:"",nickname:"",error:null,warning:null};const n=(0,w.toChecksumHexAddress)(t.recipient.address);return e.metamask.ensResolutionsByAddress?{...t.recipient,nickname:t.recipient.nickname||(0,T.getEnsResolutionByAddress)(e,n)}:t.recipient}n.getIsSwapAndSendDisabledForNetwork=(0,a.createSelector)((e=>(0,g.getCurrentChainId)(e)),(e=>{var t;return(null===(t=e[X])||void 0===t?void 0:t.disabledSwapAndSendNetworks)??[]}),((e,t)=>t.includes(e))),n.getSendAnalyticProperties=(0,a.createSelector)((e=>(0,g.getProviderConfig)(e)),ve,_e,(({chainId:e,ticker:t},n,r)=>{try{var a,s,o,i,c,u;const d=F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].decimals,l=F.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].address,p=(0,H.getIsDraftSwapAndSend)(n),{quotes:m,amount:f,sendAsset:h,receiveAsset:g,swapQuotesError:T,timeToFetchQuotes:y}=n,E=(null==n||null===(a=n.sendAsset)||void 0===a||null===(a=a.details)||void 0===a?void 0:a.symbol)||t,S=(null==n||null===(s=n.receiveAsset)||void 0===s||null===(s=s.details)||void 0===s?void 0:s.symbol)||t,v=(null==n||null===(o=n.receiveAsset)||void 0===o||null===(o=o.details)||void 0===o?void 0:o.decimals)||d,_=(null==n||null===(i=n.sendAsset)||void 0===i||null===(i=i.details)||void 0===i?void 0:i.decimals)||d,A=new M.Numeric((null==f?void 0:f.value)||"0x0",16).toBase(10).shiftedBy(_).toString(),I=null==r?void 0:r.sourceAmount,w=null==r?void 0:r.destinationAmount,R=(null==n||null===(c=n.receiveAsset)||void 0===c||null===(c=c.details)||void 0===c?void 0:c.address)||l,C=(null==n||null===(u=n.sendAsset)||void 0===u||null===(u=u.details)||void 0===u?void 0:u.address)||l;return{is_swap_and_send:p,chain_id:e,token_amount_source:I&&_?(0,P.calcTokenAmount)(I,_).toString():A,token_amount_dest_estimate:w&&v?(0,P.calcTokenAmount)(w,v).toString():undefined,token_symbol_source:E,token_symbol_destination:S,token_address_source:C,token_address_destination:R,results_count:null==m?void 0:m.length,quotes_load_time_ms:y,aggregator_list:null==m?void 0:m.map((({aggregator:e,error:t})=>`${e} (${t||"no error"})`)),aggregator_recommended:null==r?void 0:r.aggregator,errors:[null==f?void 0:f.error,null==h?void 0:h.error,null==g?void 0:g.error,T].filter(Boolean)}}catch(e){return{analyticsError:e}}}))}}},{package:"$root$",file:"ui/ducks/send/send.js"}],[6974,{"../../../shared/constants/swaps":5982,"../../../shared/constants/time":5984,"../../../shared/lib/fetch-with-cache":5994,"../../../shared/lib/swaps-utils":5999,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/hexstring-utils":6021,"../../pages/swaps/swaps.util":7636,lodash:5108},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getDisabledSwapAndSendNetworksFromAPI=async function(){try{const e=[],t=await(0,l.fetchSwapsFeatureFlags)();return s.ALLOWED_PROD_SWAPS_CHAIN_IDS.forEach((n=>{var r;!1===(null===(r=t[(0,l.getNetworkNameByChainId)(n)])||void 0===r||null===(r=r.v2)||void 0===r||null===(r=r.swapAndSend)||void 0===r?void 0:r.enabled)&&e.push(n)})),e}catch(e){return[]}},n.getSwapAndSendQuotes=async function(e){const{chainId:t,...n}=e;n.slippage=n.slippage??m;const r=new URLSearchParams(n),a=`${h}/${f}/networks/${(0,u.hexToDecimal)(t)}/quotes?${r}`,d=await(0,i.default)({url:a,fetchOptions:{method:"GET",headers:{"X-Client-Id":s.SWAPS_CLIENT_ID}},cacheOptions:{cacheRefreshTime:0,timeout:15*o.SECOND},functionName:"getSwapAndSendQuotes"});return d.map((e=>{if(e.trade&&!e.error&&(0,c.validateData)(p,e,a)){const t=(0,c.addHexPrefixToObjectValues)({to:e.trade.to,from:e.trade.from,data:e.trade.data,value:(0,u.decimalToHex)(e.trade.value),gas:(0,u.decimalToHex)(e.gasParams.maxGas)});let{approvalNeeded:r}=e;return r&&(r=(0,c.addHexPrefixToObjectValues)(r)),{...e,slippage:n.slippage,trade:t,approvalNeeded:r}}return undefined})).filter(Boolean)};var r,a=e("lodash"),s=e("../../../shared/constants/swaps"),o=e("../../../shared/constants/time"),i=(r=e("../../../shared/lib/fetch-with-cache"))&&r.__esModule?r:{default:r},c=e("../../../shared/lib/swaps-utils"),u=e("../../../shared/modules/conversion.utils"),d=e("../../../shared/modules/hexstring-utils"),l=e("../../pages/swaps/swaps.util");const p=[{property:"gasParams",type:"object",validator:e=>e&&(0,a.isNumber)(e.maxGas)},{property:"trade",type:"object",validator:e=>e&&(0,c.validHex)(e.data)&&(0,d.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,d.isValidHexAddress)(e.from,{allowNonPrefixed:!1})&&(0,c.truthyString)(e.value)},{property:"approvalNeeded",type:"object",validator:e=>null===e||e&&(0,c.validHex)(e.data)&&(0,d.isValidHexAddress)(e.to,{allowNonPrefixed:!1})&&(0,d.isValidHexAddress)(e.from,{allowNonPrefixed:!1})},{property:"sourceAmount",type:"string",validator:c.truthyDigitString},{property:"destinationAmount",type:"string",validator:c.truthyDigitString},{property:"sourceToken",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"destinationToken",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"sender",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"recipient",type:"string",validator:e=>(0,d.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"aggregator",type:"string",validator:c.truthyString},{property:"aggregatorType",type:"string",validator:c.truthyString},{property:"error",type:"object",validator:e=>null===e||"object"==typeof e},{property:"fee",type:"number"}],m="2",f="v2",h=s.SWAPS_API_V2_BASE_URL}}},{package:"$root$",file:"ui/ducks/send/swap-and-send-utils.ts"}],[6975,{"../../../shared/constants/app":5957,"../../../shared/constants/common":5959,"../../../shared/constants/metametrics":5968,"../../../shared/constants/network":5972,"../../../shared/constants/swaps":5982,"../../../shared/constants/transaction":5986,"../../../shared/lib/swaps-utils":5999,"../../../shared/lib/transactions-controller-utils":6004,"../../../shared/modules/Numeric":6006,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/selectors":6032,"../../../shared/modules/selectors/feature-flags":6031,"../../../shared/modules/selectors/networks":6033,"../../helpers/constants/routes":6985,"../../hooks/useTokenFiatAmount":7110,"../../pages/swaps/swaps.util":7636,"../../selectors":7653,"../../store/actions":7667,"../metamask/metamask":6967,"@metamask/transaction-controller":3344,"@metamask/utils":3434,"@reduxjs/toolkit":3507,"@sentry/browser":3562,"bignumber.js":4195,loglevel:5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GAS_PRICES_LOADING_STATES=void 0,n.cancelSwapsSmartTransaction=function(e){return async(t,n)=>{try{await t((0,d.cancelSmartTransaction)(e))}catch(e){const{swaps:{isFeatureFlagLoaded:r}}=n();if(e.message.startsWith("Fetch error:")&&r){const n=(0,p.parseSmartTransactionsError)(e.message);t(Re(null==n?void 0:n.error))}}}},n.fetchAndSetSwapsGasPriceInfo=n.default=n.clearSwapsState=void 0,n.fetchMetaSwapsGasPriceEstimates=ke,n.fetchSwapsLivenessAndFeatureFlags=n.fetchQuotesAndSetQuoteState=void 0,n.fetchSwapsSmartTransactionFees=Ne,n.setTransactionSettingsOpened=n.setTopAssets=n.setSwapsFromToken=n.setSwapToToken=n.setSwapQuotesFetchStartTime=n.setReviewSwapClickedTimestamp=n.setMaxSlippage=n.setLatestAddedTokenTo=n.setIsFeatureFlagLoaded=n.setFromTokenInputValue=n.setFromTokenError=n.setFetchingQuotes=n.setBalanceError=n.setAggregatorMetadata=n.prepareToLeaveSwaps=n.prepareForRetryGetQuotes=n.navigateBackToPrepareSwap=n.getUsedSwapsGasPrice=n.getUsedQuote=n.getTransactionSettingsOpened=n.getTradeTxId=n.getTopQuote=n.getTopAssets=n.getToToken=n.getSwapsWelcomeMessageSeenStatus=n.getSwapsUserFeeLevel=n.getSwapsTokens=n.getSwapsSTXLoading=n.getSwapsQuoteRefreshTime=n.getSwapsQuotePrefetchingRefreshTime=n.getSwapsNetworkConfig=n.getSwapsFeatureIsLive=n.getSwapsFallbackGasPrice=n.getSwapsErrorKey=n.getSwapsCustomizationModalPrice=n.getSwapsCustomizationModalLimit=n.getSwapGasPriceEstimateData=n.getSmartTransactionsErrorMessageDismissed=n.getSmartTransactionsError=n.getSmartTransactionFees=n.getSmartTransactionEstimatedGas=n.getShowQuoteLoadingScreen=n.getSelectedQuote=n.getReviewSwapClickedTimestamp=n.getQuotesLastFetched=n.getQuotesFetchStartTime=n.getQuotes=n.getPendingSmartTransactions=n.getMaxSlippage=n.getLatestAddedTokenTo=n.getIsFeatureFlagLoaded=n.getIsEstimatedReturnLow=n.getFromTokenInputValue=n.getFromTokenError=n.getFromToken=n.getFetchingQuotes=n.getFetchParams=n.getDestinationTokenInfo=n.getCustomSwapsGasPrice=n.getCustomSwapsGas=n.getCustomMaxPriorityFeePerGas=n.getCustomMaxFeePerGas=n.getCurrentSmartTransactionsError=n.getCurrentSmartTransactionsEnabled=n.getCurrentSmartTransactions=n.getBalanceError=n.getBackgroundSwapRouteState=n.getApproveTxParams=n.getApproveTxId=n.getAggregatorMetadata=void 0,n.shouldShowCustomPriceTooLowWarning=function(e){const{average:t}=B(e),n=G(e);if(!n||t===undefined)return!1;return new w.Numeric(n,16,I.EtherDenomination.WEI).toDenomination(I.EtherDenomination.GWEI).greaterThan(t,10)},n.swapsSlice=n.swapsQuoteSelected=n.swapGasPriceEstimateIsLoading=n.swapGasEstimateLoadingHasFailed=n.swapCustomGasModalPriceEdited=n.swapCustomGasModalLimitEdited=n.swapCustomGasModalClosed=n.signAndSendTransactions=n.signAndSendSwapsSmartTransaction=void 0;var r=e("@reduxjs/toolkit"),a=O(e("bignumber.js")),s=O(e("loglevel")),o=e("@sentry/browser"),i=e("@metamask/transaction-controller"),c=e("@metamask/utils"),u=e("../../../shared/constants/network"),d=e("../../store/actions"),l=e("../../helpers/constants/routes"),p=e("../../pages/swaps/swaps.util"),m=e("../../../shared/modules/conversion.utils"),f=e("../../../shared/modules/selectors/networks"),h=e("../../../shared/modules/selectors/feature-flags"),g=e("../../selectors"),T=e("../../../shared/modules/selectors"),y=e("../../../shared/constants/metametrics"),E=e("../../../shared/constants/swaps"),S=e("../../../shared/constants/transaction"),v=e("../metamask/metamask"),_=e("../../../shared/constants/app"),A=e("../../../shared/lib/transactions-controller-utils"),I=e("../../../shared/constants/common"),w=e("../../../shared/modules/Numeric"),R=e("../../../shared/lib/swaps-utils"),C=e("../../hooks/useTokenFiatAmount");function O(e){return e&&e.__esModule?e:{default:e}}const b=(0,c.createProjectLogger)("swaps"),k=n.GAS_PRICES_LOADING_STATES={INITIAL:"INITIAL",LOADING:"LOADING",FAILED:"FAILED",COMPLETED:"COMPLETED"},N={aggregatorMetadata:null,approveTxId:null,tradeTxId:null,balanceError:!1,fetchingQuotes:!1,fromToken:null,fromTokenInputValue:"",fromTokenError:null,isFeatureFlagLoaded:!1,maxSlippage:E.Slippage.default,quotesFetchStartTime:null,reviewSwapClickedTimestamp:null,topAssets:{},toToken:null,customGas:{price:null,limit:null,loading:k.INITIAL,priceEstimates:{},fallBackPrice:null},currentSmartTransactionsError:"",swapsSTXLoading:!1,transactionSettingsOpened:!1,latestAddedTokenTo:""},D=n.swapsSlice=(0,r.createSlice)({name:"swaps",initialState:N,reducers:{clearSwapsState:()=>N,navigatedBackToBuildQuote:e=>{e.approveTxId=null,e.tradeTxId=null,e.balanceError=!1,e.fetchingQuotes=!1,e.customGas.limit=null,e.customGas.price=null},retriedGetQuotes:e=>{e.approveTxId=null,e.balanceError=!1,e.fetchingQuotes=!1},setAggregatorMetadata:(e,t)=>{e.aggregatorMetadata=t.payload},setBalanceError:(e,t)=>{e.balanceError=t.payload},setFetchingQuotes:(e,t)=>{e.fetchingQuotes=t.payload},setLatestAddedTokenTo:(e,t)=>{e.latestAddedTokenTo=t.payload},setFromToken:(e,t)=>{e.fromToken=t.payload},setFromTokenInputValue:(e,t)=>{e.fromTokenInputValue=t.payload},setFromTokenError:(e,t)=>{e.fromTokenError=t.payload},setIsFeatureFlagLoaded:(e,t)=>{e.isFeatureFlagLoaded=t.payload},setMaxSlippage:(e,t)=>{e.maxSlippage=t.payload},setQuotesFetchStartTime:(e,t)=>{e.quotesFetchStartTime=t.payload},setReviewSwapClickedTimestamp:(e,t)=>{e.reviewSwapClickedTimestamp=t.payload},setTopAssets:(e,t)=>{e.topAssets=t.payload},setToToken:(e,t)=>{e.toToken=t.payload},swapCustomGasModalClosed:e=>{e.customGas.price=null,e.customGas.limit=null},swapCustomGasModalPriceEdited:(e,t)=>{e.customGas.price=t.payload},swapCustomGasModalLimitEdited:(e,t)=>{e.customGas.limit=t.payload},swapGasPriceEstimatesFetchStarted:e=>{e.customGas.loading=k.LOADING},swapGasPriceEstimatesFetchFailed:e=>{e.customGas.loading=k.FAILED},swapGasPriceEstimatesFetchCompleted:(e,t)=>{e.customGas.priceEstimates=t.payload.priceEstimates,e.customGas.loading=k.COMPLETED},retrievedFallbackSwapsGasPrice:(e,t)=>{e.customGas.fallBackPrice=t.payload},setCurrentSmartTransactionsError:(e,t)=>{const n=Object.values(p.StxErrorTypes).includes(t.payload)||t.payload===undefined?t.payload:p.StxErrorTypes.unavailable;e.currentSmartTransactionsError=n},setSwapsSTXSubmitLoading:(e,t)=>{e.swapsSTXLoading=t.payload||!1},setTransactionSettingsOpened:(e,t)=>{e.transactionSettingsOpened=Boolean(t.payload)}}}),{actions:P,reducer:M}=D;n.default=M;n.getAggregatorMetadata=e=>e.swaps.aggregatorMetadata;const x=e=>e.swaps.balanceError;n.getBalanceError=x;const F=e=>e.swaps.fromToken;n.getFromToken=F;n.getFromTokenError=e=>e.swaps.fromTokenError;n.getFromTokenInputValue=e=>e.swaps.fromTokenInputValue;n.getIsFeatureFlagLoaded=e=>e.swaps.isFeatureFlagLoaded;n.getSwapsSTXLoading=e=>e.swaps.swapsSTXLoading;n.getMaxSlippage=e=>e.swaps.maxSlippage;n.getTopAssets=e=>e.swaps.topAssets;const L=e=>e.swaps.toToken;n.getToToken=L;n.getFetchingQuotes=e=>e.swaps.fetchingQuotes;const U=e=>e.swaps.latestAddedTokenTo;n.getLatestAddedTokenTo=U;n.getQuotesFetchStartTime=e=>e.swaps.quotesFetchStartTime;n.getReviewSwapClickedTimestamp=e=>e.swaps.reviewSwapClickedTimestamp;const G=e=>e.swaps.customGas.price;n.getSwapsCustomizationModalPrice=G;n.getSwapsCustomizationModalLimit=e=>e.swaps.customGas.limit;n.swapGasPriceEstimateIsLoading=e=>e.swaps.customGas.loading===k.LOADING;n.swapGasEstimateLoadingHasFailed=e=>e.swaps.customGas.loading===k.INITIAL;const B=e=>e.swaps.customGas.priceEstimates;n.getSwapGasPriceEstimateData=B;const H=e=>e.swaps.customGas.fallBackPrice;n.getSwapsFallbackGasPrice=H;const j=e=>e.swaps.currentSmartTransactionsError;n.getCurrentSmartTransactionsError=j;n.getTransactionSettingsOpened=e=>e.swaps.transactionSettingsOpened;const W=e=>e.metamask.swapsState;n.getSwapsFeatureIsLive=e=>e.metamask.swapsState.swapsFeatureIsLive;n.getSmartTransactionsError=e=>e.appState.smartTransactionsError;n.getSmartTransactionsErrorMessageDismissed=e=>e.appState.smartTransactionsErrorMessageDismissed;const K=e=>{const t=(0,T.getSmartTransactionsEnabled)(e),n=j(e);return t&&!n};n.getCurrentSmartTransactionsEnabled=K;n.getSwapsQuoteRefreshTime=e=>e.metamask.swapsState.swapsQuoteRefreshTime;n.getSwapsQuotePrefetchingRefreshTime=e=>e.metamask.swapsState.swapsQuotePrefetchingRefreshTime;n.getBackgroundSwapRouteState=e=>e.metamask.swapsState.routeState;const $=e=>e.metamask.swapsState.customMaxGas;n.getCustomSwapsGas=$;const q=e=>e.metamask.swapsState.customGasPrice;n.getCustomSwapsGasPrice=q;n.getCustomMaxFeePerGas=e=>e.metamask.swapsState.customMaxFeePerGas;n.getCustomMaxPriorityFeePerGas=e=>e.metamask.swapsState.customMaxPriorityFeePerGas;n.getSwapsUserFeeLevel=e=>e.metamask.swapsState.swapsUserFeeLevel;const V=e=>e.metamask.swapsState.fetchParams;n.getFetchParams=V;const Q=e=>e.metamask.swapsState.quotes;n.getQuotes=Q;n.getQuotesLastFetched=e=>e.metamask.swapsState.quotesLastFetched;const Y=e=>{const{selectedAggId:t,quotes:n}=W(e);return n[t]};n.getSelectedQuote=Y;n.getSwapsErrorKey=e=>{var t;return null===(t=W(e))||void 0===t?void 0:t.errorKey};n.getShowQuoteLoadingScreen=e=>e.swaps.showQuoteLoadingScreen;const z=e=>e.metamask.swapsState.tokens;n.getSwapsTokens=z;n.getSwapsWelcomeMessageSeenStatus=e=>e.metamask.swapsWelcomeMessageHasBeenShown;const X=e=>{const{topAggId:t,quotes:n}=W(e);return n[t]};n.getTopQuote=X;n.getApproveTxId=e=>e.metamask.swapsState.approveTxId;n.getTradeTxId=e=>e.metamask.swapsState.tradeTxId;const J=e=>Y(e)||X(e);n.getUsedQuote=J;n.getDestinationTokenInfo=e=>{var t;return null===(t=V(e))||void 0===t||null===(t=t.metaData)||void 0===t?void 0:t.destinationTokenInfo};const Z=e=>q(e)||H(e);n.getUsedSwapsGasPrice=Z;const ee=e=>{var t;const{approvalNeeded:n}=Y(e)||X(e)||{};if(!n)return null;const r=(null===(t=W(e))||void 0===t?void 0:t.customApproveTxData)||n.data,a=Z(e);return{...n,gasPrice:a,data:r}};n.getApproveTxParams=ee;const te=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t?void 0:t[(0,f.getCurrentChainId)(e)]};n.getCurrentSmartTransactions=te;n.getPendingSmartTransactions=e=>{const t=te(e);return t&&0!==t.length?t.filter((e=>e.status===S.SmartTransactionStatus.pending)):[]};const ne=e=>{const t=J(e);var n;return null!=t&&t.isGasIncludedTrade?{approvalTxFees:t.approvalTxFees,tradeTxFees:t.tradeTxFees}:null===(n=e.metamask.smartTransactionsState)||void 0===n?void 0:n.fees};n.getSmartTransactionFees=ne;n.getSmartTransactionEstimatedGas=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t?void 0:t.estimatedGas};n.getSwapsNetworkConfig=e=>{const{swapsQuoteRefreshTime:t,swapsQuotePrefetchingRefreshTime:n,swapsStxGetTransactionsRefreshTime:r,swapsStxBatchStatusRefreshTime:a,swapsStxStatusDeadline:s,swapsStxMaxFeeMultiplier:o}=e.metamask.swapsState;return{quoteRefreshTime:t,quotePrefetchingRefreshTime:n,stxGetTransactionsRefreshTime:r,stxBatchStatusRefreshTime:a,stxStatusDeadline:s,stxMaxFeeMultiplier:o}};const{clearSwapsState:re,navigatedBackToBuildQuote:ae,retriedGetQuotes:se,swapGasPriceEstimatesFetchCompleted:oe,swapGasPriceEstimatesFetchStarted:ie,swapGasPriceEstimatesFetchFailed:ce,setAggregatorMetadata:ue,setBalanceError:de,setFetchingQuotes:le,setLatestAddedTokenTo:pe,setFromToken:me,setFromTokenError:fe,setFromTokenInputValue:he,setIsFeatureFlagLoaded:ge,setMaxSlippage:Te,setQuotesFetchStartTime:ye,setReviewSwapClickedTimestamp:Ee,setTopAssets:Se,setToToken:ve,swapCustomGasModalPriceEdited:_e,swapCustomGasModalLimitEdited:Ae,retrievedFallbackSwapsGasPrice:Ie,swapCustomGasModalClosed:we,setCurrentSmartTransactionsError:Re,setSwapsSTXSubmitLoading:Ce,setTransactionSettingsOpened:Oe}=P;n.setTransactionSettingsOpened=Oe,n.swapCustomGasModalClosed=we,n.swapCustomGasModalLimitEdited=Ae,n.swapCustomGasModalPriceEdited=_e,n.setSwapToToken=ve,n.setTopAssets=Se,n.setReviewSwapClickedTimestamp=Ee,n.setSwapQuotesFetchStartTime=ye,n.setMaxSlippage=Te,n.setIsFeatureFlagLoaded=ge,n.setFromTokenInputValue=he,n.setFromTokenError=fe,n.setSwapsFromToken=me,n.setLatestAddedTokenTo=pe,n.setFetchingQuotes=le,n.setBalanceError=de,n.setAggregatorMetadata=ue,n.clearSwapsState=re;n.navigateBackToPrepareSwap=e=>async t=>{await t((0,d.setBackgroundSwapRouteState)("")),t(ae()),e.push(l.PREPARE_SWAP_ROUTE)};n.prepareForRetryGetQuotes=()=>async e=>{await e((0,d.resetSwapsPostFetchState)()),e(se())};n.prepareToLeaveSwaps=()=>async e=>{e(re()),await e((0,d.resetBackgroundSwapsState)())};n.swapsQuoteSelected=e=>t=>{t(Ae(null)),t((0,d.setSelectedQuoteAggId)(e)),t((0,d.setSwapsTxGasLimit)(""))};const be=()=>async e=>{const t=await e(ke());null!=t&&t.fast&&e((0,d.setSwapsTxGasPrice)((0,m.decGWEIToHexWEI)(t.fast)))};n.fetchAndSetSwapsGasPriceInfo=be;n.fetchSwapsLivenessAndFeatureFlags=()=>async(e,t)=>{let n={swapsFeatureIsLive:!1};const r=t(),a=(0,f.getCurrentChainId)(r);try{const t=await(0,p.fetchSwapsFeatureFlags)();if(await e((0,d.setSwapsFeatureFlags)(t)),E.ALLOWED_SMART_TRANSACTIONS_CHAIN_IDS.includes(a)){var o;await e(Re(undefined)),await e((0,d.fetchSmartTransactionsLiveness)());((e,t)=>{if(!((null==t?void 0:t.length)<=0))for(const n of t)if(S.IN_PROGRESS_TRANSACTION_STATUSES.includes(n.status)){e(Re(p.StxErrorTypes.regularTxPending));break}})(e,await(0,d.getTransactions)({searchCriteria:{chainId:a,from:null===(o=(0,g.getSelectedInternalAccount)(r))||void 0===o?void 0:o.address}}))}n=(0,p.getSwapsLivenessForNetwork)(a,t)}catch(e){s.default.error("Failed to fetch Swaps feature flags and Swaps liveness, defaulting to false.",e)}return await e((0,d.setSwapsLiveness)(n)),e(ge(!0)),n};n.fetchQuotesAndSetQuoteState=(e,t,n,r,o)=>async(i,c)=>{var u,m,f;const h=c(),S=(0,g.getSelectedNetwork)(h);let _={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();_=(0,p.getSwapsLivenessForNetwork)(S.configuration.chainId,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await i((0,d.setSwapsLiveness)(_)),!_.swapsFeatureIsLive)return void await e.push(l.SWAPS_MAINTENANCE_ROUTE);const I=V(h),w=(0,g.getSelectedAccount)(h),R=x(h),C=(0,g.getSwapsDefaultToken)(h),O=(null==I||null===(u=I.metaData)||void 0===u||null===(u=u.sourceTokenInfo)||void 0===u?void 0:u.symbol)===C.symbol?C:null==I||null===(m=I.metaData)||void 0===m?void 0:m.sourceTokenInfo,b=F(h)||O||{},k=L(h)||(null==I||null===(f=I.metaData)||void 0===f?void 0:f.destinationTokenInfo)||{},{address:N,symbol:D,decimals:P,iconUrl:M,balance:G}=b,{address:B,symbol:H,decimals:j,iconUrl:W}=k;o||(await i((0,d.setBackgroundSwapRouteState)("loading")),e.push(l.LOADING_QUOTES_ROUTE)),i(le(!0));const $=(0,g.getTokenExchangeRates)(h);if(!B||H===C.symbol||$[B]!==undefined||(q=B,Q=(0,v.getTokens)(h),Array.isArray(Q)&&Q.find((e=>e.address.toLowerCase()===q.toLowerCase())))){U(h)!==B&&await i(pe(""))}else await i((0,d.addToken)({address:B,symbol:H,decimals:j,image:W,networkClientId:S.clientId},!0)),await i(pe(B));var q,Q;N&&D!==C.symbol&&!$[N]&&G&&new a.default(G,16).gt(0)&&i((0,d.addToken)({address:N,symbol:D,decimals:P,image:M,networkClientId:S.clientId},!0));const Y=z(h),X=(null==Y?void 0:Y.find((({address:e})=>e===N)))||b,J=(null==Y?void 0:Y.find((({address:e})=>e===B)))||k;i(me(b));const Z=(0,g.isHardwareWallet)(h),ee=(0,g.getHardwareWalletType)(h),te=(0,g.checkNetworkAndAccountSupports1559)(h),ne=(0,T.getSmartTransactionsEnabled)(h),re=K(h);r({event:y.MetaMetricsEventName.QuotesRequested,category:y.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:D,token_from_amount:String(t),token_to:H,request_type:R?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,is_hardware_wallet:Z,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:re,stx_user_opt_in:(0,T.getSmartTransactionsOptInStatusForMetrics)(h),anonymizedData:!0}});try{var ae;const e=Date.now();i(ye(e));const a=i((0,d.fetchAndSetQuotes)({slippage:n,sourceToken:N,destinationToken:B,value:t,fromAddress:w.address,balanceError:R,sourceDecimals:P,enableGasIncludedQuotes:re&&(0,T.getSmartTransactionsPreferenceEnabled)(h)},{sourceTokenInfo:X,destinationTokenInfo:J,accountBalance:w.balance,networkClientId:S.clientId})),s=te?null:i(be()),[[o,c]]=await Promise.all([a,s]);if(0===(null===(ae=Object.values(o))||void 0===ae?void 0:ae.length))r({event:"No Quotes Available",category:y.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:D,token_from_amount:String(t),token_to:H,request_type:R?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,is_hardware_wallet:Z,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:re,stx_user_opt_in:(0,T.getSmartTransactionsOptInStatusForMetrics)(h)}}),i((0,d.setSwapsErrorKey)(E.QUOTES_NOT_AVAILABLE_ERROR));else{var se;const a=o[c],s=(0,A.calcTokenAmount)(a.destinationAmount,a.decimals||18).toString(10);r({event:y.MetaMetricsEventName.QuotesReceived,category:y.MetaMetricsEventCategory.Swaps,sensitiveProperties:{token_from:D,token_from_amount:String(t),token_to:H,token_to_amount:s,request_type:R?"Quote":"Order",slippage:n,custom_slippage:n!==E.Slippage.default,response_time:Date.now()-e,best_quote_source:a.aggregator,available_quotes:null===(se=Object.values(o))||void 0===se?void 0:se.length,is_hardware_wallet:Z,hardware_wallet_type:ee,stx_enabled:ne,current_stx_enabled:re,stx_user_opt_in:(0,T.getSmartTransactionsOptInStatusForMetrics)(h),gas_included:a.isGasIncludedTrade,anonymizedData:!0}}),i((0,d.setInitialGasEstimate)(c))}}catch(e){if(e.message===E.SWAPS_FETCH_ORDER_CONFLICT)return void s.default.debug("Swap fetch order conflict detected; ignoring older request");s.default.error("Error fetching quotes: ",e),i((0,d.setSwapsErrorKey)(E.ERROR_FETCHING_QUOTES))}i(le(!1))};n.signAndSendSwapsSmartTransaction=({unsignedTransaction:e,trackEvent:t,history:n,additionalTrackingParams:r})=>async(a,c)=>{var u,f,S,v,I,w,R,C,O;a(Ce(!0));const b=c(),k=V(b),N=(0,g.isHardwareWallet)(b),D=(0,g.getHardwareWalletType)(b),{metaData:P,value:M,slippage:x}=k,{sourceTokenInfo:F={},destinationTokenInfo:L={}}=P,U=J(b),G=(0,g.getSelectedNetwork)(b),B=(0,h.getFeatureFlagsByChainId)(b);a((0,d.setSmartTransactionsRefreshInterval)(null==B||null===(u=B.smartTransactions)||void 0===u?void 0:u.batchStatusPollingInterval));const H=U.trade,j=(0,A.calcTokenAmount)(U.destinationAmount,L.decimals||18).toPrecision(8),W=(0,T.getSmartTransactionsEnabled)(b),$=K(b),q={token_from:F.symbol,token_from_amount:String(M),token_to:L.symbol,token_to_amount:j,slippage:x,custom_slippage:2!==x,best_quote_source:null===(f=X(b))||void 0===f?void 0:f.aggregator,available_quotes:null===(S=Q(b))||void 0===S?void 0:S.length,other_quote_selected:U.aggregator!==(null===(v=X(b))||void 0===v?void 0:v.aggregator),other_quote_selected_source:U.aggregator===(null===(I=X(b))||void 0===I?void 0:I.aggregator)?"":U.aggregator,average_savings:null===(w=U.savings)||void 0===w?void 0:w.total,performance_savings:null===(R=U.savings)||void 0===R?void 0:R.performance,fee_savings:null===(C=U.savings)||void 0===C?void 0:C.fee,median_metamask_fee:null===(O=U.savings)||void 0===O?void 0:O.medianMetaMaskFee,is_hardware_wallet:N,hardware_wallet_type:D,stx_enabled:W,current_stx_enabled:$,stx_user_opt_in:(0,T.getSmartTransactionsOptInStatusForMetrics)(b),gas_included:U.isGasIncludedTrade,...r};if(t({event:"STX Swap Started",category:y.MetaMetricsEventCategory.Swaps,sensitiveProperties:q}),!(0,p.isContractAddressValid)(H.to,G.configuration.chainId))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:q.token_from,token_to:q.token_to,contract_address:H.to}}),await a((0,d.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void n.push(l.SWAPS_ERROR_ROUTE);const Y=ee(b);let z,Z;try{var te;let t;if(Y&&(Z={...Y,value:"0x0"}),t=U.isGasIncludedTrade?ne(b):await a(Ne({unsignedTransaction:e,approveTxParams:Z,fallbackOnNotEnoughFunds:!0})),!t)return s.default.error('"fetchSwapsSmartTransactionFees" failed'),a(Ce(!1)),void a(Re(p.StxErrorTypes.unavailable));var re;if(Y)Z.gas=`0x${(0,m.decimalToHex)((null===(re=t.approvalTxFees)||void 0===re?void 0:re.gasLimit)||0)}`,Z.chainId=G.configuration.chainId,z=await a((0,d.signAndSendSmartTransaction)({unsignedTransaction:Z,smartTransactionFees:t.approvalTxFees}));e.gas=`0x${(0,m.decimalToHex)((null===(te=t.tradeTxFees)||void 0===te?void 0:te.gasLimit)||0)}`,e.chainId=G.configuration.chainId;const r=await a((0,d.signAndSendSmartTransaction)({unsignedTransaction:e,smartTransactionFees:t.tradeTxFees})),o=L.address,c=L.decimals,u=L.symbol,f=F.symbol;await a((0,d.updateSmartTransaction)(r,{origin:_.ORIGIN_METAMASK,destinationTokenAddress:o,destinationTokenDecimals:c,destinationTokenSymbol:u,sourceTokenSymbol:f,swapMetaData:q,swapTokenValue:M,type:i.TransactionType.swap})),z&&await a((0,d.updateSmartTransaction)(z,{origin:_.ORIGIN_METAMASK,type:i.TransactionType.swapApproval,sourceTokenSymbol:f})),n.push(l.SMART_TRANSACTION_STATUS_ROUTE),a(Ce(!1))}catch(e){console.log("signAndSendSwapsSmartTransaction error",e),a(Ce(!1));const{swaps:{isFeatureFlagLoaded:t}}=c();if(e.message.startsWith("Fetch error:")&&t){const t=(0,p.parseSmartTransactionsError)(e.message);a(Re(null==t?void 0:t.error))}}};function ke(){return async(e,t)=>{const n=t(),r=(0,f.getCurrentChainId)(n);let a;e(ie());try{a=await(0,p.fetchSwapsGasPrices)(r)}catch(t){var o;if(s.default.warn("Fetching swaps gas prices failed:",t),null===(o=t.message)||void 0===o||!o.match(/NetworkError|Fetch failed with status:/u))throw t;e(ce());try{const t=await global.ethereumProvider.request({method:"eth_gasPrice",params:[]}),n=(0,m.hexWEIToDecGWEI)(t.toString(10));return e(Ie(n)),null}catch(e){return console.error("Failed to retrieve fallback gas price: ",e),null}}return e(oe({priceEstimates:a})),a}}function Ne({unsignedTransaction:e,approveTxParams:t,fallbackOnNotEnoughFunds:n=!1}){return async(r,a)=>{const{swaps:{isFeatureFlagLoaded:s}}=a();try{return await r((0,d.fetchSmartTransactionFees)(e,t))}catch(e){if(e.message.startsWith("Fetch error:")&&s){const t=(0,p.parseSmartTransactionsError)(e.message);(n||(null==t?void 0:t.error)!==p.StxErrorTypes.notEnoughFunds)&&r(Re(null==t?void 0:t.error))}}return null}}n.signAndSendTransactions=(e,t,n)=>async(r,c)=>{var h,S,_,I,w,C,O,k,N,D,P;const M=c(),x=(0,f.getCurrentChainId)(M),F=(0,g.isHardwareWallet)(M),L=(0,g.checkNetworkAndAccountSupports1559)(M);let U={swapsFeatureIsLive:!1};try{const e=await(0,p.fetchSwapsFeatureFlags)();U=(0,p.getSwapsLivenessForNetwork)(x,e)}catch(e){s.default.error("Failed to fetch Swaps liveness, defaulting to false.",e)}if(await r((0,d.setSwapsLiveness)(U)),!U.swapsFeatureIsLive)return void await e.push(l.SWAPS_MAINTENANCE_ROUTE);const G=$(M),H=V(M),{metaData:j,value:W,slippage:q}=H,{sourceTokenInfo:Y={},destinationTokenInfo:z={}}=j;await r((0,d.setBackgroundSwapRouteState)("awaiting")),await r((0,d.stopPollingForQuotes)()),F||e.push(l.AWAITING_SWAP_ROUTE);const{fast:te}=B(M),ne=J(M),re=ne.trade,ae=ee(M);let se;if(L){const e=(0,v.getGasFeeEstimates)(M),{estimatedBaseFee:t="0"}=e;se=await(0,p.getSwap1559GasFeeEstimates)(ne.trade,ae,t,x),b("Received 1559 gas fee estimates",se)}const oe=null===(h=se)||void 0===h?void 0:h.tradeGasFeeEstimates,ie=null===(S=se)||void 0===S?void 0:S.approveGasFeeEstimates,ce=new a.default((null==ne?void 0:ne.gasEstimate)||0,16).round(0).toString(16),ue=(0,R.calculateMaxGasLimit)(null==ne?void 0:ne.gasEstimate,null==ne?void 0:ne.gasMultiplier,null==ne?void 0:ne.maxGas,G),de=Z(M);re.gas=ue,L?(re.maxFeePerGas=null==oe?void 0:oe.maxFeePerGas,re.maxPriorityFeePerGas=null==oe?void 0:oe.maxPriorityFeePerGas,delete re.gasPrice):re.gasPrice=de;const le=(0,g.getUSDConversionRate)(M),pe=(0,A.calcTokenAmount)(ne.destinationAmount,z.decimals||18).toPrecision(8),me=(null==ne?void 0:ne.gasEstimateWithRefund)||`0x${(0,m.decimalToHex)((null==ne?void 0:ne.averageGas)||0)}`,fe=(0,A.calcGasTotal)(me,L?null==oe?void 0:oe.baseAndPriorityFeePerGas:de),he=null===(_=ne.approvalNeeded)||void 0===_?void 0:_.gas,ge=he?(0,A.calcGasTotal)(he,L?null==ie?void 0:ie.baseAndPriorityFeePerGas:de):"0x0",Te=(0,m.getValueFromWeiHex)({value:(0,m.addHexes)(fe,ge),toCurrency:"usd",conversionRate:le,numberOfDecimals:6}),ye=(0,T.getSmartTransactionsEnabled)(M),Ee=K(M),Se={token_from:Y.symbol,token_from_amount:String(W),token_to:z.symbol,token_to_amount:pe,slippage:q,custom_slippage:2!==q,best_quote_source:null===(I=X(M))||void 0===I?void 0:I.aggregator,available_quotes:null===(w=Q(M))||void 0===w?void 0:w.length,other_quote_selected:ne.aggregator!==(null===(C=X(M))||void 0===C?void 0:C.aggregator),other_quote_selected_source:ne.aggregator===(null===(O=X(M))||void 0===O?void 0:O.aggregator)?"":ne.aggregator,gas_fees:Te,estimated_gas:new a.default(ce,16).toString(10),suggested_gas_price:te,used_gas_price:(0,m.hexWEIToDecGWEI)(de),average_savings:null===(k=ne.savings)||void 0===k?void 0:k.total,performance_savings:null===(N=ne.savings)||void 0===N?void 0:N.performance,fee_savings:null===(D=ne.savings)||void 0===D?void 0:D.fee,median_metamask_fee:null===(P=ne.savings)||void 0===P?void 0:P.medianMetaMaskFee,is_hardware_wallet:F,hardware_wallet_type:(0,g.getHardwareWalletType)(M),stx_enabled:ye,current_stx_enabled:Ee,stx_user_opt_in:(0,T.getSmartTransactionsOptInStatusForMetrics)(M),...n};if(L&&(Se.max_fee_per_gas=null==oe?void 0:oe.maxFeePerGas,Se.max_priority_fee_per_gas=null==oe?void 0:oe.maxPriorityFeePerGas,Se.base_and_priority_fee_per_gas=null==oe?void 0:oe.baseAndPriorityFeePerGas),t({event:y.MetaMetricsEventName.SwapStarted,category:y.MetaMetricsEventCategory.Swaps,sensitiveProperties:Se}),!(0,p.isContractAddressValid)(re.to,x))return(0,o.captureMessage)("Invalid contract address",{extra:{token_from:Se.token_from,token_to:Se.token_to,contract_address:re.to}}),await r((0,d.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void e.push(l.SWAPS_ERROR_ROUTE);let ve;if(F&&e.push(l.AWAITING_SIGNATURES_ROUTE),ae){L&&(ae.maxFeePerGas=null==ie?void 0:ie.maxFeePerGas,ae.maxPriorityFeePerGas=null==ie?void 0:ie.maxPriorityFeePerGas,delete ae.gasPrice),b("Creating approve transaction",ae);try{if(ve=await(0,d.addTransactionAndWaitForPublish)({...ae,amount:"0x0"},{requireApproval:!1,type:i.TransactionType.swapApproval,swaps:{hasApproveTx:!0,meta:{type:i.TransactionType.swapApproval,sourceTokenSymbol:Y.symbol}}}),[u.CHAIN_IDS.LINEA_MAINNET,u.CHAIN_IDS.LINEA_GOERLI,u.CHAIN_IDS.LINEA_SEPOLIA].includes(x)){b("Delaying submitting trade tx to make Linea confirmation more likely");const e=new Promise((e=>setTimeout(e,5e3)));await e}}catch(t){return b("Approve transaction failed",t),await r((0,d.setSwapsErrorKey)(E.SWAP_FAILED_ERROR)),void e.push(l.SWAPS_ERROR_ROUTE)}}b("Creating trade transaction",re);try{var _e,Ae;await(0,d.addTransactionAndWaitForPublish)(re,{requireApproval:!1,type:i.TransactionType.swap,swaps:{hasApproveTx:Boolean(ae),meta:{estimatedBaseFee:null===(_e=se)||void 0===_e?void 0:_e.estimatedBaseFee,sourceTokenSymbol:Y.symbol,destinationTokenSymbol:z.symbol,type:i.TransactionType.swap,destinationTokenDecimals:z.decimals,destinationTokenAddress:z.address,swapMetaData:Se,swapTokenValue:W,approvalTxId:null===(Ae=ve)||void 0===Ae?void 0:Ae.id}}})}catch(t){const n=t.message.includes("EthAppPleaseEnableContractData")?E.CONTRACT_DATA_DISABLED_ERROR:E.SWAP_FAILED_ERROR;return b("Trade transaction failed",t),await r((0,d.setSwapsErrorKey)(n)),void e.push(l.SWAPS_ERROR_ROUTE)}F&&e.push(l.AWAITING_SWAP_ROUTE),await(0,d.forceUpdateMetamaskState)(r)};n.getIsEstimatedReturnLow=({usedQuote:e,rawNetworkFees:t})=>{var n,r,s,o,i,c;const u=(0,A.calcTokenAmount)(null==e?void 0:e.sourceAmount,null==e||null===(n=e.sourceTokenInfo)||void 0===n?void 0:n.decimals),d=(0,C.useTokenFiatAmount)(null==e||null===(r=e.sourceTokenInfo)||void 0===r?void 0:r.address,u||0,null==e||null===(s=e.sourceTokenInfo)||void 0===s?void 0:s.symbol,{showFiat:!0},!0,null,!1),l=(0,A.calcTokenAmount)(null==e?void 0:e.destinationAmount,null==e||null===(o=e.destinationTokenInfo)||void 0===o?void 0:o.decimals),p=(0,C.useTokenFiatAmount)(null==e||null===(i=e.destinationTokenInfo)||void 0===i?void 0:i.address,l||0,null==e||null===(c=e.destinationTokenInfo)||void 0===c?void 0:c.symbol,{showFiat:!0},!0,null,!1),m=p&&t?new a.default(p).minus(new a.default(t)):null;return!(!d||!m)&&m.lt(new a.default(d).times(1-E.SWAPS_QUOTE_MAX_RETURN_DIFFERENCE_PERCENTAGE))}}}},{package:"$root$",file:"ui/ducks/swaps/swaps.js"}],[6977,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SUPPORT_REQUEST_LINK=n.SECONDARY=n.PRIMARY=n.PASSWORD_MIN_LENGTH=n.OUTDATED_BROWSER_VERSIONS=n.METAMETRICS_SETTINGS_LINK=n.FIXED_PRERENDER_BROWSER_VERSIONS=n.CONTRACT_ADDRESS_LINK=n.BROKEN_PRERENDER_BROWSER_VERSIONS=void 0;n.PRIMARY="PRIMARY",n.SECONDARY="SECONDARY",n.METAMETRICS_SETTINGS_LINK="https://support.metamask.io/privacy-and-security/how-to-manage-your-metametrics-settings",n.SUPPORT_REQUEST_LINK="https://support.metamask.io",n.CONTRACT_ADDRESS_LINK="https://support.metamask.io/managing-my-tokens/moving-your-tokens/why-am-i-being-warned-about-sending-tokens-to-a-contract/",n.PASSWORD_MIN_LENGTH=8,n.OUTDATED_BROWSER_VERSIONS={chrome:"<109",edge:"<109",firefox:"<102",opera:"<95"},n.BROKEN_PRERENDER_BROWSER_VERSIONS={chrome:">=113",edge:">=113"},n.FIXED_PRERENDER_BROWSER_VERSIONS={windows:{chrome:">=120",edge:">=120"},macos:{chrome:">=120",edge:">=120"},chrome:">=121",edge:">=121"}}}},{package:"$root$",file:"ui/helpers/constants/common.ts"}],[6979,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypographyVariant=n.TextVariant=n.TextTransform=n.TextColor=n.TextAlign=n.TEXT_TRANSFORM=n.TEXT_ALIGN=n.Size=n.Severity=n.SEVERITIES=n.OverflowWrap=n.OVERFLOW_WRAP=n.JustifyContent=n.IconColor=n.FontWeight=n.FontStyle=n.FlexWrap=n.FlexDirection=n.FRACTIONS=n.FONT_WEIGHT=n.FONT_STYLE=n.FLEX_WRAP=n.FLEX_DIRECTION=n.Display=n.DISPLAY=n.Color=n.BorderStyle=n.BorderRadius=n.BorderColor=n.BlockSize=n.BackgroundColor=n.BREAKPOINTS=n.BLOCK_SIZES=n.AlignItems=void 0;n.Color=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.backgroundMuted="background-muted",e.textDefault="text-default",e.textAlternative="text-alternative",e.textMuted="text-muted",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.borderDefault="border-default",e.borderMuted="border-muted",e.overlayDefault="overlay-default",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.errorInverse="error-inverse",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.warningInverse="warning-inverse",e.successDefault="success-default",e.successMuted="success-muted",e.successInverse="success-inverse",e.infoDefault="info-default",e.infoMuted="info-muted",e.infoInverse="info-inverse",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.transparent="transparent",e.localhost="localhost",e.inherit="inherit",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e}({}),n.BackgroundColor=function(e){return e.backgroundDefault="background-default",e.backgroundAlternative="background-alternative",e.backgroundMuted="background-muted",e.backgroundAlternativeSoft="background-alternative-soft",e.backgroundHover="background-hover",e.backgroundPressed="background-pressed",e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconMuted="icon-muted",e.overlayDefault="overlay-default",e.overlayAlternative="overlay-alternative",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e}({}),n.BorderColor=function(e){return e.borderDefault="border-default",e.borderMuted="border-muted",e.primaryDefault="primary-default",e.primaryAlternative="primary-alternative",e.primaryMuted="primary-muted",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorMuted="error-muted",e.warningDefault="warning-default",e.warningMuted="warning-muted",e.successDefault="success-default",e.successMuted="success-muted",e.infoDefault="info-default",e.infoMuted="info-muted",e.mainnet="mainnet",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaSepolia="linea-sepolia",e.lineaMainnet="linea-mainnet",e.transparent="transparent",e.localhost="localhost",e.backgroundDefault="background-default",e}({}),n.TextColor=function(e){return e.textDefault="text-default",e.textAlternative="text-alternative",e.textAlternativeSoft="text-alternative-soft",e.textMuted="text-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorAlternative="error-alternative",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.IconColor=function(e){return e.iconDefault="icon-default",e.iconAlternative="icon-alternative",e.iconAlternativeSoft="icon-alternative-soft",e.iconMuted="icon-muted",e.overlayInverse="overlay-inverse",e.primaryDefault="primary-default",e.primaryInverse="primary-inverse",e.errorDefault="error-default",e.errorInverse="error-inverse",e.successDefault="success-default",e.successInverse="success-inverse",e.warningDefault="warning-default",e.warningInverse="warning-inverse",e.infoDefault="info-default",e.infoInverse="info-inverse",e.inherit="inherit",e.goerli="goerli",e.sepolia="sepolia",e.lineaGoerli="linea-goerli",e.lineaGoerliInverse="linea-goerli-inverse",e.lineaSepolia="linea-sepolia",e.lineaSepoliaInverse="linea-sepolia-inverse",e.lineaMainnet="linea-mainnet",e.lineaMainnetInverse="linea-mainnet-inverse",e.goerliInverse="goerli-inverse",e.sepoliaInverse="sepolia-inverse",e.transparent="transparent",e}({}),n.TypographyVariant=function(e){return e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.H7="h7",e.H8="h8",e.H9="h9",e.paragraph="p",e.span="span",e}({}),n.TextVariant=function(e){return e.displayMd="display-md",e.headingLg="heading-lg",e.headingMd="heading-md",e.headingSm="heading-sm",e.bodyLgMedium="body-lg-medium",e.bodyMd="body-md",e.bodyMdMedium="body-md-medium",e.bodyMdBold="body-md-bold",e.bodySm="body-sm",e.bodySmMedium="body-sm-medium",e.bodySmBold="body-sm-bold",e.bodyXs="body-xs",e.bodyXsMedium="body-xs-medium",e.inherit="inherit",e}({}),n.Size=function(e){return e.XXS="xxs",e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.inherit="inherit",e.auto="auto",e}({}),n.BorderStyle=function(e){return e.dashed="dashed",e.solid="solid",e.dotted="dotted",e.double="double",e.none="none",e}({}),n.BorderRadius=function(e){return e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e.none="none",e.pill="pill",e.full="full",e}({}),n.AlignItems=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.baseline="baseline",e.stretch="stretch",e}({}),n.JustifyContent=function(e){return e.flexStart="flex-start",e.flexEnd="flex-end",e.center="center",e.spaceAround="space-around",e.spaceBetween="space-between",e.spaceEvenly="space-evenly",e}({}),n.FlexDirection=function(e){return e.Row="row",e.RowReverse="row-reverse",e.Column="column",e.ColumnReverse="column-reverse",e}({});n.FLEX_DIRECTION={ROW:"row",ROW_REVERSE:"row-reverse",COLUMN:"column",COLUMN_REVERSE:"column-reverse"};n.FlexWrap=function(e){return e.Wrap="wrap",e.WrapReverse="wrap-reverse",e.NoWrap="nowrap",e}({});n.FLEX_WRAP={WRAP:"wrap",WRAP_REVERSE:"wrap-reverse",NO_WRAP:"nowrap"};n.Display=function(e){return e.Block="block",e.Flex="flex",e.Grid="grid",e.InlineBlock="inline-block",e.Inline="inline",e.InlineFlex="inline-flex",e.InlineGrid="inline-grid",e.ListItem="list-item",e.None="none",e}({});n.DISPLAY={BLOCK:"block",FLEX:"flex",GRID:"grid",INLINE_BLOCK:"inline-block",INLINE:"inline",INLINE_FLEX:"inline-flex",INLINE_GRID:"inline-grid",LIST_ITEM:"list-item",NONE:"none"};const r=n.FRACTIONS={HALF:"1/2",ONE_THIRD:"1/3",TWO_THIRDS:"2/3",ONE_FOURTH:"1/4",TWO_FOURTHS:"2/4",THREE_FOURTHS:"3/4",ONE_FIFTH:"1/5",TWO_FIFTHS:"2/5",THREE_FIFTHS:"3/5",FOUR_FIFTHS:"4/5",ONE_SIXTH:"1/6",TWO_SIXTHS:"2/6",THREE_SIXTHS:"3/6",FOUR_SIXTHS:"4/6",FIVE_SIXTHS:"5/6",ONE_TWELFTH:"1/12",TWO_TWELFTHS:"2/12",THREE_TWELFTHS:"3/12",FOUR_TWELFTHS:"4/12",FIVE_TWELFTHS:"5/12",SIX_TWELFTHS:"6/12",SEVEN_TWELFTHS:"7/12",EIGHT_TWELFTHS:"8/12",NINE_TWELFTHS:"9/12",TEN_TWELFTHS:"10/12",ELEVEN_TWELFTHS:"11/12"};n.BlockSize=function(e){return e.Zero="0",e.Half="1/2",e.OneThird="1/3",e.TwoThirds="2/3",e.OneFourth="1/4",e.TwoFourths="2/4",e.ThreeFourths="3/4",e.OneFifth="1/5",e.TwoFifths="2/5",e.ThreeFifths="3/5",e.FourFifths="4/5",e.OneSixth="1/6",e.TwoSixths="2/6",e.ThreeSixths="3/6",e.FourSixths="4/6",e.FiveSixths="5/6",e.OneTwelfth="1/12",e.TwoTwelfths="2/12",e.ThreeTwelfths="3/12",e.FourTwelfths="4/12",e.FiveTwelfths="5/12",e.SixTwelfths="6/12",e.SevenTwelfths="7/12",e.EightTwelfths="8/12",e.NineTwelfths="9/12",e.TenTwelfths="10/12",e.ElevenTwelfths="11/12",e.Screen="screen",e.Max="max",e.Min="min",e.Full="full",e}({});n.BLOCK_SIZES={...r,SCREEN:"screen",MAX:"max",MIN:"min",FULL:"full"};n.TextAlign=function(e){return e.Left="left",e.Center="center",e.Right="right",e.Justify="justify",e.End="end",e.Start="start",e}({});n.TEXT_ALIGN={LEFT:"left",CENTER:"center",RIGHT:"right",JUSTIFY:"justify",END:"end",START:"start"};n.TextTransform=function(e){return e.Uppercase="uppercase",e.Lowercase="lowercase",e.Capitalize="capitalize",e}({});n.TEXT_TRANSFORM={UPPERCASE:"uppercase",LOWERCASE:"lowercase",CAPITALIZE:"capitalize"};n.FontWeight=function(e){return e.Bold="bold",e.Medium="medium",e.Normal="normal",e}({});n.FONT_WEIGHT={BOLD:"bold",MEDIUM:"medium",NORMAL:"normal"};n.OverflowWrap=function(e){return e.BreakWord="break-word",e.Anywhere="anywhere",e.Normal="normal",e}({});n.OVERFLOW_WRAP={BREAK_WORD:"break-word",ANYWHERE:"anywhere",NORMAL:"normal"};n.FontStyle=function(e){return e.Italic="italic",e.Normal="normal",e}({});n.FONT_STYLE={ITALIC:"italic",NORMAL:"normal"};n.Severity=function(e){return e.Danger="danger",e.Warning="warning",e.Info="info",e.Success="success",e}({});n.SEVERITIES={DANGER:"danger",WARNING:"warning",INFO:"info",SUCCESS:"success"},n.BREAKPOINTS=["base","sm","md","lg"]}}},{package:"$root$",file:"ui/helpers/constants/design-system.ts"}],[698,{"./DataItem":696,"./cbor-sync":697},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var r=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return r.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return r.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return r.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return r.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return r.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return r.addWriter}});var a=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return a.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[6980,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY=n.UNSENDABLE_ASSET_ERROR_KEY=n.TRANSACTION_ERROR_KEY=n.IS_SIGNING_OR_SUBMITTING=n.INVALID_ASSET_TYPE=n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY=n.INSUFFICIENT_FUNDS_ERROR_KEY=n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY=n.GAS_PRICE_EXCESSIVE_ERROR_KEY=n.GAS_LIMIT_TOO_LOW_ERROR_KEY=n.ETH_GAS_PRICE_FETCH_WARNING_KEY=void 0;n.INSUFFICIENT_FUNDS_ERROR_KEY="insufficientFunds",n.GAS_LIMIT_TOO_LOW_ERROR_KEY="gasLimitTooLow",n.TRANSACTION_ERROR_KEY="transactionError",n.ETH_GAS_PRICE_FETCH_WARNING_KEY="ethGasPriceFetchWarning",n.GAS_PRICE_FETCH_FAILURE_ERROR_KEY="gasPriceFetchFailed",n.GAS_PRICE_EXCESSIVE_ERROR_KEY="gasPriceExcessive",n.UNSENDABLE_ASSET_ERROR_KEY="unsendableAsset",n.INSUFFICIENT_FUNDS_FOR_GAS_ERROR_KEY="insufficientFundsForGas",n.INVALID_ASSET_TYPE="invalidAssetType",n.IS_SIGNING_OR_SUBMITTING="isSigningOrSubmitting",n.USER_OP_CONTRACT_DEPLOY_ERROR_KEY="userOpContractDeployError"}}},{package:"$root$",file:"ui/helpers/constants/error-keys.js"}],[6983,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NOTIFICATIONS_EXPIRATION_DELAY=void 0;n.NOTIFICATIONS_EXPIRATION_DELAY=1e4}}},{package:"$root$",file:"ui/helpers/constants/notifications.ts"}],[6985,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UNLOCK_ROUTE=n.SWAPS_ROUTE=n.SWAPS_NOTIFICATION_ROUTE=n.SWAPS_MAINTENANCE_ROUTE=n.SWAPS_ERROR_ROUTE=n.SNAP_SETTINGS_ROUTE=n.SNAPS_VIEW_ROUTE=n.SNAPS_ROUTE=n.SMART_TRANSACTION_STATUS_ROUTE=n.SIGNATURE_REQUEST_PATH=n.SETTINGS_ROUTE=n.SEND_ROUTE=n.SECURITY_ROUTE=n.REVIEW_PERMISSIONS=n.REVEAL_SEED_ROUTE=n.RESTORE_VAULT_ROUTE=n.PREPARE_SWAP_ROUTE=n.PERMISSIONS=n.PATH_NAME_MAP=n.ONBOARDING_WELCOME_ROUTE=n.ONBOARDING_UNLOCK_ROUTE=n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE=n.ONBOARDING_ROUTE=n.ONBOARDING_REVIEW_SRP_ROUTE=n.ONBOARDING_PRIVACY_SETTINGS_ROUTE=n.ONBOARDING_PIN_EXTENSION_ROUTE=n.ONBOARDING_METAMETRICS=n.ONBOARDING_IMPORT_WITH_SRP_ROUTE=n.ONBOARDING_HELP_US_IMPROVE_ROUTE=n.ONBOARDING_CREATE_PASSWORD_ROUTE=n.ONBOARDING_CONFIRM_SRP_ROUTE=n.ONBOARDING_COMPLETION_ROUTE=n.NOTIFICATIONS_SETTINGS_ROUTE=n.NOTIFICATIONS_ROUTE=n.NEW_ACCOUNT_ROUTE=n.NETWORKS_ROUTE=n.NETWORKS_FORM_ROUTE=n.LOCK_ROUTE=n.LOADING_QUOTES_ROUTE=n.IMPORT_TOKEN_ROUTE=n.IMPORT_TOKENS_ROUTE=n.GENERAL_ROUTE=n.EXPERIMENTAL_ROUTE=n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH=n.DEVELOPER_OPTIONS_ROUTE=n.DEFAULT_ROUTE=n.DECRYPT_MESSAGE_REQUEST_PATH=n.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE=n.CROSS_CHAIN_SWAP_ROUTE=n.CONTACT_VIEW_ROUTE=n.CONTACT_LIST_ROUTE=n.CONTACT_EDIT_ROUTE=n.CONTACT_ADD_ROUTE=n.CONNECT_SNAP_UPDATE_ROUTE=n.CONNECT_SNAP_RESULT_ROUTE=n.CONNECT_SNAP_INSTALL_ROUTE=n.CONNECT_SNAPS_CONNECT_ROUTE=n.CONNECT_ROUTE=n.CONNECT_HARDWARE_ROUTE=n.CONNECT_CONFIRM_PERMISSIONS_ROUTE=n.CONNECTIONS=n.CONNECTED_ROUTE=n.CONNECTED_ACCOUNTS_ROUTE=n.CONFIRM_TRANSFER_FROM_PATH=n.CONFIRM_TRANSACTION_ROUTE=n.CONFIRM_TOKEN_METHOD_PATH=n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH=n.CONFIRM_SEND_TOKEN_PATH=n.CONFIRM_SEND_ETHER_PATH=n.CONFIRM_SAFE_TRANSFER_FROM_PATH=n.CONFIRM_INCREASE_ALLOWANCE_PATH=n.CONFIRM_IMPORT_TOKEN_ROUTE=n.CONFIRM_DEPLOY_CONTRACT_PATH=n.CONFIRM_APPROVE_PATH=n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE=n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE=n.CONFIRMATION_V_NEXT_ROUTE=n.AWAITING_SWAP_ROUTE=n.AWAITING_SIGNATURES_ROUTE=n.ASSET_ROUTE=n.ADVANCED_ROUTE=n.ADD_POPULAR_CUSTOM_NETWORK=n.ADD_NETWORK_ROUTE=n.ABOUT_US_ROUTE=void 0;const r=n.PATH_NAME_MAP={};r[n.DEFAULT_ROUTE="/"]="Home";r[n.UNLOCK_ROUTE="/unlock"]="Unlock Page";r[n.LOCK_ROUTE="/lock"]="Lock Page";const a=n.ASSET_ROUTE="/asset";r[`${a}/:asset/:id`]="Asset Page",r[`${a}/image/:asset/:id`]="Nft Image Page";r[n.SETTINGS_ROUTE="/settings"]="Settings Page";r[n.GENERAL_ROUTE="/settings/general"]="General Settings Page";r[n.ADVANCED_ROUTE="/settings/advanced"]="Advanced Settings Page";n.DEVELOPER_OPTIONS_ROUTE="/settings/developer-options";r[n.EXPERIMENTAL_ROUTE="/settings/experimental"]="Experimental Settings Page";r[n.SECURITY_ROUTE="/settings/security"]="Security Settings Page";r[n.ABOUT_US_ROUTE="/settings/about-us"]="About Us Page";r[n.NETWORKS_ROUTE="/settings/networks"]="Network Settings Page";r[n.NETWORKS_FORM_ROUTE="/settings/networks/form"]="Network Settings Page Form";r[n.ADD_NETWORK_ROUTE="/settings/networks/add-network"]="Add Network From Settings Page Form";r[n.ADD_POPULAR_CUSTOM_NETWORK="/settings/networks/add-popular-custom-network"]="Add Network From A List Of Popular Custom Networks";r[n.CONTACT_LIST_ROUTE="/settings/contact-list"]="Contact List Settings Page";r[`${n.CONTACT_EDIT_ROUTE="/settings/contact-list/edit-contact"}/:address`]="Edit Contact Settings Page";r[n.CONTACT_ADD_ROUTE="/settings/contact-list/add-contact"]="Add Contact Settings Page";r[`${n.CONTACT_VIEW_ROUTE="/settings/contact-list/view-contact"}/:address`]="View Contact Settings Page";r[`${n.SNAP_SETTINGS_ROUTE="/settings/snap"}/:snapId`]="Snap Settings Page";r[n.REVEAL_SEED_ROUTE="/seed"]="Reveal Secret Recovery Phrase Page";r[n.RESTORE_VAULT_ROUTE="/restore-vault"]="Restore Vault Page";r[n.IMPORT_TOKEN_ROUTE="/import-token"]="Import Token Page";r[n.IMPORT_TOKENS_ROUTE="/import-tokens"]="Import Tokens Page";r[n.CONFIRM_IMPORT_TOKEN_ROUTE="/confirm-import-token"]="Confirm Import Token Page";r[n.CONFIRM_ADD_SUGGESTED_TOKEN_ROUTE="/confirm-add-suggested-token"]="Confirm Add Suggested Token Page";r[n.NEW_ACCOUNT_ROUTE="/new-account"]="New Account Page";r[n.CONFIRM_ADD_SUGGESTED_NFT_ROUTE="/confirm-add-suggested-nft"]="Confirm Add Suggested NFT Page";r[n.CONNECT_HARDWARE_ROUTE="/new-account/connect"]="Connect Hardware Wallet Page";r[n.SEND_ROUTE="/send"]="Send Page";r[n.CONNECTIONS="/connections"]="Connections";r[n.PERMISSIONS="/permissions"]="Permissions";n.REVIEW_PERMISSIONS="/review-permissions";const s=n.CONNECT_ROUTE="/connect";r[`${s}/:id`]="Connect To Site Confirmation Page";r[`${s}/:id${n.CONNECT_CONFIRM_PERMISSIONS_ROUTE="/confirm-permissions"}`]="Grant Connected Site Permissions Confirmation Page";r[`${s}/:id${n.CONNECT_SNAPS_CONNECT_ROUTE="/snaps-connect"}`]="Snaps Connect Page";r[`${s}/:id${n.CONNECT_SNAP_INSTALL_ROUTE="/snap-install"}`]="Snap Install Page";r[`${s}/:id${n.CONNECT_SNAP_UPDATE_ROUTE="/snap-update"}`]="Snap Update Page";r[`${s}/:id${n.CONNECT_SNAP_RESULT_ROUTE="/snap-install-result"}`]="Snap Install Result Page";r[n.SNAPS_ROUTE="/snaps"]="Snaps List Page";r[`${n.SNAPS_VIEW_ROUTE="/snaps/view"}/:snapId`]="Snap View Page";const o=n.NOTIFICATIONS_ROUTE="/notifications";r[o]="Notifications Page",r[`${o}/:uuid`]="Notification Detail Page";r[n.NOTIFICATIONS_SETTINGS_ROUTE="/notifications/settings"]="Notifications Settings Page";r[n.CONNECTED_ROUTE="/connected"]="Sites Connected To This Account Page";r[n.CONNECTED_ACCOUNTS_ROUTE="/connected/accounts"]="Accounts Connected To This Site Page";const i=n.CONFIRM_TRANSACTION_ROUTE="/confirm-transaction";r[i]="Confirmation Root Page",r[`${i}/:id`]="Confirmation Root Page";const c=n.CONFIRMATION_V_NEXT_ROUTE="/confirmation";r[c]="New Confirmation Page",r[`${c}/:id`]="New Confirmation Page";r[`${i}/:id${n.CONFIRM_SEND_ETHER_PATH="/send-ether"}`]="Confirm Send Ether Transaction Page";r[`${i}/:id${n.CONFIRM_SEND_TOKEN_PATH="/send-token"}`]="Confirm Send Token Transaction Page";r[`${i}/:id${n.CONFIRM_DEPLOY_CONTRACT_PATH="/deploy-contract"}`]="Confirm Deploy Contract Transaction Page";r[`${i}/:id${n.CONFIRM_APPROVE_PATH="/approve"}`]="Confirm Approve Transaction Page";r[`${i}/:id${n.CONFIRM_SET_APPROVAL_FOR_ALL_PATH="/set-approval-for-all"}`]="Confirm Set Approval For All Transaction Page";r[`${i}/:id${n.CONFIRM_TRANSFER_FROM_PATH="/transfer-from"}`]="Confirm Transfer From Transaction Page";r[`${i}/:id${n.CONFIRM_SAFE_TRANSFER_FROM_PATH="/safe-transfer-from"}`]="Confirm Safe Transfer From Transaction Page";r[`${i}/:id${n.CONFIRM_TOKEN_METHOD_PATH="/token-method"}`]="Confirm Token Method Transaction Page";r[`${i}/:id${n.CONFIRM_INCREASE_ALLOWANCE_PATH="/increase-allowance"}`]="Confirm Increase Allowance Transaction Page";r[`${i}/:id${n.SIGNATURE_REQUEST_PATH="/signature-request"}`]="Signature Request Page";r[`${i}/:id${n.DECRYPT_MESSAGE_REQUEST_PATH="/decrypt-message-request"}`]="Decrypt Message Request Page";r[`${i}/:id${n.ENCRYPTION_PUBLIC_KEY_REQUEST_PATH="/encryption-public-key-request"}`]="Encryption Public Key Request Page";r[n.CROSS_CHAIN_SWAP_ROUTE="/cross-chain"]="Prepare Cross Chain Swap Page";n.CROSS_CHAIN_SWAP_TX_DETAILS_ROUTE="/cross-chain/tx-details",n.SWAPS_ROUTE="/swaps";r[n.PREPARE_SWAP_ROUTE="/swaps/prepare-swap-page"]="Prepare Swap Page";r[n.SWAPS_NOTIFICATION_ROUTE="/swaps/notification-page"]="Swaps Notification Page";r[n.LOADING_QUOTES_ROUTE="/swaps/loading-quotes"]="Swaps Loading Quotes Page";n.AWAITING_SIGNATURES_ROUTE="/swaps/awaiting-signatures",n.SMART_TRANSACTION_STATUS_ROUTE="/swaps/smart-transaction-status";r[n.AWAITING_SWAP_ROUTE="/swaps/awaiting-swap"]="Swaps Awaiting Swaps Page";r[n.SWAPS_ERROR_ROUTE="/swaps/swaps-error"]="Swaps Error Page";n.SWAPS_MAINTENANCE_ROUTE="/swaps/maintenance",n.ONBOARDING_ROUTE="/onboarding",n.ONBOARDING_REVIEW_SRP_ROUTE="/onboarding/review-recovery-phrase",n.ONBOARDING_CONFIRM_SRP_ROUTE="/onboarding/confirm-recovery-phrase",n.ONBOARDING_CREATE_PASSWORD_ROUTE="/onboarding/create-password",n.ONBOARDING_COMPLETION_ROUTE="/onboarding/completion",n.ONBOARDING_UNLOCK_ROUTE="/onboarding/unlock",n.ONBOARDING_HELP_US_IMPROVE_ROUTE="/onboarding/help-us-improve",n.ONBOARDING_IMPORT_WITH_SRP_ROUTE="/onboarding/import-with-recovery-phrase",n.ONBOARDING_SECURE_YOUR_WALLET_ROUTE="/onboarding/secure-your-wallet",n.ONBOARDING_PRIVACY_SETTINGS_ROUTE="/onboarding/privacy-settings",n.ONBOARDING_PIN_EXTENSION_ROUTE="/onboarding/pin-extension",n.ONBOARDING_WELCOME_ROUTE="/onboarding/welcome",n.ONBOARDING_METAMETRICS="/onboarding/metametrics"}}},{package:"$root$",file:"ui/helpers/constants/routes.ts"}],[699,{"./RegistryType":688,"./ScriptExpression":689,"./utils":701},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./utils"),a=e("./RegistryType"),s=e("./ScriptExpression"),o=Object.values(a.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),i=Object.values(s.ScriptExpressions).map((e=>e.getTag()));(0,r.patchTags)(o.concat(i))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[6991,{"@metamask/transaction-controller":3344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_CATEGORY_HASH=n.PRIORITY_STATUS_HASH=n.PENDING_STATUS_HASH=void 0;var r=e("@metamask/transaction-controller");const a=n.PENDING_STATUS_HASH={[r.TransactionStatus.unapproved]:!0,[r.TransactionStatus.approved]:!0,[r.TransactionStatus.submitted]:!0};n.PRIORITY_STATUS_HASH={...a,[r.TransactionStatus.confirmed]:!0},n.TOKEN_CATEGORY_HASH={[r.TransactionType.tokenMethodApprove]:!0,[r.TransactionType.tokenMethodSetApprovalForAll]:!0,[r.TransactionType.tokenMethodTransfer]:!0,[r.TransactionType.tokenMethodTransferFrom]:!0,[r.TransactionType.tokenMethodIncreaseAllowance]:!0}}}},{package:"$root$",file:"ui/helpers/constants/transactions.js"}],[6992,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={ADD_CUSTOM_TOKENS:"https://support.metamask.io/managing-my-tokens/custom-tokens/how-to-display-tokens-in-metamask/",ADD_MISSING_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-add-missing-accounts-after-restoring-with-secret-recovery-phrase/",BASIC_SAFETY:"https://support.metamask.io/privacy-and-security/basic-safety-and-security-tips-for-metamask/",CUSTOMIZE_NONCE:"https://support.metamask.io/transactions-and-gas/transactions/how-to-customize-a-transaction-nonce/",GAS_FEES:"https://support.metamask.io/transactions-and-gas/gas-fees/",SWAPS_GAS_FEES:"https://support.metamask.io/token-swaps/user-guide-swaps/#gas-fees",HARDWARE_CONNECTION:"https://support.metamask.io/privacy-and-security/hardware-wallet-hub/",IMPORT_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/how-to-import-an-account/",IMPORTED_ACCOUNTS:"https://support.metamask.io/managing-my-wallet/accounts-and-addresses/what-are-imported-accounts-/",INFURA_BLOCKAGE:"https://support.metamask.io/troubleshooting/why-infura-cannot-serve-certain-areas/",LEDGER_FIREFOX_U2F_GUIDE:"https://support.ledger.com/hc/en-us/articles/10371387758493-MetaMask-Firefox-Ledger-Integration-Issue?support=true",LEGACY_WEB3:"https://support.metamask.io/third-party-platforms-and-dapps/metamask-legacy-web3/",NFT_TOKENS:"https://support.metamask.io/nfts/nft-tokens-in-your-metamask-wallet/",PASSWORD_AND_SRP_ARTICLE:"https://support.metamask.io/getting-started/user-guide-secret-recovery-phrase-password-and-private-keys/",SECRET_RECOVERY_PHRASE:"https://support.metamask.io/privacy-and-security/what-is-a-secret-recovery-phrase-and-how-to-keep-your-crypto-wallet-secure/",NON_CUSTODIAL_WALLET:"https://support.metamask.io/getting-started/metamask-is-a-self-custodial-wallet/",SPEEDUP_CANCEL:"https://support.metamask.io/transactions-and-gas/transactions/how-to-speed-up-or-cancel-a-pending-transaction/",SUPPORT_URL:"https://support.metamask.io",TOKEN_ALLOWANCE_WITH_SPENDING_CAP:"https://support.metamask.io/privacy-and-security/how-to-customize-token-approvals-with-a-spending-cap/",TOKEN_SAFETY_PRACTICES:"https://support.metamask.io/managing-my-tokens/token-safety-practices/",UNKNOWN_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/the-risks-of-connecting-to-an-unknown-network/",USER_GUIDE_CUSTOM_NETWORKS:"https://support.metamask.io/networks-and-sidechains/managing-networks/user-guide-custom-networks-and-sidechains/",USER_GUIDE_DAPPS:"https://support.metamask.io/third-party-platforms-and-dapps/user-guide-dapps/",USER_GUIDE_GAS:"https://support.metamask.io/transactions-and-gas/gas-fees/user-guide-gas/",VERIFY_CUSTOM_NETWORK:"https://support.metamask.io/networks-and-sidechains/managing-networks/verifying-custom-network-information/",NETWORK_DEPRECATED:"https://support.metamask.io/networks-and-sidechains/eth-on-testnets/"}}}},{package:"$root$",file:"ui/helpers/constants/zendesk-url.js"}],[7,{"../../../shared/modules/object.utils":6026},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_UI_STATE=n.SENTRY_BACKGROUND_STATE=n.MMI_SENTRY_BACKGROUND_STATE=void 0;var r=e("../../../shared/modules/object.utils");n.MMI_SENTRY_BACKGROUND_STATE={MMIController:{opts:!0},CustodyController:{store:!0},MmiConfigurationController:{store:!0,configurationClient:!0}};const a=n.SENTRY_BACKGROUND_STATE={AccountsController:{internalAccounts:{accounts:!1,selectedAccount:!1}},AccountTracker:{accounts:!1,accountsByChainId:!1,currentBlockGasLimit:!0,currentBlockGasLimitByChainId:!0},AddressBookController:{addressBook:!1},AlertController:{alertEnabledness:!0,unconnectedAccountAlertShownOrigins:!1,web3ShimUsageOrigins:!1},AnnouncementController:{announcements:!1},AuthenticationController:{isSignedIn:!1,sessionData:{profile:!0,accessToken:!1,expiresIn:!0}},NetworkOrderController:{orderedNetworkList:[]},AccountOrderController:{pinnedAccountList:[],hiddenAccountList:[]},AppMetadataController:{currentAppVersion:!0,currentMigrationVersion:!0,previousAppVersion:!0,previousMigrationVersion:!0},ApprovalController:{approvalFlows:!1,pendingApprovals:!1,pendingApprovalCount:!1},AppStateController:{browserEnvironment:!0,connectedStatusPopoverHasBeenShown:!0,currentPopupId:!1,onboardingDate:!1,currentExtensionPopupId:!1,defaultHomeActiveTabName:!0,fullScreenGasPollTokens:!0,hadAdvancedGasFeesSetPriorToMigration92_3:!0,isRampCardClosed:!0,nftsDetectionNoticeDismissed:!0,nftsDropdownState:!0,notificationGasPollTokens:!0,outdatedBrowserWarningLastShown:!0,popupGasPollTokens:!0,qrHardware:!0,recoveryPhraseReminderHasBeenShown:!0,recoveryPhraseReminderLastShown:!0,showBetaHeader:!0,showPermissionsTour:!0,showNetworkBanner:!0,showAccountBanner:!0,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,showTestnetMessageInDropdown:!0,surveyLinkLastClickedOrClosed:!0,snapsInstallPrivacyWarningShown:!0,termsOfUseLastAgreed:!0,throttledOrigins:!1,timeoutMinutes:!0,trezorModel:!0},MultichainBalancesController:{balances:!1},MultichainAssetsController:{accountsAssets:!1,assetsMetadata:!1},BridgeController:{bridgeState:{bridgeFeatureFlags:{extensionConfig:{support:!1,chains:{}}},quoteRequest:{walletAddress:!1,srcTokenAddress:!0,slippage:!0,srcChainId:!0,destChainId:!0,destTokenAddress:!0,srcTokenAmount:!0},quotes:[],quotesInitialLoadTime:!0,quotesLastFetched:!0,quotesLoadingStatus:!0,quoteFetchError:!0,quotesRefreshCount:!0}},BridgeStatusController:{bridgeStatusState:{txHistory:!1}},CronjobController:{jobs:!1},CurrencyController:{currentCurrency:!0,currencyRates:!0},DecryptMessageController:{unapprovedDecryptMsgs:!1,unapprovedDecryptMsgCount:!0},EncryptionPublicKeyController:{unapprovedEncryptionPublicKeyMsgs:!1,unapprovedEncryptionPublicKeyMsgCount:!0},EnsController:{ensResolutionsByAddress:!1,ensEntries:!1},GasFeeController:{estimatedGasFeeTimeBounds:!0,gasEstimateType:!0,gasFeeEstimates:!0,gasFeeEstimatesByChainId:!0,nonRPCGasFeeApisDisabled:!1},KeyringController:{isUnlocked:!0,keyrings:!1},LoggingController:{logs:!1},NotificationServicesController:{subscriptionAccountsSeen:!1,isMetamaskNotificationsFeatureSeen:!1,isNotificationServicesEnabled:!1,isFeatureAnnouncementsEnabled:!1,metamaskNotificationsList:!1,metamaskNotificationsReadList:!1,isCheckingAccountsPresence:!1,isFetchingMetamaskNotifications:!1,isUpdatingMetamaskNotifications:!1,isUpdatingMetamaskNotificationsAccount:!1},MetaMetricsController:{eventsBeforeMetricsOptIn:!1,fragments:!1,metaMetricsId:!0,participateInMetaMetrics:!0,segmentApiCalls:!1,traits:!1,dataCollectionForMarketing:!1,marketingCampaignCookieId:!0,latestNonAnonymousEventTimestamp:!0},MetaMetricsDataDeletionController:{metaMetricsDataDeletionId:!0,metaMetricsDataDeletionTimestamp:!0},NameController:{names:!1,nameSources:!1,useExternalNameSources:!1},NetworkController:{networkConfigurations:!1,networksMetadata:!0,selectedNetworkClientId:!1},NftController:{allNftContracts:!1,allNfts:!1,ignoredNfts:!1},OnboardingController:{completedOnboarding:!0,firstTimeFlowType:!0,onboardingTabs:!1,seedPhraseBackedUp:!0},PPOMController:{securityAlertsEnabled:!1,storageMetadata:[],versionInfo:[]},PermissionController:{subjects:!1},PermissionLogController:{permissionActivityLog:!1,permissionHistory:!1},PhishingController:{},PreferencesController:{advancedGasFee:!0,currentLocale:!0,dismissSeedBackUpReminder:!0,overrideContentSecurityPolicyHeader:!0,featureFlags:!0,forgottenPassword:!0,identities:!1,incomingTransactionsPreferences:!0,isIpfsGatewayEnabled:!1,ipfsGateway:!1,knownMethodData:!1,ledgerTransportType:!0,lostIdentities:!1,openSeaEnabled:!0,preferences:{autoLockTimeLimit:!0,hideZeroBalanceTokens:!0,showExtensionInFullSizeView:!0,showFiatInTestnets:!0,showTestNetworks:!0,smartTransactionsOptInStatus:!0,tokenNetworkFilter:{},showNativeTokenAsMainBalance:!0,petnamesEnabled:!0,showConfirmationAdvancedDetails:!0,privacyMode:!1},useExternalServices:!1,selectedAddress:!1,snapRegistryList:!1,theme:!0,signatureSecurityAlertResponses:!1,use4ByteResolution:!0,useAddressBarEnsResolution:!0,useBlockie:!0,useCurrencyRateCheck:!0,useMultiAccountBalanceChecker:!0,useNftDetection:!0,usePhishDetect:!0,useTokenDetection:!0,useTransactionSimulations:!0,enableMV3TimestampSave:!0},RemoteFeatureFlagController:{remoteFeatureFlags:!0,cacheTimestamp:!1},NotificationServicesPushController:{fcmToken:!1},MultichainRatesController:{fiatCurrency:!0,rates:!0,cryptocurrencies:!0},QueuedRequestController:{queuedRequestCount:!0},SelectedNetworkController:{domains:!1},SignatureController:{unapprovedPersonalMsgCount:!0,unapprovedPersonalMsgs:!1,unapprovedTypedMessages:!1,unapprovedTypedMessagesCount:!0},SmartTransactionsController:{smartTransactionsState:{fees:{approvalTxFees:!0,tradeTxFees:!0},liveness:!0,smartTransactions:!1,userOptIn:!0,userOptInV2:!0}},SnapController:{snaps:!1},SnapInterfaceController:{interfaces:!1},SnapInsightsController:{insights:!1},SnapsRegistry:{database:!1,lastUpdated:!1,databaseUnavailable:!1},SubjectMetadataController:{subjectMetadata:!1},SwapsController:{swapsState:{approveTxId:!1,customApproveTxData:!1,customGasPrice:!0,customMaxFeePerGas:!0,customMaxGas:!0,customMaxPriorityFeePerGas:!0,errorKey:!0,fetchParams:!0,quotes:!1,quotesLastFetched:!0,quotesPollingLimitEnabled:!0,routeState:!0,saveFetchedQuotes:!0,selectedAggId:!0,swapsFeatureFlags:!0,swapsFeatureIsLive:!0,swapsQuotePrefetchingRefreshTime:!0,swapsQuoteRefreshTime:!0,swapsStxBatchStatusRefreshTime:!0,swapsStxStatusDeadline:!0,swapsStxGetTransactionsRefreshTime:!0,swapsStxMaxFeeMultiplier:!0,swapsUserFeeLevel:!0,tokens:!1,topAggId:!1,tradeTxId:!1}},TokenDetectionController:{[r.AllProperties]:!1},TokenListController:{preventPollingOnNetworkRestart:!0,tokenList:!1,tokensChainsCache:{[r.AllProperties]:!1}},TokenBalancesController:{tokenBalances:!1},TokenRatesController:{marketData:!1},TokensController:{allDetectedTokens:{[r.AllProperties]:!1},allIgnoredTokens:{[r.AllProperties]:!1},allTokens:{[r.AllProperties]:!1},detectedTokens:!1,ignoredTokens:!1,tokens:!1},TransactionController:{transactions:!1,lastFetchedBlockNumbers:!1,methodData:!1},TxController:{transactions:!1},UserOperationController:{userOperations:!1},UserStorageController:{isProfileSyncingEnabled:!0,isProfileSyncingUpdateLoading:!1,hasAccountSyncingSyncedAtLeastOnce:!1,isAccountSyncingReadyToBeDispatched:!1}},s=Object.values(a).reduce(((e,t)=>({...e,...t})),{});n.SENTRY_UI_STATE={gas:!0,history:!0,appState:{customNonceValue:!0,isAccountMenuOpen:!0,isNetworkMenuOpen:!0,nextNonce:!0,pendingTokens:!1,welcomeScreenSeen:!0,slides:!1,confirmationExchangeRates:!0},metamask:{...s,isInitialized:!0,useSafeChainsListValidation:!0,watchEthereumAccountEnabled:!1,bitcoinSupportEnabled:!1,bitcoinTestnetSupportEnabled:!1,addSnapAccountEnabled:!1,snapsAddSnapAccountModalDismissed:!1,switchedNetworkDetails:!1,switchedNetworkNeverShowMessage:!1,newPrivacyPolicyToastClickedOrClosed:!1,newPrivacyPolicyToastShownDate:!1},unconnectedAccount:!0}}}},{package:"$root$",file:"app/scripts/constants/sentry-state.ts"}],[700,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[7004,{"../../../app/build-types/main/fox.json":3},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.getBuildSpecificAsset=function(e){const t="main";if(!a[t]||!Object.keys(a[t]).includes(e))return console.error(`Cannot find asset "${e}" for build "${t}", returning main build asset.`),a.main[e];return a[t][e]},n.isBeta=function(){return!1};const a={main:{foxMeshJson:((r=e("../../../app/build-types/main/fox.json"))&&r.__esModule?r:{default:r}).default}}}}},{package:"$root$",file:"ui/helpers/utils/build-types.js"}],[7006,{"../../../shared/constants/common":5959,"../../../shared/modules/Numeric":6006,"bignumber.js":4195,"currency-formatter":4433,"currency-formatter/currencies":4432},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addEth=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(6)),new o.Numeric(e,10)).toString()},n.addFiat=function(e,...t){return t.reduce(((e,t)=>e.add(new o.Numeric(t,10)).round(2)),new o.Numeric(e,10)).toString()},n.areDappSuggestedAndTxParamGasFeesTheSame=function(e){const{txParams:t,dappSuggestedGasFees:n}=e??{},{gasPrice:r,maxFeePerGas:a,maxPriorityFeePerGas:s}=t||{},{gasPrice:o,maxFeePerGas:i,maxPriorityFeePerGas:c}=n||{},u=!o&&!i&&!c;if(!r&&!a&&!s||u)return!1;const d=r&&r===o,l=[a,s].every((e=>e===o)),p=a&&a===i&&s===c;return Boolean(d||l||p)},n.convertTokenToFiat=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:n,conversionRate:r,contractExchangeRate:a}){const s=r*a;let c=new o.Numeric(e,10);t!==n&&s&&(c=c.applyConversionRate(s));return c.round(2).toString()},n.formatCurrency=function(e,t,n){const s=t.toUpperCase();return a.default.find((e=>e.code===s))?r.default.format(Number(e),{code:s,precision:n}):e},n.getHexGasTotal=function({gasLimit:e="0x0",gasPrice:t="0x0"}){return new o.Numeric(e,16).times(new o.Numeric(t,16)).toPrefixedHexString()},n.getTransactionFee=function({value:e,fromCurrency:t=i.EtherDenomination.ETH,toCurrency:n,conversionRate:r,numberOfDecimals:a}){let s=new o.Numeric(e,16,i.EtherDenomination.WEI).toDenomination(i.EtherDenomination.ETH).toBase(10);t!==n&&r&&(s=s.applyConversionRate(r));return s.round(a).toString()},n.roundExponential=function(e){const t=new s.BigNumber(e);return t.e>20?t.toPrecision(4):e};var r=c(e("currency-formatter")),a=c(e("currency-formatter/currencies")),s=e("bignumber.js"),o=e("../../../shared/modules/Numeric"),i=e("../../../shared/constants/common");function c(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$",file:"ui/helpers/utils/confirm-tx.util.ts"}],[7008,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatETHFee=function(e,t="ETH"){return`${e} ${t}`}}}},{package:"$root$",file:"ui/helpers/utils/formatters.js"}],[701,{"./lib":698},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const r=e("./lib"),a=[];n.patchTags=e=>{e.forEach((e=>{a.find((t=>t===e))||((0,r.addSemanticEncode)(e,(t=>{if(t instanceof r.DataItem&&t.getTag()===e)return t.getData()})),(0,r.addSemanticDecode)(e,(t=>new r.DataItem(t,e))),a.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[7010,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isHardwareKeyring=function(e=""){return e.includes("Hardware")}}}},{package:"$root$",file:"ui/helpers/utils/hardware.js"}],[7011,{"../../../shared/constants/network":5972,"../../../shared/modules/i18n":6022,"@sentry/browser":3562,react:5502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getMessage=void 0,n.getNetworkLabelKey=function(e){if(e===i.NETWORK_TYPES.LINEA_SEPOLIA)return"lineaSepolia";if(e===i.NETWORK_TYPES.LINEA_MAINNET)return"lineaMainnet";return e};var r,a=(r=e("react"))&&r.__esModule?r:{default:r},s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("@sentry/browser")),o=e("../../../shared/modules/i18n"),i=e("../../../shared/constants/network");function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}n.getMessage=(e,t,n,r)=>{const i=(null==r?void 0:r.some((e=>null!==e&&("function"==typeof e||"object"==typeof e))))?e=>a.default.createElement("span",null," ",e," "):undefined;return(0,o.getMessage)(e,t,n,r,(e=>{s.captureException(e)}),i)}}}},{package:"$root$",file:"ui/helpers/utils/i18n-helper.tsx"}],[7012,{"../../../shared/modules/hexstring-utils":6021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.IconFactory=void 0,n.default=function(e){o||(o=new s(e));return o};var r=e("../../../shared/modules/hexstring-utils");function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e,t=i){a(this,"jazzicon",void 0),a(this,"generateSeed",void 0),a(this,"cache",void 0),this.jazzicon=e,this.generateSeed=t,this.cache={}}iconForAddress(e,t,n){return function(e,t){if(null==t||!t.iconUrl)return!1;return(0,r.isValidHexAddress)(e,{allowNonPrefixed:!1})}(e,n)?function(e){const t=document.createElement("img");return t.src=e.iconUrl,t.style.width="100%",t}(n):this.generateIdenticonSvg(e,t)}generateIdenticonSvg(e,t){const n=`${e}:${t}`;return(this.cache[n]||(this.cache[n]=this.generateNewIdenticon(e,t))).cloneNode(!0)}generateNewIdenticon(e,t){const n=this.generateSeed(e);return this.jazzicon(t,n)}}let o;function i(e){const t=e.slice(2,10);return parseInt(t,16)}n.IconFactory=s}}},{package:"$root$",file:"ui/helpers/utils/icon-factory.ts"}],[7014,{"../../../shared/constants/metametrics":5968,"../../../shared/constants/security-provider":5978,"../../../shared/lib/transactions-controller-utils":6004,"@metamask/transaction-controller":3344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAccountType=function(e){if("default"===e)return"metamask";return e},n.generateSignatureUniqueId=function(e){return`signature-${e}`},n.getBlockaidMetricsProps=void 0,n.getMethodName=function(e){if(!e||"string"!=typeof e)return"";return e.replace(/([a-z])([A-Z])/gu,"$1 $2").replace(/([A-Z])([a-z])/gu," $1$2").replace(/ +/gu," ")},n.getSwapAndSendMetricsProps=void 0;var r=e("@metamask/transaction-controller"),a=e("../../../shared/constants/security-provider"),s=e("../../../shared/constants/metametrics"),o=e("../../../shared/lib/transactions-controller-utils");n.getBlockaidMetricsProps=({securityAlertResponse:e})=>{if(!e)return{};const t={},{providerRequestsCount:n,reason:r,result_type:o,description:i,source:c}=e,u=(e=>{let t;return e===a.BlockaidResultType.Malicious?t=[s.MetaMetricsEventUiCustomization.FlaggedAsMalicious]:e===a.BlockaidResultType.Warning?t=[s.MetaMetricsEventUiCustomization.FlaggedAsWarning]:e===a.BlockaidResultType.Errored&&(t=[s.MetaMetricsEventUiCustomization.SecurityAlertError]),t})(o);return u&&(t.ui_customizations=u),o!==a.BlockaidResultType.Benign&&(t.security_alert_reason=r??a.BlockaidReason.notApplicable),i&&(t.security_alert_description=i),t.security_alert_response=o??a.BlockaidResultType.NotApplicable,t.security_alert_source=c,n&&Object.keys(n).forEach((e=>{t[`ppom_${e}_count`]=n[e]})),t};n.getSwapAndSendMetricsProps=e=>{if(e.type!==r.TransactionType.swapAndSend)return{};const{chainId:t,sourceTokenAmount:n,sourceTokenDecimals:a,destinationTokenAmount:s,destinationTokenDecimals:i,sourceTokenSymbol:c,destinationTokenAddress:u,destinationTokenSymbol:d,sourceTokenAddress:l}=e;return{chain_id:t,token_amount_source:n&&a?(0,o.calcTokenAmount)(n,a).toString():undefined,token_amount_dest_estimate:s&&i?(0,o.calcTokenAmount)(s,i).toString():undefined,token_symbol_source:c,token_symbol_destination:d,token_address_source:l,token_address_destination:u}}}}},{package:"$root$",file:"ui/helpers/utils/metrics.js"}],[7023,{"../../../shared/modules/environment":6016},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSnapIgnoredInProd=n.decodeSnapIdFromPathname=void 0;var r=e("../../../shared/modules/environment");n.decodeSnapIdFromPathname=e=>{var t;const n=null==e||null===(t=e.match(/[^/]+$/u))||void 0===t?void 0:t[0];return n&&decodeURIComponent(n)};const a=["npm:@metamask/preinstalled-example-snap"];n.isSnapIgnoredInProd=e=>!!(0,r.isProduction)()&&a.includes(e)}}},{package:"$root$",file:"ui/helpers/utils/snaps.ts"}],[7025,{"../../../shared/constants/transaction":5986,"../../../shared/lib/metamask-controller-utils":5996,"../../../shared/lib/transactions-controller-utils":6004,"../../../shared/modules/Numeric":6006,"../../../shared/modules/string-utils":6036,"../../../shared/modules/transaction.utils":6038,"../../store/actions":7667,"./confirm-tx.util":7006,"./util":7028,loglevel:5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAssetDetails=async function(e,t,n,r){var l,p,m;const f=(0,i.parseStandardTokenTransactionData)(n);if(!f)throw new Error("Unable to detect valid token data");let h=(null===(l=_(f))||void 0===l?void 0:l.toString())??(0,u.getTokenValueParam)(f);const g=v(f);let T;if(null!=r&&r.length&&h){const t=r.find((({address:t,tokenId:n})=>(0,o.isEqualCaseInsensitive)(e,t)&&n===h));if(t&&(t.name||t.symbol))return{toAddress:g,...t}}try{T=await(0,s.getTokenStandardAndDetails)(e,t,h)}catch(e){return a.default.warn(e),{toAddress:g,tokenId:h}}const y=(0,u.getTokenValueParam)(f),E=null===(p=T)||void 0===p?void 0:p.decimals,S=f&&y&&E&&(0,d.calcTokenAmount)(y,E).toString(10),A=E&&Number(null==E?void 0:E.toString(10));(null===(m=T)||void 0===m?void 0:m.standard)===c.TokenStandard.ERC20&&(h=undefined);return{tokenAmount:S,toAddress:g,decimals:A,tokenId:h,...T}},n.getSymbolAndDecimalsAndName=S,n.getTokenAddressParam=v,n.getTokenFiatAmount=function(e,t,n,r,a,s=!0,o=!1){if(t<=0||!e||r===undefined||!1===r)return undefined;const i=new l.Numeric(e,10).times(new l.Numeric(t,10)).toString();let c,u=new l.Numeric(r,10);a!==n.toUpperCase()&&i&&(u=u.applyConversionRate(i));u=u.round(2).toString(),c=o&&s?(0,m.formatCurrency)(u,n):s?`${(0,m.formatCurrency)(u,n)} ${n.toUpperCase()}`:u;return c},n.getTokenIdParam=_,n.getTokenMetadata=g,n.tokenInfoGetter=function(){const e={};return async(t,n)=>(e[t]||(e[t]=await S(t,n)),e[t])};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("../../store/actions"),o=e("../../../shared/modules/string-utils"),i=e("../../../shared/modules/transaction.utils"),c=e("../../../shared/constants/transaction"),u=e("../../../shared/lib/metamask-controller-utils"),d=e("../../../shared/lib/transactions-controller-utils"),l=e("../../../shared/modules/Numeric"),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("./util")),m=e("./confirm-tx.util");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}const h="";function g(e,t){return e&&t[e.toLowerCase()]}async function T(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{return"0x"===await t.provider.getCode(e)?"":await t.symbol()}catch(t){return a.default.warn(`symbol() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=g(e,t);r&&(n=r.symbol)}return n}async function y(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{return"0x"===await t.provider.getCode(e)?"":await t.name()}catch(t){return a.default.warn(`name() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n){const r=g(e,t);r&&(n=r.name)}return n}async function E(e,t){let n=await async function(e){const t=p.getContractAtAddress(e);try{if("0x"===await t.provider.getCode(e))return"0";const n=await t.decimals();return null==n?void 0:n.toString()}catch(t){return a.default.warn(`decimals() call for token at address ${e} resulted in error:`,t),undefined}}(e);if(!n||"0"===n){const a=g(e,t);var r;if(a)n=null===(r=a.decimals)||void 0===r?void 0:r.toString()}return n}async function S(e,t){let n,r,s;try{const a=(await Promise.allSettled([T(e,t),E(e,t),y(e,t)])).filter((e=>"fulfilled"===e.status)).map((e=>e.value));[n,r,s]=a}catch(t){a.default.warn(`symbol() and decimal() and name() calls for token at address ${e} resulted in error:`,t)}return{symbol:n||h,decimals:r,name:s}}function v(e={}){var t,n,r;const a=(null==e||null===(t=e.args)||void 0===t?void 0:t._to)||(null==e||null===(n=e.args)||void 0===n?void 0:n.to)||(null==e||null===(r=e.args)||void 0===r?void 0:r[0]);return null==a?void 0:a.toString().toLowerCase()}function _(e={}){var t,n;return(null==e||null===(t=e.args)||void 0===t||null===(t=t._tokenId)||void 0===t?void 0:t.toString())??(null==e||null===(n=e.args)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())}}}},{package:"$root$",file:"ui/helpers/utils/token-util.js"}],[7026,{"../../../app/scripts/lib/util":166,"../../../shared/constants/transaction":5986,"../../../shared/modules/contract-utils":6014,"@metamask/transaction-controller":3344},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFourBytePrefix=function(e=""){const t=(0,a.addHexPrefix)(e);return t.slice(0,10)},n.getLatestSubmittedTxWithNonce=function(e=[],t="0x0"){if(!e.length)return{};return e.reduce(((e,n)=>{const{submittedTime:r,txParams:{nonce:a}={}}=n;return a===t?e.submittedTime?r>e.submittedTime?n:e:n:e}),{})},n.getStatusKey=function(e){const{txReceipt:{status:t}={},type:n,status:a}=e;if("0x0"===t)return r.TransactionStatus.failed;if(a===r.TransactionStatus.confirmed&&n===r.TransactionType.cancel)return s.TransactionGroupStatus.cancelled;return e.status},n.getTransactionTypeTitle=function(e,t,n="ETH"){switch(t){case r.TransactionType.tokenMethodTransfer:return e("transfer");case r.TransactionType.tokenMethodTransferFrom:return e("transferFrom");case r.TransactionType.tokenMethodSafeTransferFrom:return e("safeTransferFrom");case r.TransactionType.tokenMethodApprove:return e("approve");case r.TransactionType.tokenMethodSetApprovalForAll:return e("setApprovalForAll");case r.TransactionType.tokenMethodIncreaseAllowance:return e("approveIncreaseAllowance");case r.TransactionType.simpleSend:return e("sendingNativeAsset",[n]);case r.TransactionType.contractInteraction:return e("contractInteraction");case r.TransactionType.deployContract:return e("contractDeployment");case r.TransactionType.swap:return e("swap");case r.TransactionType.swapAndSend:return e("swapAndSend");case r.TransactionType.swapApproval:return e("swapApproval");default:throw new Error(`Unrecognized transaction type: ${t}`)}},n.isLegacyTransaction=function(e){return(null==e?void 0:e.type)===r.TransactionEnvelopeType.legacy},n.isSmartContractAddress=async function(e){const{isContractAddress:t}=await(0,o.readAddressAsContract)(global.ethereumProvider,e);return t},n.isTokenMethodAction=function(e){return[r.TransactionType.tokenMethodTransfer,r.TransactionType.tokenMethodApprove,r.TransactionType.tokenMethodSetApprovalForAll,r.TransactionType.tokenMethodTransferFrom,r.TransactionType.tokenMethodSafeTransferFrom,r.TransactionType.tokenMethodIncreaseAllowance].includes(e)};var r=e("@metamask/transaction-controller"),a=e("../../../app/scripts/lib/util"),s=e("../../../shared/constants/transaction"),o=e("../../../shared/modules/contract-utils")}}},{package:"$root$",file:"ui/helpers/utils/transactions.util.js"}],[7027,{"./util":7028,loglevel:5114},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r,o,i){a.default.debug("tx-helper called with params:"),a.default.debug({unapprovedTxs:e,personalMsgs:t,decryptMsgs:n,encryptionPublicKeyMsgs:r,typedMessages:o,chainId:i});const c=i?(0,s.valuesFor)(e).filter((e=>e.chainId===i)):(0,s.valuesFor)(e),u=(0,s.valuesFor)(t),d=(0,s.valuesFor)(n),l=(0,s.valuesFor)(r),p=(0,s.valuesFor)(o),m=c.concat(u).concat(d).concat(l).concat(p).sort(((e,t)=>e.time-t.time));return a.default.debug(`tx helper found ${c.length} unapproved txs`),a.default.debug(`tx helper found ${u.length} unsigned personal messages`),a.default.debug(`tx helper found ${d.length} decrypt requests`),a.default.debug(`tx helper found ${l.length} encryptionPublicKey requests`),a.default.debug(`tx helper found ${p.length} unsigned typed messages`),m};var r,a=(r=e("loglevel"))&&r.__esModule?r:{default:r},s=e("./util")}}},{package:"$root$",file:"ui/helpers/utils/tx-helper.ts"}],[7028,{"../../../app/scripts/lib/multichain/address":112,"../../../shared/constants/labels":5966,"../../../shared/constants/network":5972,"../../../shared/modules/Numeric":6006,"../../../shared/modules/conversion.utils":6015,"../../../shared/modules/error":6017,"../../../shared/modules/hexstring-utils":6021,"../../../shared/modules/string-utils":6036,"../constants/common":6977,"../constants/routes":6985,"@ethersproject/contracts":566,"@ethersproject/providers":604,"@metamask/assets-controllers":1442,"@metamask/snaps-rpc-methods":3039,"@metamask/snaps-utils":3270,"@metamask/utils":3434,"bignumber.js":4195,"bn.js":4243,bowser:4254,buffer:4291,"human-standard-token-abi":4911,lodash:5108,luxon:5116,"punycode/punycode":5314},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.IS_FLASK=void 0,n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,w.normalizeSafeAddress)(e);r||(a=(0,y.stripHexPrefix)(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new s.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.checkTokenIdExists=void 0,n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.fetchTokenExchangeRates=void 0,n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?b(e):e.split("."),s=a[0];let o=a[1],i="None";if(t===undefined)if("0"===s){if("0"!==o){const e=o.match(/^0*(.{2})/u);e&&(o=e[0]),i=`0.${o} ${r}`}}else i=`${s}.${o.slice(0,3)} ${r}`;else o+=Array(t).join("0"),i=`${s}.${o.slice(0,t)} ${r}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithSuffix=function(e){const t=i.DateTime.fromMillis(1e3*e),{day:n}=t,r=function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n);return t.toFormat(`MMM d'${r}', yyyy`)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=i.DateTime.fromMillis(e),a=i.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.formatUTCDateFromUnixTimestamp=void 0,n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=async function(e,t){if(!e||"string"!=typeof e)return"";if(t&&e.startsWith("ipfs://"))try{return await(0,c.getFormattedIpfsUrl)(t,e,!0)}catch(e){return(0,T.logErrorWithMessage)(e),""}return e},n.getCalculatedTokenAmount1dAgo=n.getAvatarFallbackLetter=void 0,n.getContractAtAddress=function(e){return new h.Contract(e,a.default,new f.Web3Provider(global.ethereumProvider))},n.getFilteredSnapPermissions=n.getDedupedSnaps=void 0,n.getIsBrowserDeprecated=function(e=d.default.getParser(window.navigator.userAgent)){return e.satisfies(v.OUTDATED_BROWSER_VERSIONS)??!1},n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getSnapRoute=n.getSnapName=void 0,n.getURL=D,n.getURLHost=function(e){var t;return(null===(t=D(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=D(e))||void 0===t?void 0:t.hostname)||""},n.isAbleToExportAccount=n.hexToText=void 0,n.isDefaultMetaMaskChain=function(e){if(!e||e===g.CHAIN_IDS.MAINNET||e===g.CHAIN_IDS.LINEA_MAINNET||e===g.CHAIN_IDS.GOERLI||e===g.CHAIN_IDS.SEPOLIA||e===g.CHAIN_IDS.LINEA_GOERLI||e===g.CHAIN_IDS.LINEA_SEPOLIA||e===g.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==r.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=O,n.parseBalance=b,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return new S.Numeric(new S.Numeric(e,10).toFixed(t),10).toNumber()},n.sanitizeString=n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){return k(e,{truncatedCharLimit:E.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:E.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:E.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1})},n.shortenString=k,n.sortSelectedInternalAccounts=function(e){return e.sort(((e,t)=>(t.metadata.lastSelected??0)-(e.metadata.lastSelected??0)))},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=N,n.stripHttpsSchemeWithoutPort=function(e){if(D(e).port)return e;return N(e)},n.toHumanReadableTime=n.stripOneLayerofNesting=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var r=C(e("punycode/punycode")),a=C(e("human-standard-token-abi")),s=C(e("bignumber.js")),o=C(e("bn.js")),i=e("luxon"),c=e("@metamask/assets-controllers"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}(e("lodash")),d=C(e("bowser")),l=e("@metamask/snaps-rpc-methods"),p=e("@metamask/snaps-utils"),m=e("@metamask/utils"),f=e("@ethersproject/providers"),h=e("@ethersproject/contracts"),g=e("../../../shared/constants/network"),T=e("../../../shared/modules/error"),y=e("../../../shared/modules/hexstring-utils"),E=e("../../../shared/constants/labels"),S=e("../../../shared/modules/Numeric"),v=e("../constants/common"),_=e("../../../shared/modules/string-utils"),A=e("../../../shared/modules/conversion.utils"),I=e("../constants/routes"),w=e("../../../app/scripts/lib/multichain/address");function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function C(e){return e&&e.__esModule?e:{default:e}}function O(e){if(!e)return new o.default(0,16);const t=(0,y.stripHexPrefix)(e);return new o.default(t,16)}function b(e){let t;const n=O(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function k(e="",{truncatedCharLimit:t,truncatedStartChars:n,truncatedEndChars:r,skipCharacterInEnd:a}={truncatedCharLimit:E.TRUNCATED_NAME_CHAR_LIMIT,truncatedStartChars:E.TRUNCATED_ADDRESS_START_CHARS,truncatedEndChars:E.TRUNCATED_ADDRESS_END_CHARS,skipCharacterInEnd:!1}){return e.length<t?e:`${e.slice(0,n)}...${a?"":e.slice(-r)}`}function N(e){return e.replace(/^https:\/\//u,"")}function D(e){try{return new URL(e)}catch(e){return""}}n.formatUTCDateFromUnixTimestamp=e=>e?i.DateTime.fromSeconds(e).toUTC().toFormat("dd LLLL yyyy, HH:mm"):e;n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const P=(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),s=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),o=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...s.flat(),...o.flat()]})(),M=e=>e.replace(/\[(\d*)\]/u,"");n.stripOneLayerofNesting=M;const x=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=t&&null!==t.match(/\[[[0-9]*\]*/u);var a;if(r)return{value:e.map((e=>x(e,M(t),n))),type:t};if(a=t,P.includes(a))return{value:e,type:t};const s=r?(e=>e.replace(/\[[[0-9]*\]*/gu,""))(t):t,o=n[s];if(!o)throw new Error("Invalid primary type definition");const i={};return Object.keys(e).forEach((t=>{const r=Object.values(o).find((e=>e.name===t));r&&(i[t]=x(e[t],r.type,n))})),{value:i,type:t}};n.sanitizeMessage=x;n.getSnapName=e=>t=>{var n;return(null===(n=e[t])||void 0===n?void 0:n.name)??(0,p.stripSnapPrefix)(t)};n.getSnapRoute=e=>`${I.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e)}`;n.getDedupedSnaps=(e,t)=>{var n,r;const a=null==e||null===(n=e.permissions)||void 0===n?void 0:n[l.WALLET_SNAP_PERMISSION_KEY],s=null==a?void 0:a.caveats[0].value,o=null==t||null===(r=t[l.WALLET_SNAP_PERMISSION_KEY])||void 0===r?void 0:r.caveats[0].value;if(!(0,m.isObject)(o)&&s)return Object.keys(s);const i=s?Object.keys(s):[],c=o?Object.keys(o):[],u=i.filter((e=>!c.includes(e)));return u.length>0?u:i};n.IS_FLASK=!1;n.sanitizeString=e=>{if(!e)return e;if(!u.isString(e))return e;return e.replace(/\u202E/giu,"\\u202E")};n.isAbleToExportAccount=(e="")=>!e.includes("Hardware")&&!e.includes("Snap");n.checkTokenIdExists=(e,t,n)=>{const r=(0,m.isStrictHexString)(t);let a=t;r&&(a=(0,A.hexToDecimal)(t));const s=(0,y.toChecksumHexAddress)(e);if(n[s]){const e=n[s];return u.some(e.nfts,(e=>e.address===s&&((0,_.isEqualCaseInsensitive)(e.tokenId,t)||(0,_.isEqualCaseInsensitive)(e.tokenId,a.toString()))))}return!1};n.fetchTokenExchangeRates=async(e,t,n)=>{try{return await(0,c.fetchTokenContractExchangeRates)({tokenPricesService:new c.CodefiTokenPricesServiceV2,nativeCurrency:e,tokenAddresses:t,chainId:n})}catch(e){return{}}};n.hexToText=e=>{if(!e)return e;try{const n=(0,y.stripHexPrefix)(e),r=t.from(n,"hex");return 32===r.length?e:r.toString("utf8")}catch(t){return e}};n.getAvatarFallbackLetter=e=>{var t;return(null==e||null===(t=e.match(/[a-z0-9]/iu))||void 0===t?void 0:t[0])??"?"};n.getFilteredSnapPermissions=(e,t=Infinity,n=3)=>{const r=e.filter((e=>e.weight<=t));if(n&&r.length<n){const a=e.filter((e=>e.weight>t));return r.concat(a.slice(0,n-r.length))}return r};n.getCalculatedTokenAmount1dAgo=(e,t)=>t!==undefined&&e?e/(1+t/100):e??0}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/helpers/utils/util.js"}],[7031,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ActionType=void 0;n.ActionType=function(e){return e.CROSSCHAIN_V1="crosschain-v1",e.SWAPBRIDGE_V1="swapbridge-v1",e}({})}}},{package:"$root$",file:"ui/hooks/bridge/events/types.ts"}],[7071,{"../../shared/constants/common":5959,"../../shared/constants/network":5972,"../../shared/modules/Numeric":6006,"../../shared/modules/conversion.utils":6015,"../helpers/utils/confirm-tx.util":7006,"../helpers/utils/token-util":7025,"../selectors/multichain":7656,"./useMultichainSelector":7089,"bignumber.js":4195,react:5502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_AMOUNT=n.DEFAULT_PRECISION=void 0,n.useCurrencyDisplay=function(e,{account:t,displayValue:n,prefix:r,numberOfDecimals:s,denomination:f,currency:T,isAggregatedFiatOverviewBalance:y,...E}){const S=(0,m.useMultichainSelector)(i.getMultichainIsEvm,t),v=(0,m.useMultichainSelector)(i.getMultichainCurrentCurrency,t),_=(0,m.useMultichainSelector)(i.getMultichainNativeCurrency,t),A=(0,m.useMultichainSelector)(i.getMultichainConversionRate,t),I=T===v,w=T===_,R=(0,a.useMemo)((()=>n||(S?y?(0,o.formatCurrency)(e,T):function({isNativeCurrency:e,isUserPreferredCurrency:t,currency:n,nativeCurrency:r,inputValue:a,conversionRate:s,denomination:i,numberOfDecimals:u}){if(e||!t&&!r){const e=new d.Numeric(a,16,l.EtherDenomination.WEI).toDenomination(i||l.EtherDenomination.ETH).round(u||g).toBase(10).toString();return"0"===e&&a&&0!==Number(a)?h:e}if(t&&s)return(0,o.formatCurrency)((0,c.getValueFromWeiHex)({value:a,fromCurrency:r,toCurrency:n,conversionRate:s,numberOfDecimals:u||2,toDenomination:i}),n);return null}({isNativeCurrency:w,isUserPreferredCurrency:I,currency:T,nativeCurrency:_,inputValue:e,conversionRate:A,denomination:f,numberOfDecimals:s}):function({tokenSymbol:e,isNativeCurrency:t,isUserPreferredCurrency:n,currency:r,currentCurrency:a,nativeCurrency:s,inputValue:i,conversionRate:c}){if(t||!n&&!s)return new d.Numeric(i,10).toString();if(n&&c){const t=(0,p.getTokenFiatAmount)(1,Number(c),a,i,e,!1,!1)??"0";return(0,o.formatCurrency)(t,r)}return null}({tokenSymbol:_,isNativeCurrency:w,isUserPreferredCurrency:I,currency:T,currentCurrency:v,nativeCurrency:_,inputValue:e,conversionRate:A}))),[n,S,w,I,T,_,e,A,f,s,v,y]);let C;if(!E.hideLabel){const e=Object.values(u.TEST_NETWORK_TICKER_MAP).includes(T)?T:null==T?void 0:T.toUpperCase();C=E.suffix||e}return[`${r||""}${R}${C?` ${C}`:""}`,{prefix:r,value:R,suffix:C}]};var r,a=e("react"),s=(r=e("bignumber.js"))&&r.__esModule?r:{default:r},o=e("../helpers/utils/confirm-tx.util"),i=e("../selectors/multichain"),c=e("../../shared/modules/conversion.utils"),u=e("../../shared/constants/network"),d=e("../../shared/modules/Numeric"),l=e("../../shared/constants/common"),p=e("../helpers/utils/token-util"),m=e("./useMultichainSelector");const f=n.MIN_AMOUNT=1e-6,h=`<${f}`,g=n.DEFAULT_PRECISION=new s.default(f).decimalPlaces()}}},{package:"$root$",file:"ui/hooks/useCurrencyDisplay.js"}],[7081,{"../contexts/i18n":6939,react:5502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useI18nContext=function(){return(0,r.useContext)(a.I18nContext)};var r=e("react"),a=e("../contexts/i18n")}}},{package:"$root$",file:"ui/hooks/useI18nContext.js"}],[7086,{react:5502},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("react");n.default=e=>{const t=(0,r.useRef)(new Map);(0,r.useEffect)((()=>{for(const n of e.input){const r=JSON.stringify(n);t.current.has(r)||e.startPolling(n).then((e=>t.current.set(r,e)))}for(const[n,r]of t.current.entries()){e.input.some((e=>n===JSON.stringify(e)))||(e.stopPollingByPollingToken(r),t.current.delete(n))}}),[e.input&&JSON.stringify(e.input)]),(0,r.useEffect)((()=>()=>{for(const n of t.current.values())e.stopPollingByPollingToken(n)}),[])}}}},{package:"$root$",file:"ui/hooks/useMultiPolling.ts"}],[7089,{"../selectors":7653,"react-redux":5460},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useMultichainSelector=function(e,t){return(0,r.useSelector)((n=>e(n,t||(0,a.getSelectedInternalAccount)(n))))};var r=e("react-redux"),a=e("../selectors")}}},{package:"$root$",file:"ui/hooks/useMultichainSelector.ts"}],[7106,{"../../shared/modules/conversion.utils":6015,"../../shared/modules/selectors/networks":6033,"../ducks/metamask/metamask":6967,"../store/actions":7667,"./useMultiPolling":7086,"bn.js":4243,"react-redux":5460},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyBalance=p,n.useTokenTracker=n.useTokenBalances=void 0;var r=e("react-redux"),a=d(e("bn.js")),s=e("../../shared/modules/selectors/networks"),o=e("../store/actions"),i=e("../ducks/metamask/metamask"),c=e("../../shared/modules/conversion.utils"),u=d(e("./useMultiPolling"));function d(e){return e&&e.__esModule?e:{default:e}}const l=({chainIds:e}={})=>{const t=(0,r.useSelector)(i.getTokenBalances),n=(0,r.useSelector)(s.getNetworkConfigurationsByChainId);return(0,u.default)({startPolling:o.tokenBalancesStartPolling,stopPollingByPollingToken:o.tokenBalancesStopPollingByPollingToken,input:e??Object.keys(n)}),{tokenBalances:t}};n.useTokenBalances=l;function p(e,t,n=5){if(e.eq(new a.default(0)))return"0";const r=parseInt(t.toString(),10);if(0===r)return e.toString();let s=e.toString(),o=s.length,i=o-r,c="";if(i<=0){for(;c.length<=-1*i;)c+="0",o+=1;s=c+s,i=1}const u=s.substr(0,o-r);if(0===n)return u;const d=s.substr(i,n);if(/0+$/u.test(d)){let e=s.substr(i).replace(/0+$/u,"");return e.length>0&&(e=`.${e}`),`${u}${e}`}return`${u}.${d}`}n.useTokenTracker=({chainId:e,tokens:t,address:n,hideZeroBalanceTokens:r})=>{const{tokenBalances:s}=l({chainIds:[e]});return{tokensWithBalances:t.reduce(((t,o)=>{var i;const u=(null===(i=s[n])||void 0===i||null===(i=i[e])||void 0===i?void 0:i[o.address])??"0x0";if("0x0"!==u||!r){const e=(0,c.hexToDecimal)(u);t.push({address:o.address,symbol:o.symbol,decimals:o.decimals,balance:e,balanceError:null,string:p(new a.default(e),new a.default(o.decimals))})}return t}),[])}}}}},{package:"$root$",file:"ui/hooks/useTokenBalances.ts"}],[7110,{"../../shared/modules/selectors/networks":6033,"../../shared/modules/string-utils":6036,"../ducks/metamask/metamask":6967,"../helpers/utils/token-util":7025,"../selectors":7653,react:5502,"react-redux":5460},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.useTokenFiatAmount=function(e,t,n,d={},l,p=null,m=!0){var f,h;const g=(0,a.useSelector)(s.getMarketData),T=(0,a.useSelector)(s.getTokenExchangeRates,a.shallowEqual),y=p&&g[p]?Object.entries(g[p]).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{}):null,E=p?y:T,S=(0,a.useSelector)(s.getConfirmationExchangeRates),v={...E,...S},_=(0,a.useSelector)(s.getCurrencyRates),A=(0,a.useSelector)(c.getConversionRate),I=(0,a.useSelector)(o.getNetworkConfigurationsByChainId),w=p?null==_||null===(f=_[null===(h=I[p])||void 0===h?void 0:h.nativeCurrency])||void 0===f?void 0:f.conversionRate:A,R=(0,a.useSelector)(c.getCurrentCurrency),C=(0,a.useSelector)(s.getShouldShowFiat),O=d.showFiat??C,b=Object.keys(v).find((t=>(0,u.isEqualCaseInsensitive)(t,e))),k=d.exchangeRate??(b&&v[b]),N=(0,r.useMemo)((()=>(0,i.getTokenFiatAmount)(k,w,R,t,n,m,l)),[w,k,R,t,n,l]);if(!O||R.toUpperCase()===n)return undefined;return N};var r=e("react"),a=e("react-redux"),s=e("../selectors"),o=e("../../shared/modules/selectors/networks"),i=e("../helpers/utils/token-util"),c=e("../ducks/metamask/metamask"),u=e("../../shared/modules/string-utils")}}},{package:"$root$",file:"ui/hooks/useTokenFiatAmount.js"}],[7162,{"../../../../shared/constants/common":5959,"../../../../shared/lib/transactions-controller-utils":6004,"../../../../shared/modules/Numeric":6006,"../../../../shared/modules/conversion.utils":6015,"../../../helpers/utils/confirm-tx.util":7006,"../../../hooks/useCurrencyDisplay":7071,"../../confirmations/components/simulation-details/formatAmount":7313,"bignumber.js":4195,"ethereumjs-util":4537},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isQuoteExpired=n.isNativeAddress=n.formatTokenAmount=n.formatProviderLabel=n.formatEtaInMinutes=n.formatCurrencyAmount=n.calcToAmount=n.calcSwapRate=n.calcSentAmount=n.calcRelayerFee=n.calcEstimatedAndMaxTotalGasFee=n.calcCost=n.calcAdjustedReturn=void 0;var r=e("ethereumjs-util"),a=e("bignumber.js"),s=e("../../../../shared/lib/transactions-controller-utils"),o=e("../../../../shared/modules/conversion.utils"),i=e("../../../helpers/utils/confirm-tx.util"),c=e("../../../../shared/modules/Numeric"),u=e("../../../../shared/constants/common"),d=e("../../../hooks/useCurrencyDisplay"),l=e("../../confirmations/components/simulation-details/formatAmount");n.isQuoteExpired=(e,t,n)=>Boolean(!e&&n&&Date.now()-n>t);const p=e=>e===(0,r.zeroAddress)()||""===e||!e;n.isNativeAddress=p;n.calcToAmount=({destTokenAmount:e,destAsset:t},n,r)=>{const a=(0,s.calcTokenAmount)(e,t.decimals);return{amount:a,valueInCurrency:n?a.mul(n.toString()):null,usd:r?a.mul(r.toString()):null}};n.calcSentAmount=({srcTokenAmount:e,srcAsset:t,feeData:n},r,o)=>{const i=(0,s.calcTokenAmount)(new a.BigNumber(e).plus(n.metabridge.amount),t.decimals);return{amount:i,valueInCurrency:r?i.mul(r.toString()):null,usd:o?i.mul(o.toString()):null}};n.calcRelayerFee=(e,t,n)=>{const{quote:{srcAsset:r,srcTokenAmount:i,feeData:c},trade:u}=e,d=(0,s.calcTokenAmount)(new a.BigNumber((0,o.hexToDecimal)(u.value)).minus(p(r.address)?new a.BigNumber(i).plus(c.metabridge.amount):0),18);return{amount:d,valueInCurrency:t?d.mul(t.toString()):null,usd:n?d.mul(n.toString()):null}};const m=({bridgeQuote:e,feePerGasInDecGwei:t,priorityFeePerGasInDecGwei:n,nativeToDisplayCurrencyExchangeRate:r,nativeToUsdExchangeRate:s})=>{var i,d;const{approval:l,trade:p,l1GasFeesInHexWei:m}=e,f=(0,o.sumDecimals)((null===(i=p.gasLimit)||void 0===i?void 0:i.toString())??"0",(null==l||null===(d=l.gasLimit)||void 0===d?void 0:d.toString())??"0"),h=(0,o.sumDecimals)(t,n),g=c.Numeric.from(m??"0",16,u.EtherDenomination.WEI).toDenomination(u.EtherDenomination.GWEI),T=f.times(h).add(g),y=new a.BigNumber(T.shiftedBy(9).toString()),E=r?y.times(r.toString()):null,S=s?y.times(s.toString()):null;return{amount:y,valueInCurrency:E,usd:S}};n.calcEstimatedAndMaxTotalGasFee=({bridgeQuote:e,estimatedBaseFeeInDecGwei:t,maxFeePerGasInDecGwei:n,maxPriorityFeePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:s})=>{const{amount:o,valueInCurrency:i,usd:c}=m({bridgeQuote:e,feePerGasInDecGwei:t,priorityFeePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:s}),{amount:u,valueInCurrency:d,usd:l}=m({bridgeQuote:e,feePerGasInDecGwei:n,priorityFeePerGasInDecGwei:r,nativeToDisplayCurrencyExchangeRate:a,nativeToUsdExchangeRate:s});return{amount:o,amountMax:u,valueInCurrency:i,valueInCurrencyMax:d,usd:c,usdMax:l}};n.calcAdjustedReturn=(e,t)=>({valueInCurrency:e.valueInCurrency&&t.valueInCurrency?e.valueInCurrency.minus(t.valueInCurrency):null,usd:e.usd&&t.usd?e.usd.minus(t.usd):null});n.calcSwapRate=(e,t)=>t.div(e);n.calcCost=(e,t)=>({valueInCurrency:e.valueInCurrency&&t.valueInCurrency?t.valueInCurrency.minus(e.valueInCurrency):null,usd:e.usd&&t.usd?t.usd.minus(e.usd):null});n.formatEtaInMinutes=e=>e<60?"< 1":(e/60).toFixed();n.formatTokenAmount=(e,t,n="")=>[(0,l.formatAmount)(e,t),n].join(" ").trim();n.formatCurrencyAmount=(e,t,n=d.DEFAULT_PRECISION)=>{if(!e)return undefined;if(0===n){if(e.lt(.01))return"<$0.01";if(e.lt(1))return(0,i.formatCurrency)(e.toString(),t,2)}return(0,i.formatCurrency)(e.toString(),t,n)};n.formatProviderLabel=e=>`${null==e?void 0:e.bridgeId}_${null==e?void 0:e.bridges[0]}`}}},{package:"$root$",file:"ui/pages/bridge/utils/quote.ts"}],[7313,{"../../../../hooks/useCurrencyDisplay":7071,"bignumber.js":4195},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.formatAmount=function(e,t){if(t.isZero())return o;if(t.abs().lessThan(a.MIN_AMOUNT))return`<${i(e,a.MIN_AMOUNT)}`;if(t.abs().lessThan(1))return new Intl.NumberFormat(e,{maximumSignificantDigits:s}).format(t.round(a.DEFAULT_PRECISION).toNumber());const n=t.abs().truncated().toString().length,r=Math.max(0,s-n+1);return new Intl.NumberFormat(e,{maximumFractionDigits:r}).format(t.toFixed(r))},n.formatAmountMaxPrecision=i;var r=e("bignumber.js"),a=e("../../../../hooks/useCurrencyDisplay");const s=3,o="0";function i(e,t){const n=new r.BigNumber(t),a=n.decimalPlaces(),s=n.toFixed(a),[o,i]=s.split("."),c=new Intl.NumberFormat(e).format(o);return i?`${c}.${i}`:c}}}},{package:"$root$",file:"ui/pages/confirmations/components/simulation-details/formatAmount.ts"}],[7336,{"../../../components/component-library":6528,"../../../helpers/constants/design-system":6979,"./util":7357,"@metamask/controller-utils":1506},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ResultTemplate=void 0;var r=e("@metamask/controller-utils"),a=e("../../../components/component-library"),s=e("../../../helpers/constants/design-system"),o=e("./util");function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function c(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}var u=new WeakMap,d=new WeakSet;function l(e,t){const{error:n,header:i,icon:d,message:l,title:p}=e,m=(h=this,(f=u).get(c(f,h))===r.ApprovalType.ResultSuccess);var f,h;return[...(0,o.processHeader)(i)??[],{key:"container",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,height:s.BlockSize.Full,padding:4},children:[{key:"content",element:"Box",props:{flexDirection:s.FlexDirection.Column,alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center,height:s.BlockSize.Full,style:{alignSelf:s.AlignItems.stretch}},children:[null===d?undefined:{key:"icon",element:"AvatarIcon",props:{iconName:d??(m?a.IconName.Confirmation:a.IconName.Warning),size:a.IconSize.Xl,iconProps:{size:a.IconSize.Xl},color:m?s.IconColor.successDefault:s.IconColor.errorDefault,backgroundColor:m?s.BackgroundColor.successMuted:s.BackgroundColor.errorMuted},children:"Icon"},null===p?undefined:{key:"title",element:"Typography",props:{variant:s.TypographyVariant.H3,fontWeight:s.FontWeight.Bold},children:p??t(m?"resultPageSuccess":"resultPageError")},{key:"message",element:"Box",props:{alignItems:s.AlignItems.center,textAlign:s.TextAlign.Center,flexDirection:s.FlexDirection.Column,width:s.BlockSize.Full},children:m?(0,o.processString)(l,t("resultPageSuccessDefaultMessage")):(0,o.processError)(n,t("resultPageErrorDefaultMessage"))}]}]}]}n.ResultTemplate=class{constructor(e){var t,n;i(t=this,n=d),n.add(t),function(e,t,n){i(e,t),t.set(e,n)}(this,u,void 0),function(e,t,n){e.set(c(e,t),n)}(u,this,e)}getValues(e,t,n){return{content:c(d,this,l).call(this,e.requestData||{},t),submitText:t("ok"),onSubmit:()=>n.resolvePendingApproval(e.id,e.requestData),networkDisplay:!1}}}}}},{package:"$root$",file:"ui/pages/confirmations/confirmation/ResultTemplate.ts"}]],[],{});